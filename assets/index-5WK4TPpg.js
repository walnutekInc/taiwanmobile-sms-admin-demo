import{_ as ee}from"./index.vuevuetypescriptsetuptruelang-CtVkjESj.js";import{_ as te}from"./index.vuevuetypestyleindex0lang-B6Nhna9q.js";import{_ as oe}from"./index.vuevuetypescriptsetuptruelang-dt5mApfm.js";import{_ as ae}from"./index-X5bJU7G4.js";import{_ as se,a as ne}from"./index.vuevuetypescriptsetuptruelang-CCK1QI6A.js";import{_ as le}from"./index.vuevuetypescriptsetuptruelang-CGx5Uo-M.js";import{k as re,_ as ie}from"./index-BD0gHMId.js";import{F as ue}from"./request-DqzT16_i.js";import{u as de}from"./group-label-Bop0HokA.js";import{b as pe,a as T}from"./tools-a0gbWjD6.js";import{u as ce}from"./auto-reply-C-pXDRBT.js";import{d as me,ad as _e,D as fe,r as ye,f as w,u as e,W as d,_ as M,$ as o,k as t,G as y,Y as p,X as c,F as x,a3 as b,a4 as v,H as ge}from"./vue-Ckfa8DnP.js";import{K as we,p as xe,o as ve,G as ke,r as he,F as Re,J as be,N as Ye}from"./antd-CCbBcq8G.js";import"./context-CNmEAB52.js";import"./index.vuevuetypescriptsetuptruelang-DkGXW9D7.js";const De={class:"flex justify-between px-2 items-center py-4 bg-sms-grayscale-0 rounded-t-12px"},Ce={class:"me-1"},Te={href:"javascript:;"},Me=p("span",null,"訊息主旨僅支援 MMS",-1),Ke={class:"me-1"},Ie={href:"javascript:;"},Fe=p("span",null,"將回傳特定內容(接收關鍵字)的複數門號打包至群組標籤，後續可再進行行銷",-1),Oe={key:1},Ve={key:0},$e={key:1},je=p("div",{class:"text-center px-30px py-20px w-328px text-base mx-auto"}," 您選擇的自動回覆將直接永久刪除。 ",-1),Ze=me({__name:"index",setup(Ee){const{getGroupLabelOption:K,groupOptions:Y}=de(),{getAutoReplys:I,autoReplys:F,pagination:O,deleteAutoReply:V}=ce(),$=_e();fe(async()=>{K(),k()});const j=re(),E=[{title:"接收關鍵字",dataIndex:"acceptKeyword",key:"acceptKeyword",sorter:!0,fixed:"left",width:"160px"},{title:"訊息主旨",dataIndex:"subject",key:"subject",sorter:!0,fixed:"left",width:"111px"},{title:"自動回覆內容",dataIndex:"content",key:"content",sorter:!0,width:"278px"},{title:"群組標籤設定",dataIndex:"group",key:"group",sorter:!0,width:"154px"},{title:"開始日期",dataIndex:"startDate",key:"startDate",sorter:!0,width:"140px"},{title:"結束日期",dataIndex:"endDate",key:"endDate",sorter:!0,width:"140px"},{title:"建立時間",dataIndex:"createTime",key:"createTime",sorter:!0,width:"140px"},{title:"修改時間",dataIndex:"updateTime",key:"updateTime",defaultSortOrder:"descend",sorter:!0,width:"140px"}],r=ye({selectedRowKeys:[],selectedRows:[],loading:!1});function N(l,a){console.log("selectedRowKeys changed: ",l,a),r.selectedRowKeys=l,r.selectedRows=a}const n=w({sortField:"createTime",sortOrder:"descend",takeEffectDates:void 0,group:[],createTime:void 0,updateTime:void 0,keyword:""}),S=w();async function k(l=1,a=10){const i={current:l,pageSize:a,...e(n)};await I(i)}async function U(l,a,i){console.log("pagination:",l,"sorter:",i),n.value=Object.assign(n.value,{sortField:i.field,sortOrder:i.order}),await k(l.current,l.pageSize)}const h=w(null);function B(){var l;k(1),(l=h.value)==null||l.hide()}function L(){r.selectedRows.length===1&&$.push({name:"AutoReplyEdit",params:{id:r.selectedRowKeys[0]}})}const m=w(!1);function A(){m.value=!0}async function G(){var a;((a=(await V(r.selectedRowKeys)).data)==null?void 0:a.status)==="success"&&(j.success({message:"自動回覆刪除成功",placement:"top"}),m.value=!1,r.selectedRowKeys=[],r.selectedRows=[])}return(l,a)=>{const i=ie,_=le,z=se,P=ne,H=xe,g=ae,f=ve,R=ke,J=he,W=Re,D=be,X=oe,q=te,Q=Ye,Z=ee;return d(),M(Z,{title:"自動回覆"},{extraContent:o(()=>[t(_,{status:"small1",onClick:a[0]||(a[0]=()=>l.$router.push({name:"AutoReplyCreate"}))},{icon:o(()=>[t(i,{name:"plus",width:"16px"})]),default:o(()=>[y(" 新增自動回覆 ")]),_:1})]),default:o(()=>[p("div",De,[p("div",null,[t(_,{status:"small2",class:"me-2",disabled:e(r).selectedRowKeys.length===0||e(r).selectedRowKeys.length>1,onClick:L},{icon:o(()=>[t(i,{name:"edit",width:"16px"})]),default:o(()=>[y(" 編輯 ")]),_:1},8,["disabled"]),t(_,{status:"small2",class:"me-2",disabled:e(r).selectedRowKeys.length===0,onClick:A},{icon:o(()=>[t(i,{name:"delete",width:"16px"})]),default:o(()=>[y(" 刪除 ")]),_:1},8,["disabled"])]),t(ue,{ref_key:"filterKeywordInputRef",ref:h,modelValue:e(n).keyword,"onUpdate:modelValue":a[7]||(a[7]=s=>e(n).keyword=s),class:"w-440px h-40px",placeholder:"搜尋接收關鍵字、自動回覆內容",onClearFilter:a[8]||(a[8]=()=>{n.value={...e(n),keyword:"",createTime:void 0,updateTime:void 0}})},{filterForm:o(()=>[t(W,{ref_key:"formRef",ref:S,layout:"vertical",model:e(n),autocomplete:"off"},{default:o(()=>[t(J,{gutter:[16,12]},{default:o(()=>[t(f,{span:24},{default:o(()=>[t(g,{id:"group",label:"群組標籤設定",valueed:e(pe)(e(n).group)},{default:o(()=>[t(H,{value:e(n).group,"onUpdate:value":a[2]||(a[2]=s=>e(n).group=s),options:e(Y),"max-tag-count":2,"show-arrow":!0,mode:"multiple",class:"w-full","option-filter-prop":"label","menu-item-selected-icon":" "},{dropdownRender:o(({menuNode:s})=>[t(z,{modelValue:e(n).group,"onUpdate:modelValue":a[1]||(a[1]=u=>e(n).group=u),menu:s,options:e(Y)},null,8,["modelValue","menu","options"])]),option:o(({value:s,label:u})=>[t(P,{values:e(n).group,value:s,label:u},null,8,["values","value","label"])]),_:1},8,["value","options"])]),_:1},8,["valueed"])]),_:1}),t(f,{span:24},{default:o(()=>[t(g,{label:"生效開始與結束日期",valueed:e(n).takeEffectDates},{default:o(()=>[t(R,{value:e(n).takeEffectDates,"onUpdate:value":a[3]||(a[3]=s=>e(n).takeEffectDates=s),class:"w-full",placement:"topLeft",format:"YYYY-MM-DD","value-format":"YYYY/MM/DD"},null,8,["value"])]),_:1},8,["valueed"])]),_:1}),t(f,{span:24},{default:o(()=>[t(g,{label:"建立時間",valueed:e(n).createTime},{default:o(()=>[t(R,{value:e(n).createTime,"onUpdate:value":a[4]||(a[4]=s=>e(n).createTime=s),class:"w-full",placement:"topLeft",format:"YYYY-MM-DD","value-format":"YYYY/MM/DD"},null,8,["value"])]),_:1},8,["valueed"])]),_:1}),t(f,{span:24},{default:o(()=>[t(g,{label:"修改時間",valueed:e(n).updateTime},{default:o(()=>[t(R,{value:e(n).updateTime,"onUpdate:value":a[5]||(a[5]=s=>e(n).updateTime=s),class:"w-full",placement:"topLeft",format:"YYYY-MM-DD","value-format":"YYYY/MM/DD"},null,8,["value"])]),_:1},8,["valueed"])]),_:1}),t(f,{span:24,class:"text-center"},{default:o(()=>[t(_,{status:"small2",class:"me-5",onClick:a[6]||(a[6]=s=>{var u;return(u=e(h))==null?void 0:u.hide()})},{default:o(()=>[y(" 取消 ")]),_:1}),t(_,{status:"small1",onClick:B},{default:o(()=>[y(" 確定 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])]),t(q,{"data-source":e(F),columns:E,size:"small",scroll:{x:1500},"show-sorter-tooltip":!1,"row-selection":{selectedRowKeys:e(r).selectedRowKeys,onChange:N},pagination:{...e(O)},onChange:U},{headerCell:o(({column:s})=>[s.key==="subject"?(d(),c(x,{key:0},[p("span",Ce,b(s.title),1),t(D,{placement:"top","get-popup-container":e(T)},{title:o(()=>[Me]),default:o(()=>[p("a",Te,[t(i,{name:"union",width:"16px",class:"text-sms-grayscale-60"})])]),_:1},8,["get-popup-container"])],64)):v("",!0),s.key==="group"?(d(),c(x,{key:1},[p("span",Ke,b(s.title),1),t(D,{placement:"top","get-popup-container":e(T)},{title:o(()=>[Fe]),default:o(()=>[p("a",Ie,[t(i,{name:"union",width:"16px",class:"text-sms-grayscale-60"})])]),_:1},8,["get-popup-container"])],64)):v("",!0)]),bodyCell:o(({column:s,record:u,text:C})=>[s.dataIndex==="group"?(d(),c(x,{key:0},[u.group?(d(),M(X,{key:0,chips:[u.group],"max-count":3},null,8,["chips"])):(d(),c("span",Oe,"-"))],64)):v("",!0),s.dataIndex==="subject"?(d(),c(x,{key:1},[e(we)(C)?(d(),c("span",$e,"-")):(d(),c("span",Ve,b(C),1))],64)):v("",!0)]),_:1},8,["data-source","row-selection","pagination"]),t(Q,{open:e(m),"onUpdate:open":a[9]||(a[9]=s=>ge(m)?m.value=s:null),title:"是否刪除選取的自動回覆？",centered:"","cancel-text":"取消","ok-text":"確定",width:"440px",onOk:G},{default:o(()=>[je]),_:1},8,["open"])]),_:1})}}});export{Ze as default};
