import{_ as B}from"./index.vuevuetypescriptsetuptruelang-D49_PPmq.js";import{_ as E}from"./index.vuevuetypestyleindex0lang-BGNd5Gbb.js";import{_ as O}from"./index-CLsy3q8J.js";import{_ as P}from"./index.vuevuetypescriptsetuptruelang-DpQcR6qX.js";import{_ as j}from"./index-D6D3dNFb.js";import{E as M,N as U,G,I as W,o as X,F as q,z as H}from"./antd-CL-o36kY.js";import{u as J}from"./request-C2-FuxhR.js";import{f as D,d as K,o as Q,u as a,W as x,_ as Z,$ as i,k as c,G as k,Y as A,X as N,F as C,a3 as Y,a4 as w,y as ee}from"./vue-BMMYOVpY.js";import"./context-C8KA9EkZ.js";import"./index.vuevuetypestyleindex0lang-Cj84r4o_.js";const _=[{key:"1",revenueDate:"2024/03/31",name:"N/A",method:"ATM",price:1e4,createTime:"2012/02/10 09:20",updateTime:"2016/07/26 19:32"},{key:"2",revenueDate:"2024/03/29",name:"N/A",method:"ATM",price:5e3,createTime:"2012/02/10 09:20",updateTime:"2016/07/26 19:32"},{key:"3",revenueDate:"2024/03/22",name:"Mona Chuang",method:"CARD",price:3e3,createTime:"2012/02/10 09:20",updateTime:"2016/07/26 19:32"},{key:"4",revenueDate:"2024/03/17",name:"Nelson Ma",method:"CARD",price:12e3,createTime:"2012/02/10 09:20",updateTime:"2016/07/26 19:32"},{key:"5",revenueDate:"2024/03/10",name:"N/A",method:"TRANSFER",price:6e3,createTime:"2012/02/10 09:20",updateTime:"2016/07/26 19:32"},{key:"6",revenueDate:"2024/02/28",name:"N/A",method:"ATM",price:1e3,createTime:"2012/02/10 09:20",updateTime:"2016/07/26 19:32"},{key:"7",revenueDate:"2024/02/25",name:"Nelson Ma",method:"CARD",price:1e3,createTime:"2012/02/10 09:20",updateTime:"2016/07/26 19:32"},{key:"8",revenueDate:"2024/02/24",name:"N/A",method:"ATM",price:1e3,createTime:"2012/02/10 09:20",updateTime:"2016/07/26 19:32"},{key:"9",revenueDate:"2024/02/12",name:"Nelson Ma",method:"CARD",price:8e3,createTime:"2012/02/10 09:20",updateTime:"2016/07/26 19:32"},{key:"10",revenueDate:"2024/02/09",name:"N/A",method:"TRANSFER",price:1e4,createTime:"2012/02/10 09:20",updateTime:"2016/07/26 19:32"},{key:"11",revenueDate:"2024/02/12",name:"Nelson Ma",method:"CARD",price:15e3,createTime:"2012/02/10 09:20",updateTime:"2016/07/26 19:32"}];function te(){const{list:u,pagination:f,setResponseList:g}=J(),m=async e=>{const p=(e.current-1)*e.pageSize,n=Math.ceil(_.length/e.pageSize);g({total:_.length,pages:n,current:e.current,pageSize:e.pageSize,records:_.slice(p,e.current*e.pageSize)})},T=async e=>({data:{status:"success",id:"123"}}),r=async(e,p)=>({data:{status:"success",id:"123"}}),y=async e=>({data:{status:"success"}}),d=D();return{getAccountings:m,accountingList:u,pagination:f,createAccounting:T,updateAccounting:r,getAccounting:async e=>{const p=_.find(n=>n.key===e);return d.value=p,{data:{...p}}},accounting:d,deleteAccounting:y}}var b=(u=>(u.ATM="匯款或ATM轉帳",u.CARD="刷卡",u.TRANSFER="帳務異動",u))(b||{});const ae={class:"flex justify-between px-2 items-center py-4 bg-sms-grayscale-0 rounded-t-12px"},ne=A("div",{class:"text-sms-primary-blue-80 text-xl font-500"}," 目前餘額：NT$ 30,120.00 ",-1),oe={class:"px-30px py-20px w-376px text-base mx-auto"},fe=K({__name:"index",setup(u){const{getAccountings:f,accountingList:g,pagination:m}=te(),T=[{title:"儲值日期",dataIndex:"revenueDate",key:"revenueDate",sorter:!0,width:"274px"},{title:"帳號名稱",dataIndex:"name",key:"name",width:"274px"},{title:"儲值方式",dataIndex:"method",key:"method",width:"274px"},{title:"儲值金額",dataIndex:"price",key:"price",width:"274px"}];Q(()=>{l(1)});const r=D({sortField:"createTime",sortOrder:"descend",createTime:[M().format("YYYY/MM/DD"),M().add(3,"M").format("YYYY/MM/DD")]});async function y(n,t,s){console.log("sorter:",s),r.value=Object.assign(r.value,{sortField:s.field,sortOrder:s.order}),await l(m.value.current,m.value.pageSize)}async function d(n,t){await l(n,t)}async function l(n=1,t=10){const s={current:n,pageSize:t,...a(r)};await f(s)}const e=D({open:!1,price:""});async function p(n){const v=n.target.value.replace(/^\D/g,"").slice(0,6);await ee(),e.value.price=v}return(n,t)=>{const s=j,v=P,R=G,S=O,I=E,F=W,$=X,z=q,L=H,V=B;return x(),Z(V,{title:"帳務管理"},{extraContent:i(()=>[c(v,{status:"small1",onClick:t[0]||(t[0]=()=>e.value={open:!0,price:""})},{icon:i(()=>[c(s,{name:"money",width:"16px"})]),default:i(()=>[k(" 我要儲值 ")]),_:1})]),default:i(()=>[A("div",ae,[ne,c(S,{label:"建立時間",valueed:a(r).createTime},{default:i(()=>[c(R,{value:a(r).createTime,"onUpdate:value":t[1]||(t[1]=o=>a(r).createTime=o),class:"w-full",placement:"topLeft",format:"YYYY-MM-DD","value-format":"YYYY/MM/DD"},null,8,["value"])]),_:1},8,["valueed"])]),c(I,{"data-source":a(g),columns:T,size:"small","show-sorter-tooltip":!1,pagination:{...a(m)},onChange:y,onChangePagination:d},{bodyCell:i(({column:o,text:h})=>[o.dataIndex==="price"?(x(),N(C,{key:0},[k(" NT$ "+Y(h.toLocaleString()),1)],64)):w("",!0),o.dataIndex==="method"?(x(),N(C,{key:1},[k(Y(a(b)[h]),1)],64)):w("",!0)]),_:1},8,["data-source","pagination"]),c(L,{open:a(e).open,"onUpdate:open":t[3]||(t[3]=o=>a(e).open=o),title:"儲值金額",centered:"","cancel-text":"取消","ok-text":"確定",width:"440px","ok-button-props":{disabled:a(U)(a(e).price)||parseInt(a(e).price)<1e3},onOk:t[4]||(t[4]=o=>a(e).open=!1)},{default:i(()=>[A("div",oe,[c(z,{layout:"vertical",autocomplete:"off"},{default:i(()=>[c($,{"html-for":"",extra:"單次最低儲值 NT$1,000"},{default:i(()=>[c(F,{value:a(e).price,"onUpdate:value":t[2]||(t[2]=o=>a(e).price=o),"addon-before":"NT$",type:"number",placeholder:"請輸入金額",onInput:p},null,8,["value"])]),_:1})]),_:1})])]),_:1},8,["open","ok-button-props"])]),_:1})}}});export{fe as default};
