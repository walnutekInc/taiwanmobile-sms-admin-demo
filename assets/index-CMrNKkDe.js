import{_ as N}from"./index.vuevuetypescriptsetuptruelang-BdlENQ8t.js";import{_ as P}from"./index.vuevuetypestyleindex0lang-CcFzt3O-.js";import{_ as C}from"./index-Bb-HzrIL.js";import{_ as A}from"./index-BlWtfRXv.js";import{_ as K}from"./index.vuevuetypescriptsetuptruelang-DAISk7I9.js";import{o as O,O as z,t as E,y as U,F as G,K as W}from"./antd-CeareF1k.js";import{F as X}from"./index-CFgvsZxn.js";import{u as q}from"./report-BujqQSFK.js";import{g as D}from"./tools-DInPKiE1.js";import{d as J,f as T,D as Q,W as u,_ as Z,$ as e,k as a,G as l,Y as r,u as o,X as p,F as _,a6 as m,a4 as f}from"./vue-BtcszhJV.js";import"./context-CFbOfPTF.js";import"./index.vuevuetypestyleindex0lang-l354ccN2.js";import"./request-CfiAB8vl.js";const ee={class:"flex justify-end px-2 items-center py-4 bg-sms-grayscale-0 rounded-t-12px"},te={class:"me-1"},ae={href:"javascript:;"},ne=r("span",null,[l("發送失敗的接收門號和原因，可參考發送紀錄查詢報表。"),r("br"),l(" 發送中和發送成功以外皆為發送失敗，例如: 發送過期、主帳號有設定黑名單等狀況")],-1),oe={class:"me-1"},se={href:"javascript:;"},le=r("span",null,"發送成功率 = 發送成功數量/發送總數",-1),we=J({__name:"index",setup(re){const{dailyStatisticsPagination:y,dailyStatisticsList:I,getDailyStatisticsList:j}=q(),x=T(null),s=T({keyword:"",sendDate:void 0}),R=[{title:"發送日期",dataIndex:"sendDate",key:"sendDate",sorter:!0,width:"120px"},{title:"單位",dataIndex:"unit",key:"unit",sorter:!0,width:"132px"},{title:"發送總數",dataIndex:"sendTotal",key:"sendTotal",sorter:!0,width:"105px",align:"right",customHeaderCell:()=>({class:"[&>*]:!justify-end"})},{title:"發送中數量",dataIndex:"sendingTotal",key:"sendingTotal",sorter:!0,width:"150px",align:"right",customHeaderCell:()=>({class:"[&>*]:!justify-end"})},{title:"發送成功數量",dataIndex:"successTotal",key:"successTotal",sorter:!0,width:"150px",align:"right",customHeaderCell:()=>({class:"[&>*]:!justify-end"})},{title:"發送金額",dataIndex:"price",key:"price",sorter:!0,width:"110px",align:"right",customHeaderCell:()=>({class:"[&>*]:!justify-end"})},{title:"發送失敗數量",dataIndex:"failTotal",key:"failTotal",width:"150px",align:"right",customHeaderCell:()=>({class:"[&>*]:!justify-end"})},{title:"失敗回補金額",dataIndex:"failRecoveryAmount",key:"failRecoveryAmount",sorter:!0,width:"150px",align:"right",customHeaderCell:()=>({class:"[&>*]:!justify-end"})},{title:"發送成功率",dataIndex:"successRate",key:"successRate",sorter:!0,width:"150px",align:"right",customHeaderCell:()=>({class:"[&>*]:!justify-end"})}];async function g(i=1,n=10){const d={current:i,pageSize:n,...o(s)};await j(d)}async function b(i,n,d){console.log("sorter:",d),s.value=Object.assign(s.value,{sortField:d.field,sortOrder:d.order}),await g(y.value.current,y.value.pageSize)}async function F(i,n){await g(i,n)}Q(()=>{g()});function Y(){}function S(i){return i>=O()}return(i,n)=>{const d=C,k=K,V=z,H=A,h=E,B=U,$=G,w=C,v=W,L=P,M=N;return u(),Z(M,{title:"每日發送統計"},{extraContent:e(()=>[a(k,{type:"small1"},{icon:e(()=>[a(d,{name:"download",width:"16px"})]),default:e(()=>[l(" 匯出CSV ")]),_:1})]),default:e(()=>[r("div",ee,[a(X,{ref_key:"filterKeywordInputRef",ref:x,modelValue:o(s).keyword,"onUpdate:modelValue":n[2]||(n[2]=t=>o(s).keyword=t),class:"w-440px h-40px",placeholder:"搜尋活動名稱",onClearFilter:n[3]||(n[3]=()=>{s.value={...o(s),keyword:"",sendDate:void 0}})},{filterForm:e(()=>[a($,{layout:"vertical",model:o(s),autocomplete:"off"},{default:e(()=>[a(B,{gutter:[16,12]},{default:e(()=>[a(h,{span:24},{default:e(()=>[a(H,{label:"發送日期",valueed:o(s).sendDate},{default:e(()=>[a(V,{value:o(s).sendDate,"onUpdate:value":n[0]||(n[0]=t=>o(s).sendDate=t),class:"w-full",placement:"topLeft",format:"YYYY-MM-DD","value-format":"YYYY/MM/DD","disabled-date":S},null,8,["value"])]),_:1},8,["valueed"])]),_:1}),a(h,{span:24,class:"text-center"},{default:e(()=>[a(k,{status:"small2",class:"me-5",onClick:n[1]||(n[1]=t=>{var c;return(c=o(x))==null?void 0:c.hide()})},{default:e(()=>[l(" 取消 ")]),_:1}),a(k,{status:"small1",onClick:Y},{default:e(()=>[l(" 確定 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])]),a(L,{"data-source":o(I),columns:R,scroll:{x:"max-content"},size:"small","show-sorter-tooltip":!1,pagination:{...o(y)},onChange:b,onChangePagination:F},{headerCell:e(({column:t})=>[t.key==="failRecoveryAmount"?(u(),p(_,{key:0},[r("span",te,m(t.title),1),a(v,{placement:"top","get-popup-container":o(D)},{title:e(()=>[ne]),default:e(()=>[r("a",ae,[a(w,{name:"union",width:"16px",class:"text-sms-grayscale-60"})])]),_:1},8,["get-popup-container"])],64)):f("",!0),t.key==="successRate"?(u(),p(_,{key:1},[r("span",oe,m(t.title),1),a(v,{placement:"top","get-popup-container":o(D)},{title:e(()=>[le]),default:e(()=>[r("a",se,[a(w,{name:"union",width:"16px",class:"text-sms-grayscale-60"})])]),_:1},8,["get-popup-container"])],64)):f("",!0)]),bodyCell:e(({column:t,text:c})=>[t.key==="successRate"?(u(),p(_,{key:0},[l(m(c)+"% ",1)],64)):f("",!0),t.key==="price"||t.key==="failRecoveryAmount"?(u(),p(_,{key:1},[l(" $NT"+m(c),1)],64)):f("",!0),t.key==="sendTotal"||t.key==="sendingTotal"||t.key==="successTotal"||t.key==="failTotal"?(u(),p(_,{key:2},[l(m(c.toLocaleString()),1)],64)):f("",!0)]),_:1},8,["data-source","pagination"])]),_:1})}}});export{we as default};
