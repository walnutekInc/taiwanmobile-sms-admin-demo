import{_ as V}from"./index.vuevuetypescriptsetuptruelang-afhdyqCV.js";import{_ as B}from"./index.vuevuetypestyleindex0lang-0x0GGNmC.js";import{_ as P}from"./index-CYjrpmnc.js";import{_ as j}from"./index.vuevuetypescriptsetuptruelang-B72BLR5Z.js";import{_ as E}from"./index-CwS9-pKE.js";import{w as x,n as U,z as G,I as W,o as X,F as q,p as H}from"./antd-D-4v7PI_.js";import{u as J}from"./request-B6pRDm0U.js";import{f as A,d as K,o as Q,u as a,W as k,_ as Z,$ as i,k as s,G as D,Y as h,X as N,F as b,a3 as w,a4 as C,y as ee}from"./vue-7WeWijCE.js";import"./context-Dyv98K4Y.js";import"./index.vuevuetypestyleindex0lang-CBzdtnpI.js";const _=[{key:"1",revenueDate:"2024/03/31",name:"N/A",method:"ATM",price:1e4,createTime:"2012/02/10 09:20",updateTime:"2016/07/26 19:32"},{key:"2",revenueDate:"2024/03/29",name:"N/A",method:"ATM",price:5e3,createTime:"2012/02/10 09:20",updateTime:"2016/07/26 19:32"},{key:"3",revenueDate:"2024/03/22",name:"Mona Chuang",method:"CARD",price:3e3,createTime:"2012/02/10 09:20",updateTime:"2016/07/26 19:32"},{key:"4",revenueDate:"2024/03/17",name:"Nelson Ma",method:"CARD",price:12e3,createTime:"2012/02/10 09:20",updateTime:"2016/07/26 19:32"},{key:"5",revenueDate:"2024/03/10",name:"N/A",method:"TRANSFER",price:6e3,createTime:"2012/02/10 09:20",updateTime:"2016/07/26 19:32"},{key:"6",revenueDate:"2024/02/28",name:"N/A",method:"ATM",price:1e3,createTime:"2012/02/10 09:20",updateTime:"2016/07/26 19:32"},{key:"7",revenueDate:"2024/02/25",name:"Nelson Ma",method:"CARD",price:1e3,createTime:"2012/02/10 09:20",updateTime:"2016/07/26 19:32"},{key:"8",revenueDate:"2024/02/24",name:"N/A",method:"ATM",price:1e3,createTime:"2012/02/10 09:20",updateTime:"2016/07/26 19:32"},{key:"9",revenueDate:"2024/02/12",name:"Nelson Ma",method:"CARD",price:8e3,createTime:"2012/02/10 09:20",updateTime:"2016/07/26 19:32"},{key:"10",revenueDate:"2024/02/09",name:"N/A",method:"TRANSFER",price:1e4,createTime:"2012/02/10 09:20",updateTime:"2016/07/26 19:32"},{key:"11",revenueDate:"2024/02/12",name:"Nelson Ma",method:"CARD",price:15e3,createTime:"2012/02/10 09:20",updateTime:"2016/07/26 19:32"}];function te(){const{list:u,pagination:f,setResponseList:g}=J(),d=async e=>{const p=(e.current-1)*e.pageSize,o=Math.ceil(_.length/e.pageSize);g({total:_.length,pages:o,current:e.current,pageSize:e.pageSize,records:_.slice(p,e.current*e.pageSize)})},T=async e=>({data:{status:"success",id:"123"}}),c=async(e,p)=>({data:{status:"success",id:"123"}}),y=async e=>({data:{status:"success"}}),m=A();return{getAccountings:d,accountingList:u,pagination:f,createAccounting:T,updateAccounting:c,getAccounting:async e=>{const p=_.find(o=>o.key===e);return m.value=p,{data:{...p}}},accounting:m,deleteAccounting:y}}var Y=(u=>(u.ATM="匯款或ATM轉帳",u.CARD="刷卡",u.TRANSFER="帳務異動",u))(Y||{});const ae={class:"flex justify-between px-2 items-center py-4 bg-sms-grayscale-0 rounded-t-12px"},ne=h("div",{class:"text-sms-primary-blue-80 text-xl font-500"}," 目前餘額：NT$ 30,120.00 ",-1),oe={class:"px-30px py-20px w-376px text-base mx-auto"},fe=K({__name:"index",setup(u){const{getAccountings:f,accountingList:g,pagination:d}=te(),T=[{title:"儲值日期",dataIndex:"revenueDate",key:"revenueDate",sorter:!0,width:"274px"},{title:"帳號名稱",dataIndex:"name",key:"name",width:"274px"},{title:"儲值方式",dataIndex:"method",key:"method",width:"274px"},{title:"儲值金額",dataIndex:"price",key:"price",width:"274px"}];Q(()=>{l(1)});const c=A({sortField:"createTime",sortOrder:"descend",createTime:[x().format("YYYY/MM/DD"),x().add(3,"M").format("YYYY/MM/DD")]});async function y(o,t,r){console.log("sorter:",r),c.value=Object.assign(c.value,{sortField:r.field,sortOrder:r.order}),await l(d.value.current,d.value.pageSize)}async function m(o,t){await l(o,t)}async function l(o=1,t=10){const r={current:o,pageSize:t,...a(c)};await f(r)}const e=A({open:!1,price:""});async function p(o){const v=o.target.value.replace(/^\D/g,"").slice(0,6);await ee(),e.value.price=v}return(o,t)=>{const r=E,v=j,R=G,S=P,I=B,F=W,$=X,z=q,L=H,O=V;return k(),Z(O,{title:"儲值管理"},{extraContent:i(()=>[s(v,{status:"small1",onClick:t[0]||(t[0]=()=>e.value={open:!0,price:""})},{icon:i(()=>[s(r,{name:"money",width:"16px"})]),default:i(()=>[D(" 我要儲值 ")]),_:1})]),default:i(()=>[h("div",ae,[ne,s(S,{label:"建立時間",valueed:a(c).createTime},{default:i(()=>[s(R,{value:a(c).createTime,"onUpdate:value":t[1]||(t[1]=n=>a(c).createTime=n),"disabled-date":n=>n&&n>a(x)().endOf("day"),class:"w-full",placement:"topLeft",format:"YYYY-MM-DD","value-format":"YYYY/MM/DD"},null,8,["value","disabled-date"])]),_:1},8,["valueed"])]),s(I,{"data-source":a(g),columns:T,size:"small","show-sorter-tooltip":!1,pagination:{...a(d)},onChange:y,onChangePagination:m},{bodyCell:i(({column:n,text:M})=>[n.dataIndex==="price"?(k(),N(b,{key:0},[D(" NT$ "+w(M.toLocaleString()),1)],64)):C("",!0),n.dataIndex==="method"?(k(),N(b,{key:1},[D(w(a(Y)[M]),1)],64)):C("",!0)]),_:1},8,["data-source","pagination"]),s(L,{open:a(e).open,"onUpdate:open":t[3]||(t[3]=n=>a(e).open=n),title:"儲值金額",centered:"","cancel-text":"取消","ok-text":"確定",width:"440px","ok-button-props":{disabled:a(U)(a(e).price)||parseInt(a(e).price)<1e3},onOk:t[4]||(t[4]=n=>a(e).open=!1)},{default:i(()=>[h("div",oe,[s(z,{layout:"vertical",autocomplete:"off"},{default:i(()=>[s($,{"html-for":"",extra:"單次最低儲值 NT$1,000"},{default:i(()=>[s(F,{value:a(e).price,"onUpdate:value":t[2]||(t[2]=n=>a(e).price=n),"addon-before":"NT$",type:"number",placeholder:"請輸入金額",onInput:p},null,8,["value"])]),_:1})]),_:1})])]),_:1},8,["open","ok-button-props"])]),_:1})}}});export{fe as default};
