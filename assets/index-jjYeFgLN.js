import{_ as M}from"./index.vuevuetypescriptsetuptruelang-btAM1SCl.js";import{_ as N}from"./index.vuevuetypestyleindex0lang-0x0GGNmC.js";import{_ as C}from"./index-BHFQDeIH.js";import{_ as P}from"./index-PQUfjzE6.js";import{_ as A}from"./index.vuevuetypescriptsetuptruelang-B72BLR5Z.js";import{F as z}from"./index-9HL5TWQQ.js";import{u as K}from"./report-B2cfyJHF.js";import{g as D}from"./tools-DInPKiE1.js";import{z as O,y as E,E as U,F as G,t as W}from"./antd-D-4v7PI_.js";import{d as X,f as T,D as q,W as c,_ as J,$ as e,k as a,G as l,Y as r,u as n,X as p,F as _,a3 as m,a4 as f}from"./vue-7WeWijCE.js";import"./context-C_dsVytT.js";import"./index.vuevuetypestyleindex0lang-CBzdtnpI.js";import"./request-e4vzWZTz.js";const Q={class:"flex justify-end px-2 items-center py-4 bg-sms-grayscale-0 rounded-t-12px"},Z={class:"me-1"},ee={href:"javascript:;"},te=r("span",null,[l("發送失敗的接收門號和原因，可參考發送紀錄查詢報表。"),r("br"),l(" 發送中和發送成功以外皆為發送失敗，例如: 發送過期、主帳號有設定黑名單等狀況")],-1),ae={class:"me-1"},oe={href:"javascript:;"},ne=r("span",null,"發送成功率 = 發送成功數量/發送總數",-1),xe=X({__name:"index",setup(se){const{dailyStatisticsPagination:y,dailyStatisticsList:I,getDailyStatisticsList:R}=K(),x=T(null),s=T({keyword:"",sendDate:void 0}),j=[{title:"發送日期",dataIndex:"sendDate",key:"sendDate",sorter:!0,width:"120px"},{title:"單位",dataIndex:"unit",key:"unit",sorter:!0,width:"132px"},{title:"發送總數",dataIndex:"sendTotal",key:"sendTotal",sorter:!0,width:"105px",align:"right",customHeaderCell:()=>({class:"[&>*]:!justify-end"})},{title:"發送中數量",dataIndex:"sendingTotal",key:"sendingTotal",sorter:!0,width:"150px",align:"right",customHeaderCell:()=>({class:"[&>*]:!justify-end"})},{title:"發送成功數量",dataIndex:"successTotal",key:"successTotal",sorter:!0,width:"150px",align:"right",customHeaderCell:()=>({class:"[&>*]:!justify-end"})},{title:"發送金額",dataIndex:"price",key:"price",sorter:!0,width:"110px",align:"right",customHeaderCell:()=>({class:"[&>*]:!justify-end"})},{title:"發送失敗數量",dataIndex:"failTotal",key:"failTotal",width:"150px",align:"right",customHeaderCell:()=>({class:"[&>*]:!justify-end"})},{title:"失敗回補金額",dataIndex:"failRecoveryAmount",key:"failRecoveryAmount",sorter:!0,width:"150px",align:"right",customHeaderCell:()=>({class:"[&>*]:!justify-end"})},{title:"發送成功率",dataIndex:"successRate",key:"successRate",sorter:!0,width:"150px",align:"right",customHeaderCell:()=>({class:"[&>*]:!justify-end"})}];async function g(u=1,o=10){const i={current:u,pageSize:o,...n(s)};await R(i)}async function F(u,o,i){console.log("sorter:",i),s.value=Object.assign(s.value,{sortField:i.field,sortOrder:i.order}),await g(y.value.current,y.value.pageSize)}async function Y(u,o){await g(u,o)}q(()=>{g()});function b(){}return(u,o)=>{const i=C,k=A,S=O,V=P,h=E,H=U,B=G,w=C,v=W,$=N,L=M;return c(),J(L,{title:"每日發送統計"},{extraContent:e(()=>[a(k,{type:"small1"},{icon:e(()=>[a(i,{name:"download",width:"16px"})]),default:e(()=>[l(" 匯出CSV ")]),_:1})]),default:e(()=>[r("div",Q,[a(z,{ref_key:"filterKeywordInputRef",ref:x,modelValue:n(s).keyword,"onUpdate:modelValue":o[2]||(o[2]=t=>n(s).keyword=t),class:"w-440px h-40px",placeholder:"搜尋活動名稱",onClearFilter:o[3]||(o[3]=()=>{s.value={...n(s),keyword:"",sendDate:void 0}})},{filterForm:e(()=>[a(B,{layout:"vertical",model:n(s),autocomplete:"off"},{default:e(()=>[a(H,{gutter:[16,12]},{default:e(()=>[a(h,{span:24},{default:e(()=>[a(V,{label:"發送日期",valueed:n(s).sendDate},{default:e(()=>[a(S,{value:n(s).sendDate,"onUpdate:value":o[0]||(o[0]=t=>n(s).sendDate=t),class:"w-full",placement:"topLeft",format:"YYYY-MM-DD","value-format":"YYYY/MM/DD"},null,8,["value"])]),_:1},8,["valueed"])]),_:1}),a(h,{span:24,class:"text-center"},{default:e(()=>[a(k,{status:"small2",class:"me-5",onClick:o[1]||(o[1]=t=>{var d;return(d=n(x))==null?void 0:d.hide()})},{default:e(()=>[l(" 取消 ")]),_:1}),a(k,{status:"small1",onClick:b},{default:e(()=>[l(" 確定 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])]),a($,{"data-source":n(I),columns:j,scroll:{x:"max-content"},size:"small","show-sorter-tooltip":!1,pagination:{...n(y)},onChange:F,onChangePagination:Y},{headerCell:e(({column:t})=>[t.key==="failRecoveryAmount"?(c(),p(_,{key:0},[r("span",Z,m(t.title),1),a(v,{placement:"top","get-popup-container":n(D)},{title:e(()=>[te]),default:e(()=>[r("a",ee,[a(w,{name:"union",width:"16px",class:"text-sms-grayscale-60"})])]),_:1},8,["get-popup-container"])],64)):f("",!0),t.key==="successRate"?(c(),p(_,{key:1},[r("span",ae,m(t.title),1),a(v,{placement:"top","get-popup-container":n(D)},{title:e(()=>[ne]),default:e(()=>[r("a",oe,[a(w,{name:"union",width:"16px",class:"text-sms-grayscale-60"})])]),_:1},8,["get-popup-container"])],64)):f("",!0)]),bodyCell:e(({column:t,text:d})=>[t.key==="successRate"?(c(),p(_,{key:0},[l(m(d)+"% ",1)],64)):f("",!0),t.key==="price"||t.key==="failRecoveryAmount"?(c(),p(_,{key:1},[l(" $NT"+m(d),1)],64)):f("",!0),t.key==="sendTotal"||t.key==="sendingTotal"||t.key==="successTotal"||t.key==="failTotal"?(c(),p(_,{key:2},[l(m(d.toLocaleString()),1)],64)):f("",!0)]),_:1},8,["data-source","pagination"])]),_:1})}}});export{xe as default};
