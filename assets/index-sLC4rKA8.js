import{_ as T}from"./index.vuevuetypescriptsetuptruelang-DtktabFF.js";import{_ as U}from"./index.vuevuetypescriptsetuptruelang-DAISk7I9.js";import{_ as z}from"./index.vuevuetypestyleindex0lang-braRYrGJ.js";import{n as v,p as d,u as A,N as G,z as J,s as M,t as R,I as W,y as Y,F as q}from"./antd-CeareF1k.js";import{u as H}from"./contact-person-M9qoPZ3x.js";import{k as K}from"./index-Bg0jDDn5.js";import{d as L,D as O,r as b,W as Q,_ as X,$ as a,Y as t,k as s,u as o,ab as f,G as m,y as h}from"./vue-BtcszhJV.js";import"./context-DmYmhnYM.js";import"./request-BtQEZJ0m.js";import"./group-label-NACgDYeO.js";const Z={class:"bg-sms-grayscale-0 rounded-3 p-10"},ee=t("div",{class:"flex gap-10 mb-4"},[t("div",{class:"flex flex-col gap-y-.5"},[t("span",{class:"text-sm text-sms-grayscale-60"},"公司帳號"),t("span",{class:"text-base text-sms-grayscale-100"},"VCSJ000200")]),t("div",{class:"flex flex-col gap-y-.5"},[t("span",{class:"text-sm text-sms-grayscale-60"},"公司名稱"),t("span",{class:"text-base text-sms-grayscale-100"},"台灣大哥大(股)公司")])],-1),te={class:"flex flex-col"},ae=t("span",{class:"text-sm text-sms-grayscale-80"},"聯絡人",-1),se=t("p",{class:"text-sm text-sms-grayscale-60 mt-2"}," 如果您有聯絡人異動的需求，請與我們聯繫：02-66386888 分機16993 徐小姐，或分機 16784 紀小姐 ",-1),oe=t("span",{class:"pe-.5"},"預警金額",-1),ne=t("span",{class:"text-red-500 pe-2"},"*",-1),le=t("span",{class:"pe-.5"},"Email",-1),ie=t("span",{class:"text-red-500 pe-2"},"*",-1),re={class:"flex justify-center gap-2 mt-4"},be=L({__name:"index",setup(ce){const{getAllContactPerson:P,contactPerson:w}=H(),k=K(),C=[{title:"聯絡人姓名",dataIndex:"name",key:"name",width:"122px"},{title:"公司電話",dataIndex:"contact",key:"contact",width:"120px"},{title:"手機門號",dataIndex:"phone",key:"phone",width:"130px"},{title:"E-mail",dataIndex:"email",key:"email",width:"200px"},{title:"備註",dataIndex:"note",key:"note",width:"200px"}];O(()=>{P({current:1,pageSize:99999},[])});const g={notify:!0,alertPrice:"",email:""},e=b(v(g)),I=b({alertPrice:[{async validator(l){return e.notify&&d(e.alertPrice)?Promise.reject("請輸入預警金額"):Promise.resolve()},trigger:"blur"}],email:[{async validator(l){if(e.notify&&d(e.email))return Promise.reject("至少 1 個Email");if(!d(e.email)){const n=/^[^\s@]+@[^\s@][^\s.@]*\.[^\s@]+$/;for(const c of e.email.split(","))if(!n.test(c))return Promise.reject("格式錯誤")}return Promise.resolve()},trigger:"blur"}]}),{validateInfos:_,resetFields:E,validate:$}=A(e,I);async function N(l){const i=l.target.value.replace(/^\D/g,"").slice(0,6);await h(),e.alertPrice=i}async function V(l){const i=l.target.value.replace(/[^\w,@.#%$]/g,"");await h(),e.email=i}function F(){$().then(async()=>{k.success({message:"更新成功",placement:"top"})})}return(l,n)=>{const c=z,i=G,S=J,u=M,p=R,x=W,j=Y,y=U,B=q,D=T;return Q(),X(D,{title:"公司資料管理"},{default:a(()=>[t("div",Z,[ee,t("div",te,[ae,t("div",null,[s(c,{columns:C,"data-source":o(w),scroll:{y:150}},null,8,["data-source"])]),se]),s(B,{layout:"vertical",autocomplete:"off",class:"mt-4 p-4 bg-sms-bg-light-mode-gray rounded-12px",onSubmit:F},{default:a(()=>[s(j,{gutter:[16,4]},{default:a(()=>[s(p,{span:24},{default:a(()=>[s(u,f({label:"預警餘額通知與金額設定"},o(_).notify),{default:a(()=>[s(S,{value:o(e).notify,"onUpdate:value":n[0]||(n[0]=r=>o(e).notify=r)},{default:a(()=>[s(i,{value:!0},{default:a(()=>[m(" 開啟 ")]),_:1}),s(i,{value:!1},{default:a(()=>[m(" 關閉 ")]),_:1})]),_:1},8,["value"])]),_:1},16)]),_:1}),s(p,{span:12},{default:a(()=>[s(u,f(o(_).alertPrice,{extra:"餘額低於上述金額時，系統第一週每日寄送 Email 通知，第二週起每週寄一次預警通知關閉後，將不再寄發。"}),{label:a(()=>[oe,ne]),default:a(()=>[s(x,{value:o(e).alertPrice,"onUpdate:value":n[1]||(n[1]=r=>o(e).alertPrice=r),placeholder:"請輸入預警金額","addon-before":"NT$",type:"number",disabled:!o(e).notify,onInput:N},null,8,["value","disabled"])]),_:1},16)]),_:1}),s(p,{span:12},{default:a(()=>[s(u,f(o(_).email,{extra:"若有多筆Email，請以半形逗號 ” , ” 隔開"}),{label:a(()=>[le,ie]),default:a(()=>[s(x,{value:o(e).email,"onUpdate:value":n[2]||(n[2]=r=>o(e).email=r),placeholder:"請輸入Email",maxlength:150,disabled:!o(e).notify,onChange:V},null,8,["value","disabled"])]),_:1},16)]),_:1})]),_:1}),t("div",re,[s(y,{status:"small2",onClick:n[3]||(n[3]=r=>o(E)(o(v)(g)))},{default:a(()=>[m(" 取消 ")]),_:1}),s(y,{"html-type":"submit"},{default:a(()=>[m(" 確定 ")]),_:1})])]),_:1})])]),_:1})}}});export{be as default};
