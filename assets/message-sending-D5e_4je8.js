import{b as k}from"./index.vuevuetypescriptsetuptruelang-Db2jfWid.js";import{z as j,E as x,Q as z,O as P,N as a}from"./antd-DcYYAuBl.js";import{d as E,f as p,W as A,_ as B,$ as F,Y as T,k as R,u as M,H as w}from"./vue-BMMYOVpY.js";import{u as G}from"./request-D0GfMeM9.js";const L={class:"flex justify-center py-20px pt-54px"},C={class:"relative"},q=E({name:"FullPhonePreviewModal",__name:"full-phone-preview-modal",props:{tooltip:{type:Boolean,default:!1}},setup(n,{expose:f}){const l=p(!1),d=p([]);function m(r){l.value=!0,d.value=r}return f({show:m}),(r,u)=>{const g=k,y=j;return A(),B(y,{open:M(l),"onUpdate:open":u[0]||(u[0]=S=>w(l)?l.value=S:null),width:"600px",footer:null},{default:F(()=>[T("div",L,[T("div",C,[R(g,{message:M(d),tooltip:n.tooltip},null,8,["message","tooltip"])])])]),_:1},8,["open"])}}});var c=(n=>(n.SMS_General="SMS 一般訊息",n.MMS_General="MMS 一般訊息",n.SMS_Parameter="SMS 參數訊息",n.MMS_Parameter="MMS 參數訊息",n))(c||{});const I={key:"1",name:"季末大促銷",messageType:"MMS",subject:"主旨",phone:"0961-238-888",content:"愛戀情人節，獨家驚喜等您發現！ 情人節將至，愛戀之情將再次升華！我們特別為您準備了一場浪漫的情人節限定活動，帶來一系列獨家驚喜等您發現。無論您是想要為您的另一半挑選一份特別的禮物，還是希望一起度過浪漫的夜晚，我們都有豐富的選擇和活動等待著您。讓我們一同創造美好的回憶，共度這個充滿愛意的情人節！",multimediaFile:[{url:"https://cdn.pixabay.com/photo/2019/08/09/13/51/boat-4395122_1280.jpg",fileName:"rose_celebrate.png",size:86400,key:"1",fileSize:"",file:void 0,type:"image"},{url:"https://cdn.pixabay.com/photo/2018/06/09/21/37/summer-thunder-storm-3465247_1280.jpg",fileName:"invitation_username.jpg",size:86400,key:"2",fileSize:"",file:void 0,type:"image"},{url:"http://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4",fileName:"BigBuckBunny.mp4",size:86400,key:"2",fileSize:"",file:void 0,type:"video"}],recipients:{contactPerson:["1","2"],group:[{id:"1",label:"群組A"}],manual:"0912345678,0912345678",file:void 0},sendTimeType:"RESERVATION",reservationTime:"2024/02/14 17:30",effectiveTime:""},O={name:"季末大促銷季末大促銷季末大促銷季末大促銷季末大促銷季末大促銷",messageType:"MMS",phone:"0961-238-888",content:"愛戀情人節，獨家驚喜等您發現！ 情人節將至，愛戀之情將再次升華！我們特別為您準備了一場浪漫的情人節限定活動，帶來一系列獨家驚喜等您發現。無論您是想要為您的另一半挑選一份特別的禮物，還是希望一起度過浪漫的夜晚，我們都有豐富的選擇和活動等待著您。讓我們一同創造美好的回憶，共度這個充滿愛意的情人節！",multimediaFile:[{url:"https://cdn.pixabay.com/photo/2019/08/09/13/51/boat-4395122_1280.jpg",fileName:"rose_celebrate.png",size:86400,key:"1",fileSize:"",file:void 0,type:"image"}],file:{fileName:"test.xlsx",url:""},isCommonContent:!0,multimediaFileWithSubject:[],recipients:[{number:"1",phone:"0938118293",field1:"小馬",field2:"9412918",field3:"-",field4:"-",field5:"-"},{number:"2",phone:"0946184761",field1:"安潔",field2:"5439577",field3:"-",field4:"-",field5:"-"},{number:"3",phone:"0966092938",field1:"Lucy",field2:"5634840",field3:"-",field4:"-",field5:"-"},{number:"4",phone:"0956482371",field1:"Sam",field2:"3437402",field3:"-",field4:"-",field5:"-"},{number:"5",phone:"0978049940",field1:"Tim",field2:"8480277",field3:"-",field4:"-",field5:"-"}],subject:"測試",sendTimeType:"NOW",effectiveTime:"",reservationTime:""},h=[{key:"1",name:"季末大促銷",account:"taiwan_media_00",sendNumber:"AJ593749G2",sendStatus:"RESERVATION",messageType:"MMS",phone:"0961-238-888",content:"愛戀情人節，獨家驚喜等您發現！ 情人節將至，愛戀之情將再次升華！我們特別為您準備了一場浪漫的情人節限定活動，帶來一系列獨家驚喜等您發現。無論您是想要為您的另一半挑選一份特別的禮物，還是希望一起度過浪漫的夜晚，我們都有豐富的選擇和活動等待著您。讓我們一同創造美好的回憶，共度這個充滿愛意的情人節！",multimediaFile:[{url:"https://cdn.pixabay.com/photo/2019/08/09/13/51/boat-4395122_1280.jpg",fileName:"rose_celebrate.png",size:86400,key:"1",fileSize:"",file:void 0,type:"image"},{url:"https://cdn.pixabay.com/photo/2018/06/09/21/37/summer-thunder-storm-3465247_1280.jpg",fileName:"invitation_username.jpg",size:86400,key:"2",fileSize:"",file:void 0,type:"image"},{url:"http://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4",fileName:"BigBuckBunny.mp4",size:86400,key:"2",fileSize:"",file:void 0,type:"video"}],isParameter:!1,statistics:{total:0,sending:0,success:0,fail:0,successRate:0},sendTime:"2024/10/28 17:30",createTime:"2024/10/28 17:30",updateTime:"2024/10/28 17:30"},{key:"2",name:"9月壽星活動",account:"taiwan_media_00",sendNumber:"AJ593749G2",sendStatus:"EXECUTING",messageType:"SMS",phone:"0961-238-888",content:"慶祝9月壽星 %field1%，特別優惠等你來享！ 九月生日的朋友們，這個月是您獨特的時刻！為了慶祝您的生日，我們特別準備了一系列令人驚喜的優惠和禮物。無論您是想要一項特別的折扣、額外的積分還是免費的驚喜禮物，我們都會在您的生日月份為您提供。請加入我們，一起慶祝這個特別的時刻，讓我們為您的生日帶來更多的歡樂和驚喜！",multimediaFile:[{url:"https://cdn.pixabay.com/photo/2019/08/09/13/51/boat-4395122_1280.jpg",fileName:"rose_celebrate.png",size:86400,key:"1",fileSize:"",file:void 0,type:"image"}],isParameter:!1,statistics:{total:0,sending:0,success:0,fail:0,successRate:0},sendTime:x().format("YYYY/MM/DD HH:mm"),createTime:"2024/10/28 17:30",updateTime:"2024/10/28 17:30"},{key:"3",name:"季末大促銷季末大促銷季末大促銷季末大促銷季末大促銷季末大促銷",account:"taiwan_media_00",sendNumber:"AJ593749G2",sendStatus:"RESERVATION",messageType:"MMS",phone:"0961-238-888",content:"愛戀情人節，獨家驚喜等您發現！ 情人節將至，愛戀之情將再次升華！我們特別為您準備了一場浪漫的情人節限定活動，帶來一系列獨家驚喜等您發現。無論您是想要為您的另一半挑選一份特別的禮物，還是希望一起度過浪漫的夜晚，我們都有豐富的選擇和活動等待著您。讓我們一同創造美好的回憶，共度這個充滿愛意的情人節！",multimediaFile:[{url:"https://cdn.pixabay.com/photo/2019/08/09/13/51/boat-4395122_1280.jpg",fileName:"rose_celebrate.png",size:86400,key:"1",fileSize:"",file:void 0,type:"image"}],isParameter:!0,statistics:{total:0,sending:0,success:0,fail:0,successRate:0},sendTime:"2024/02/14 17:30",createTime:"2024/10/28 17:30",updateTime:"2024/10/28 17:30"},{key:"4",name:"週年慶",account:"taiwan_media_00",sendNumber:"AJ593749G2",sendStatus:"IS_SENT",messageType:"MMS",phone:"0961-238-888",content:`準備好享受驚人的優惠和特別禮遇，因為我們正在慶祝週年紀念！ 不要錯過這場盛會 - 來店內或線上參加，盡情享受您最喜愛的產品的驚人折扣！這些週年慶特惠不會持續太久！立即購物，讓這個慶典變得難忘！
提供您專屬折扣碼：%field1%
有限期限至：%field2%`,multimediaFile:[{url:"https://cdn.pixabay.com/photo/2019/08/09/13/51/boat-4395122_1280.jpg",fileName:"rose_celebrate.png",size:86400,key:"1",fileSize:"",file:void 0,type:"image"}],isParameter:!0,statistics:{total:0,sending:0,success:0,fail:0,successRate:0},sendTime:"2024/02/01 17:30",createTime:"2024/10/28 17:30",updateTime:"2024/10/28 17:30"},{key:"5",name:"聖誕佳節",account:"taiwan_media_00",sendNumber:"AJ593749G2",sendStatus:"RESERVATION_FAILED",messageType:"SMS",phone:"0961-238-888",content:"聖誕節大促銷來啦！快來店裡或線上參加我們的節慶活動，享受驚喜禮遇！找尋最適合送給親朋好友的禮物，一起度過溫馨愉快的節日時光！敬請期待我們的特別優惠，讓您的聖誕更加美好！",multimediaFile:[{url:"https://cdn.pixabay.com/photo/2019/08/09/13/51/boat-4395122_1280.jpg",fileName:"rose_celebrate.png",size:86400,key:"1",fileSize:"",file:void 0,type:"image"}],isParameter:!0,statistics:{total:0,sending:0,success:0,fail:0,successRate:0},sendTime:"2023/12/20 17:30",createTime:"2024/10/28 17:30",updateTime:"2024/10/28 17:30"}];function K(){const{list:n,pagination:f,setResponseList:l}=G(),d=async e=>{l({total:11,pages:2,current:1,pageSize:10,records:h})},m=p(),r=async e=>{const i=h.find(t=>t.key===e);return m.value=i,{data:{...i}}},u=async e=>({data:{status:"success",id:"1"}}),g=async(e,i)=>({data:{status:"success",id:"1"}}),y=e=>({data:{fileName:e.name,url:window.URL.createObjectURL(e)}}),S=async e=>(console.log(e),{data:{...I}}),b=async e=>({data:{status:"success",id:"1"}}),_=async(e,i)=>({data:{status:"success",id:"1"}}),v=async e=>(console.log(e),{data:{...O}}),N=p([{label:"不設定(預設)",value:""},{label:"1 小時",value:"1 小時"},{label:"2 小時",value:"2 小時"},{label:"3 小時",value:"3 小時"},{label:"4 小時",value:"4 小時"},{label:"5 小時",value:"5 小時"},{label:"6 小時",value:"6 小時"},{label:"7 小時",value:"7 小時"},{label:"8 小時",value:"8 小時"}]);return{getMessageSendings:d,messageSendings:n,pagination:f,createGeneralMessageSending:u,updateGeneralMessageSending:g,messageSending:m,getMessageSending:r,getGeneralMessageSendingById:S,uploadBatchRecipientsExcel:y,effectiveTimeOption:N,getActiveStatusLabel:(e,i)=>e==="MMS"?i?c.MMS_Parameter:c.MMS_General:i?c.SMS_Parameter:c.SMS_General,checkMessageSendingDetail:async(e,i=!1)=>({data:{...e,isParameter:i,price:5,recipientsCount:6208,isBlackListCount:12,estimatedTotalAmount:31400,estimatedRemainingAmount:-3580,totalLongMessages:3,estimatedTotalMessages:3}}),checkMessageSendingNameExist:async(e,i)=>{const t=z(h,{name:e});return t?!(!P(i)&&t.key===i):!1},createParameterMessageSending:b,updateParameterMessageSending:_,getParameterMessageSendingById:v,renderParameterMessagePreviewArray:e=>{const i=[];if(e.isCommonContent){if(!a(e.content)||!a(e.subject)){const t=e.recipients[0];let s=e.content;if((!a(e.content)||!a(e.subject))&&(t&&(t.field1&&t.field1!=="-"&&(s=s.replace(/%field1%/g,t.field1)),t.field2&&t.field1!=="-"&&(s=s.replace(/%field2%/g,t.field2)),t.field3&&t.field3!=="-"&&(s=s.replace(/%field3%/g,t.field3)),t.field4&&t.field4!=="-"&&(s=s.replace(/%field4%/g,t.field4)),t.field5&&t.field5!=="-"&&(s=s.replace(/%field5%/g,t.field5))),i.push({phone:e.phone,content:s,...e.messageType==="MMS"&&{subject:e.subject},messageType:"SENT",contentType:"text"})),!a(e.multimediaFile))for(const o of e.multimediaFile)i.push({phone:e.phone,content:o.url,messageType:"SENT",contentType:o.type})}}else if(e.messageType==="MMS"){const t=e.recipients[0];if(t){const s=e.multimediaFileWithSubject.find(o=>o.key===t.group);if(i.push({phone:e.phone,content:t.content,...e.messageType==="MMS"&&{subject:(s==null?void 0:s.subject)??""},messageType:"SENT",contentType:"text"}),s&&!a(s.multimediaFile))for(const o of s.multimediaFile)i.push({phone:e.phone,content:o.url,messageType:"SENT",contentType:o.type})}}else{const t=e.recipients[0];t&&i.push({phone:e.phone,content:t.content,messageType:"SENT",contentType:"text"})}return i.map((t,s)=>({...t,key:s}))},renderGeneralMessagePreviewArray:e=>{const i=[];if((!a(e.content)||!a(e.subject))&&i.push({phone:e.phone,content:e.content,...e.messageType==="MMS"&&{subject:e.subject},messageType:"SENT",contentType:"text"}),!a(e.multimediaFile))for(const t of e.multimediaFile)i.push({phone:e.phone,content:t.url,messageType:"SENT",contentType:t.type});return i.map((t,s)=>({...t,key:s}))}}}export{c as M,q as _,K as u};
