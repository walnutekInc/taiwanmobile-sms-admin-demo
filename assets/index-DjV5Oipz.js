import{_ as te}from"./index.vuevuetypescriptsetuptruelang-D79VmAcO.js";import{_ as oe}from"./index.vuevuetypestyleindex0lang-BO6dExgl.js";import{_ as ae}from"./index.vuevuetypescriptsetuptruelang-CurZCoPl.js";import{_ as se}from"./index-CdZ-22Wt.js";import{_ as ne,a as le}from"./index.vuevuetypescriptsetuptruelang-C-Xp12f7.js";import{_ as ie}from"./index.vuevuetypescriptsetuptruelang-CL8f4-88.js";import{j as re,_ as ue}from"./index-X9R5oT3v.js";import{F as pe}from"./index-CY-31O8s.js";import{u as de}from"./group-label-BJ_2ruxT.js";import{b as ce,g as M}from"./tools-DInPKiE1.js";import{u as me}from"./auto-reply-LvFDjKW3.js";import{d as _e,ad as fe,D as ye,r as ge,f as v,u as e,W as p,_ as K,$ as a,k as t,G as y,Y as d,X as c,F as x,a3 as D,a4 as k,H as we}from"./vue-BTNAaAVH.js";import{n as ve,x as xe,y as ke,z as he,E as Re,F as be,t as De,p as Ye}from"./antd-DnZDPeHZ.js";import"./context-C21i4FRC.js";import"./index.vuevuetypestyleindex0lang-Cibwl0fk.js";import"./index.vuevuetypescriptsetuptruelang-Kz8z1UAe.js";import"./request-v0z9L-gc.js";const Ce={class:"flex justify-between px-2 items-center py-4 bg-sms-grayscale-0 rounded-t-12px"},Te={class:"me-1"},Me={href:"javascript:;"},Ke=d("span",null,"訊息主旨僅支援 MMS",-1),Ie={class:"me-1"},Fe={href:"javascript:;"},Oe=d("span",null,"將回傳特定內容(接收關鍵字)的複數門號打包至群組標籤，後續可再進行行銷",-1),Ve={key:1},je={key:0},Ee={key:1},$e=d("div",{class:"text-center px-30px py-20px w-328px text-base mx-auto"}," 您選擇的自動回覆將直接永久刪除。 ",-1),ot=_e({__name:"index",setup(Se){const{getGroupLabelOption:I,groupOptions:Y}=de(),{getAutoReplys:F,autoReplys:O,pagination:h,deleteAutoReply:V}=me(),j=fe();ye(async()=>{I(),g()});const E=re(),$=[{title:"接收關鍵字",dataIndex:"acceptKeyword",key:"acceptKeyword",sorter:!0,fixed:"left",width:"160px"},{title:"訊息主旨",dataIndex:"subject",key:"subject",sorter:!0,fixed:"left",width:"111px"},{title:"自動回覆內容",dataIndex:"content",key:"content",sorter:!0,width:"278px"},{title:"群組標籤設定",dataIndex:"group",key:"group",sorter:!0,width:"154px"},{title:"開始日期",dataIndex:"startDate",key:"startDate",sorter:!0,width:"140px"},{title:"結束日期",dataIndex:"endDate",key:"endDate",sorter:!0,width:"140px"},{title:"建立時間",dataIndex:"createTime",key:"createTime",sorter:!0,width:"140px"},{title:"修改時間",dataIndex:"updateTime",key:"updateTime",defaultSortOrder:"descend",sorter:!0,width:"140px"}],i=ge({selectedRowKeys:[],selectedRows:[],loading:!1});function S(l,o){console.log("selectedRowKeys changed: ",l,o),i.selectedRowKeys=l,i.selectedRows=o}const n=v({sortField:"createTime",sortOrder:"descend",takeEffectDates:void 0,group:[],createTime:void 0,updateTime:void 0,keyword:""}),U=v();async function g(l=1,o=10){const r={current:l,pageSize:o,...e(n)};await F(r)}async function B(l,o,r){console.log("sorter:",r),n.value=Object.assign(n.value,{sortField:r.field,sortOrder:r.order}),await g(h.value.current,h.value.pageSize)}async function L(l,o){await g(l,o)}const R=v(null);function N(){var l;g(1),(l=R.value)==null||l.hide()}function A(){i.selectedRows.length===1&&j.push({name:"AutoReplyEdit",params:{id:i.selectedRowKeys[0]}})}const m=v(!1);function z(){m.value=!0}async function G(){var o;((o=(await V(i.selectedRowKeys)).data)==null?void 0:o.status)==="success"&&(E.success({message:"自動回覆刪除成功",placement:"top"}),m.value=!1,i.selectedRowKeys=[],i.selectedRows=[])}return(l,o)=>{const r=ue,_=ie,P=ne,H=le,W=xe,w=se,f=ke,b=he,X=Re,q=be,C=De,J=ae,Q=oe,Z=Ye,ee=te;return p(),K(ee,{title:"自動回覆"},{extraContent:a(()=>[t(_,{status:"small1",onClick:o[0]||(o[0]=()=>l.$router.push({name:"AutoReplyCreate"}))},{icon:a(()=>[t(r,{name:"plus",width:"16px"})]),default:a(()=>[y(" 新增自動回覆 ")]),_:1})]),default:a(()=>[d("div",Ce,[d("div",null,[t(_,{status:"small2",class:"me-2",disabled:e(i).selectedRowKeys.length===0||e(i).selectedRowKeys.length>1,onClick:A},{icon:a(()=>[t(r,{name:"edit",width:"16px"})]),default:a(()=>[y(" 編輯 ")]),_:1},8,["disabled"]),t(_,{status:"small2",class:"me-2",disabled:e(i).selectedRowKeys.length===0,onClick:z},{icon:a(()=>[t(r,{name:"delete",width:"16px"})]),default:a(()=>[y(" 刪除 ")]),_:1},8,["disabled"])]),t(pe,{ref_key:"filterKeywordInputRef",ref:R,modelValue:e(n).keyword,"onUpdate:modelValue":o[7]||(o[7]=s=>e(n).keyword=s),class:"w-440px h-40px",placeholder:"搜尋接收關鍵字、自動回覆內容",onClearFilter:o[8]||(o[8]=()=>{n.value={...e(n),keyword:"",group:[],takeEffectDates:void 0,createTime:void 0,updateTime:void 0}})},{filterForm:a(()=>[t(q,{ref_key:"formRef",ref:U,layout:"vertical",model:e(n),autocomplete:"off"},{default:a(()=>[t(X,{gutter:[16,12]},{default:a(()=>[t(f,{span:24},{default:a(()=>[t(w,{id:"group",label:"群組標籤設定",valueed:e(ce)(e(n).group)},{default:a(()=>[t(W,{value:e(n).group,"onUpdate:value":o[2]||(o[2]=s=>e(n).group=s),options:e(Y),"max-tag-count":2,"show-arrow":!0,mode:"multiple",class:"w-full","option-filter-prop":"label","menu-item-selected-icon":" "},{dropdownRender:a(({menuNode:s})=>[t(P,{modelValue:e(n).group,"onUpdate:modelValue":o[1]||(o[1]=u=>e(n).group=u),menu:s,options:e(Y)},null,8,["modelValue","menu","options"])]),option:a(({value:s,label:u})=>[t(H,{values:e(n).group,value:s,label:u},null,8,["values","value","label"])]),_:1},8,["value","options"])]),_:1},8,["valueed"])]),_:1}),t(f,{span:24},{default:a(()=>[t(w,{label:"生效開始與結束日期",valueed:e(n).takeEffectDates},{default:a(()=>[t(b,{value:e(n).takeEffectDates,"onUpdate:value":o[3]||(o[3]=s=>e(n).takeEffectDates=s),class:"w-full",placement:"topLeft",format:"YYYY-MM-DD","value-format":"YYYY/MM/DD"},null,8,["value"])]),_:1},8,["valueed"])]),_:1}),t(f,{span:24},{default:a(()=>[t(w,{label:"建立時間",valueed:e(n).createTime},{default:a(()=>[t(b,{value:e(n).createTime,"onUpdate:value":o[4]||(o[4]=s=>e(n).createTime=s),class:"w-full",placement:"topLeft",format:"YYYY-MM-DD","value-format":"YYYY/MM/DD"},null,8,["value"])]),_:1},8,["valueed"])]),_:1}),t(f,{span:24},{default:a(()=>[t(w,{label:"修改時間",valueed:e(n).updateTime},{default:a(()=>[t(b,{value:e(n).updateTime,"onUpdate:value":o[5]||(o[5]=s=>e(n).updateTime=s),class:"w-full",placement:"topLeft",format:"YYYY-MM-DD","value-format":"YYYY/MM/DD"},null,8,["value"])]),_:1},8,["valueed"])]),_:1}),t(f,{span:24,class:"text-center"},{default:a(()=>[t(_,{status:"small2",class:"me-5",onClick:o[6]||(o[6]=s=>{var u;return(u=e(R))==null?void 0:u.hide()})},{default:a(()=>[y(" 取消 ")]),_:1}),t(_,{status:"small1",onClick:N},{default:a(()=>[y(" 確定 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])]),t(Q,{"data-source":e(O),columns:$,size:"small",scroll:{x:1500},"show-sorter-tooltip":!1,"row-selection":{selectedRowKeys:e(i).selectedRowKeys,onChange:S},pagination:{...e(h)},onChange:B,onChangePagination:L},{headerCell:a(({column:s})=>[s.key==="subject"?(p(),c(x,{key:0},[d("span",Te,D(s.title),1),t(C,{placement:"top","get-popup-container":e(M)},{title:a(()=>[Ke]),default:a(()=>[d("a",Me,[t(r,{name:"union",width:"16px",class:"text-sms-grayscale-60"})])]),_:1},8,["get-popup-container"])],64)):k("",!0),s.key==="group"?(p(),c(x,{key:1},[d("span",Ie,D(s.title),1),t(C,{placement:"top","get-popup-container":e(M)},{title:a(()=>[Oe]),default:a(()=>[d("a",Fe,[t(r,{name:"union",width:"16px",class:"text-sms-grayscale-60"})])]),_:1},8,["get-popup-container"])],64)):k("",!0)]),bodyCell:a(({column:s,record:u,text:T})=>[s.dataIndex==="group"?(p(),c(x,{key:0},[u.group?(p(),K(J,{key:0,chips:[u.group],"max-count":3},null,8,["chips"])):(p(),c("span",Ve,"-"))],64)):k("",!0),s.dataIndex==="subject"?(p(),c(x,{key:1},[e(ve)(T)?(p(),c("span",Ee,"-")):(p(),c("span",je,D(T),1))],64)):k("",!0)]),_:1},8,["data-source","row-selection","pagination"]),t(Z,{open:e(m),"onUpdate:open":o[9]||(o[9]=s=>we(m)?m.value=s:null),title:"是否刪除選取的自動回覆？",centered:"","cancel-text":"取消","ok-text":"確定",width:"440px",onOk:G},{default:a(()=>[$e]),_:1},8,["open"])]),_:1})}}});export{ot as default};
