import{_ as P}from"./index.vuevuetypescriptsetuptruelang-D79VmAcO.js";import{_ as L}from"./index.vuevuetypestyleindex0lang-BO6dExgl.js";import{_ as T}from"./index-CdZ-22Wt.js";import{_ as B,a as E}from"./index.vuevuetypescriptsetuptruelang-C-Xp12f7.js";import{_ as z}from"./index.vuevuetypescriptsetuptruelang-CL8f4-88.js";import{_ as K}from"./index-X9R5oT3v.js";import{F as G}from"./index-CY-31O8s.js";import{u as H}from"./report-vfaGtIhX.js";import{b as C}from"./tools-DInPKiE1.js";import{M as W}from"./AccountingMethod-B5Pd2OrC.js";import{z as q,x as J,y as Q,E as X,F as Z}from"./antd-DnZDPeHZ.js";import{d as ee,f as y,D as te,c as F,W as oe,_ as ae,$ as a,Y as m,k as o,G as p,u as e}from"./vue-BTNAaAVH.js";import"./context-C21i4FRC.js";import"./index.vuevuetypestyleindex0lang-Cibwl0fk.js";import"./index.vuevuetypescriptsetuptruelang-Kz8z1UAe.js";import"./request-v0z9L-gc.js";const ne={class:"flex gap-2"},le=m("span",null,null,-1),se={class:"flex justify-end gap-2 p-2"},ue=m("span",null,null,-1),ie={class:"flex justify-end gap-2 p-2"},re={class:"flex justify-end px-2 items-center py-4 bg-sms-grayscale-0 rounded-t-12px"},Ae=ee({__name:"index",setup(pe){const{storedValueStatisticsPagination:g,storedValueStatisticsList:w,getStoredValueStatisticsList:I}=H(),x=y(null),c=y(!1),f=y(!1),n=y({keyword:"",companyAccount:[],companyName:[],storageDate:void 0,service:[],sortField:"createTime",sortOrder:"ascend"}),M=[{title:"儲值日期",dataIndex:"storageDate",key:"storageDate",width:120},{title:"公司帳號",dataIndex:"companyAccount",key:"companyAccount",width:120},{title:"公司名稱",dataIndex:"companyName",key:"companyName",width:200},{title:"儲值方式",dataIndex:"storageMethod",key:"storageMethod",width:150},{title:"儲值金額",dataIndex:"storageAmount",key:"storageAmount",width:120,align:"right",customHeaderCell:()=>({class:"[&>*]:!justify-center"}),customRender:({text:s})=>`$NT${s.toLocaleString(void 0,{minimumFractionDigits:2})}`}];async function _(s=1,t=10){const i={current:s,pageSize:t,...e(n)};await I(i)}async function O(s,t,i){console.log("sorter:",i),n.value=Object.assign(n.value,{sortField:i.field,sortOrder:i.order}),await _(g.value.current,g.value.pageSize)}async function S(s,t){await _(s,t)}te(()=>{_()});function Y(){var s;_(1),(s=x.value)==null||s.hide()}const D=F(()=>w.value.map(s=>({label:s.companyAccount,value:s.companyAccount}))),A=F(()=>w.value.map(s=>({label:s.companyName,value:s.companyName}))),$=Object.entries(W).map(([s,t])=>({label:t,value:s}));return(s,t)=>{const i=K,r=z,k=q,b=B,N=E,V=J,v=T,d=Q,R=X,U=Z,h=L,j=P;return oe(),ae(j,{title:"儲值統計報表"},{extraContent:a(()=>[m("div",ne,[o(r,{status:"small2",onClick:t[0]||(t[0]=l=>c.value=!0)},{icon:a(()=>[o(i,{name:"download",width:"16px"})]),default:a(()=>[p(" 匯出日報表 ")]),_:1}),o(k,{"allow-clear":!1,autofocus:!1,open:e(c),class:"h-0px w-0px bg-transparent border-none p-0",separator:" "},{suffixIcon:a(()=>[le]),renderExtraFooter:a(()=>[m("div",se,[o(r,{status:"small2",onClick:t[1]||(t[1]=l=>c.value=!1)},{default:a(()=>[p(" 取消 ")]),_:1}),o(r,{status:"small1",onClick:t[2]||(t[2]=l=>c.value=!1)},{default:a(()=>[p(" 確定 ")]),_:1})])]),_:1},8,["open"]),o(r,{status:"small2",onClick:t[3]||(t[3]=l=>f.value=!0)},{icon:a(()=>[o(i,{name:"download",width:"16px"})]),default:a(()=>[p(" 匯出月報表 ")]),_:1}),o(k,{picker:"month","allow-clear":!1,autofocus:!1,open:e(f),class:"h-0px w-0px bg-transparent border-none p-0",separator:" "},{suffixIcon:a(()=>[ue]),renderExtraFooter:a(()=>[m("div",ie,[o(r,{status:"small2",onClick:t[4]||(t[4]=l=>f.value=!1)},{default:a(()=>[p(" 取消 ")]),_:1}),o(r,{status:"small1",onClick:t[5]||(t[5]=l=>f.value=!1)},{default:a(()=>[p(" 確定 ")]),_:1})])]),_:1},8,["open"]),o(r,{status:"small2"},{icon:a(()=>[o(i,{name:"download",width:"16px"})]),default:a(()=>[p(" 匯出耗用會計報表 ")]),_:1})])]),default:a(()=>[m("div",re,[o(G,{ref_key:"filterKeywordInputRef",ref:x,modelValue:e(n).keyword,"onUpdate:modelValue":t[14]||(t[14]=l=>e(n).keyword=l),class:"w-440px h-40px",placeholder:"搜尋公司帳號、公司名稱",onClearFilter:t[15]||(t[15]=()=>{n.value={...e(n),keyword:"",companyAccount:[],companyName:[],usageDate:void 0,service:[]}})},{filterForm:a(()=>[o(U,{layout:"vertical",model:e(n),autocomplete:"off"},{default:a(()=>[o(R,{gutter:[16,12]},{default:a(()=>[o(d,{span:24},{default:a(()=>[o(v,{label:"公司帳號",valueed:e(C)(e(n).companyAccount)},{default:a(()=>[o(V,{value:e(n).companyAccount,"onUpdate:value":t[7]||(t[7]=l=>e(n).companyAccount=l),options:e(D),"max-tag-count":2,"show-arrow":!0,mode:"multiple",class:"w-full","option-filter-prop":"label","menu-item-selected-icon":" "},{dropdownRender:a(({menuNode:l})=>[o(b,{modelValue:e(n).companyAccount,"onUpdate:modelValue":t[6]||(t[6]=u=>e(n).companyAccount=u),menu:l,options:e(D)},null,8,["modelValue","menu","options"])]),option:a(({value:l,label:u})=>[o(N,{values:e(n).companyAccount,value:l,label:u},null,8,["values","value","label"])]),_:1},8,["value","options"])]),_:1},8,["valueed"])]),_:1}),o(d,{span:24},{default:a(()=>[o(v,{label:"公司名稱",valueed:e(C)(e(n).companyName)},{default:a(()=>[o(V,{value:e(n).companyName,"onUpdate:value":t[9]||(t[9]=l=>e(n).companyName=l),options:e(A),"max-tag-count":2,"show-arrow":!0,mode:"multiple",class:"w-full","option-filter-prop":"label","menu-item-selected-icon":" "},{dropdownRender:a(({menuNode:l})=>[o(b,{modelValue:e(n).companyName,"onUpdate:modelValue":t[8]||(t[8]=u=>e(n).companyName=u),menu:l,options:e(A)},null,8,["modelValue","menu","options"])]),option:a(({value:l,label:u})=>[o(N,{values:e(n).companyName,value:l,label:u},null,8,["values","value","label"])]),_:1},8,["value","options"])]),_:1},8,["valueed"])]),_:1}),o(d,{span:24},{default:a(()=>[o(v,{label:"儲值日期",valueed:e(n).storageDate},{default:a(()=>[o(k,{value:e(n).storageDate,"onUpdate:value":t[10]||(t[10]=l=>e(n).storageDate=l),class:"w-full",placement:"topLeft",format:"YYYY-MM-DD","value-format":"YYYY/MM/DD"},null,8,["value"])]),_:1},8,["valueed"])]),_:1}),o(d,{span:24},{default:a(()=>[o(v,{label:"服務內容",valueed:e(C)(e(n).service)},{default:a(()=>[o(V,{value:e(n).service,"onUpdate:value":t[12]||(t[12]=l=>e(n).service=l),options:e($),"max-tag-count":2,"show-arrow":!0,mode:"multiple",class:"w-full","option-filter-prop":"label","menu-item-selected-icon":" "},{dropdownRender:a(({menuNode:l})=>[o(b,{modelValue:e(n).service,"onUpdate:modelValue":t[11]||(t[11]=u=>e(n).service=u),menu:l,options:e($)},null,8,["modelValue","menu","options"])]),option:a(({value:l,label:u})=>[o(N,{values:e(n).service,value:l,label:u},null,8,["values","value","label"])]),_:1},8,["value","options"])]),_:1},8,["valueed"])]),_:1}),o(d,{span:24,class:"text-center"},{default:a(()=>[o(r,{status:"small2",class:"me-5",onClick:t[13]||(t[13]=l=>{var u;return(u=e(x))==null?void 0:u.hide()})},{default:a(()=>[p(" 取消 ")]),_:1}),o(r,{status:"small1",onClick:Y},{default:a(()=>[p(" 確定 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])]),o(h,{"data-source":e(w),columns:M,scroll:{x:"max-content"},size:"small","show-sorter-tooltip":!1,pagination:{...e(g)},onChange:O,onChangePagination:S},null,8,["data-source","pagination"])]),_:1})}}});export{Ae as default};
