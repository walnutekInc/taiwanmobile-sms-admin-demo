import{_ as X}from"./index.vuevuetypescriptsetuptruelang-BZ8LCPIw.js";import{_ as Y}from"./index.vuevuetypestyleindex0lang-CcFzt3O-.js";import{_ as Q}from"./index-BUSQFeK2.js";import{_ as Z,a as ee}from"./index.vuevuetypescriptsetuptruelang-DlliyulR.js";import{_ as T}from"./index.vuevuetypescriptsetuptruelang-DAISk7I9.js";import{_ as B}from"./index-C9NrBMJ6.js";import{G as te,O as ne,x as oe,t as ae,y as le,F as se}from"./antd-CeareF1k.js";import{d as H,f as p,W as C,_ as F,$ as n,Y as s,a6 as k,u as e,k as t,G as r,H as ie,D as ue,c as L,X as ce,F as re,a4 as U}from"./vue-BtcszhJV.js";import{F as de}from"./index-bARVdIfQ.js";import{u as me}from"./report-Cgm2suyL.js";import{b as q}from"./tools-DInPKiE1.js";import{S as pe}from"./customer-DYALn1iR.js";import"./context-GnZ2cGI_.js";import"./index.vuevuetypestyleindex0lang-l354ccN2.js";import"./index.vuevuetypescriptsetuptruelang-BxQ8nJie.js";import"./request-DWpYk0EE.js";const _e={class:"px-24px py-20px"},fe={class:"flex gap-4 bg-sms-bg-light-mode-gray p-4 rounded-1.5 justify-between"},ve={class:"flex flex-col gap-1"},ye=s("div",null,"公司帳號",-1),ge={class:"flex flex-col gap-1"},xe=s("div",null,"公司名稱",-1),ke={class:"flex flex-col gap-1"},we=s("div",null,"公司屬性",-1),be={class:"flex flex-col gap-1"},Se=s("div",null,"剩餘金額",-1),he={class:"flex flex-col gap-1"},Ae=s("div",null,"匯出耗用紀錄",-1),Ce=H({__name:"consumption-record",setup(z,{expose:y}){const _=p(!1),w=p([{key:"1",date:"2024/10/30 10:30:41",service:"SMS",quantity:300,unitPrice:1,amount:300},{key:"2",date:"2024/10/30 12:32:27",service:"MMS",quantity:1e3,unitPrice:3,amount:3e3},{key:"3",date:"2024/10/30 15:10:51",service:"AI 文章生成",quantity:2,unitPrice:5,amount:10},{key:"4",date:"2024/10/31 09:15:22",service:"SMS",quantity:500,unitPrice:1,amount:500},{key:"5",date:"2024/10/31 14:20:33",service:"AI 圖片生成",quantity:5,unitPrice:10,amount:50},{key:"6",date:"2024/11/01 11:05:18",service:"MMS",quantity:800,unitPrice:3,amount:2400},{key:"7",date:"2024/11/01 16:45:59",service:"AI 文章生成",quantity:3,unitPrice:5,amount:15},{key:"8",date:"2024/11/02 08:30:10",service:"SMS",quantity:1e3,unitPrice:1,amount:1e3},{key:"9",date:"2024/11/02 13:55:42",service:"AI 圖片生成",quantity:8,unitPrice:10,amount:80},{key:"10",date:"2024/11/03 10:20:33",service:"MMS",quantity:1200,unitPrice:3,amount:3600},{key:"11",date:"2024/11/03 17:30:25",service:"AI 文章生成",quantity:4,unitPrice:5,amount:20},{key:"12",date:"2024/11/04 09:45:11",service:"SMS",quantity:750,unitPrice:1,amount:750},{key:"13",date:"2024/11/04 15:10:37",service:"AI 圖片生成",quantity:6,unitPrice:10,amount:60},{key:"14",date:"2024/11/05 11:25:49",service:"MMS",quantity:950,unitPrice:3,amount:2850},{key:"15",date:"2024/11/05 18:00:03",service:"AI 文章生成",quantity:5,unitPrice:5,amount:25}]),g=p({current:1,pageSize:10,total:w.value.length,pages:2,countRange:""}),f=[{title:"日期時間",dataIndex:"date",key:"date",width:"170px"},{title:"使用服務",dataIndex:"service",key:"service",width:"170px"},{title:"數量",dataIndex:"quantity",key:"quantity",customRender:({text:o})=>`${o.toLocaleString()}`,width:"170px"},{title:"單價",dataIndex:"unitPrice",key:"unitPrice",customRender:({text:o})=>`$NT${o.toLocaleString(void 0,{minimumFractionDigits:2})}`,width:"170px",align:"right",customHeaderCell:()=>({class:"[&>*]:!justify-center"})},{title:"總金額",dataIndex:"amount",key:"amount",customRender:({text:o})=>`$NT${o.toLocaleString(void 0,{minimumFractionDigits:2})}`,width:"170px",align:"right",customHeaderCell:()=>({class:"[&>*]:!justify-center"})}],c=p({acoount:"VCS-J000100",name:"新光三越百货公司",type:"一般公司/單位",usageAmount:0});function b(o){_.value=!0,c.value={...c.value,acoount:o.companyAccount,name:o.companyName,usageAmount:o.usageAmount}}return y({show:b}),(o,S)=>{const v=B,$=T,I=Y,N=te;return C(),F(N,{open:e(_),"onUpdate:open":S[0]||(S[0]=h=>ie(_)?_.value=h:null),title:"耗用紀錄",centered:"",footer:null,width:"960px"},{default:n(()=>[s("div",_e,[s("div",fe,[s("div",ve,[ye,s("div",null,k(e(c).acoount),1)]),s("div",ge,[xe,s("div",null,k(e(c).name),1)]),s("div",ke,[we,s("div",null,k(e(c).type),1)]),s("div",be,[Se,s("div",null,"$NT"+k(e(c).usageAmount.toLocaleString(void 0,{minimumFractionDigits:2})),1)]),s("div",he,[Ae,s("div",null,[t($,{status:"small2"},{icon:n(()=>[t(v,{name:"download"})]),default:n(()=>[r(" 匯出CSV ")]),_:1})])])]),t(I,{columns:f,"data-source":e(w),pagination:e(g)},null,8,["data-source","pagination"])])]),_:1},8,["open"])}}}),$e={class:"flex gap-2"},Ie=s("span",null,null,-1),Ne={class:"flex justify-end gap-2 p-2"},Pe=s("span",null,null,-1),De={class:"flex justify-end gap-2 p-2"},Me={class:"flex justify-end px-2 items-center py-4 bg-sms-grayscale-0 rounded-t-12px"},We=H({__name:"index",setup(z){const{consumptionStatisticsPagination:y,consumptionStatisticsList:_,getConsumptionStatisticsList:w}=me(),g=p(null),f=p(!1),c=p(!1),b=p(),o=p({keyword:"",companyAccount:[],companyName:[],usageDate:void 0,service:[],sortField:"createTime",sortOrder:"ascend"}),S=[{title:"公司帳號",dataIndex:"companyAccount",key:"companyAccount",width:120},{title:"公司名稱",dataIndex:"companyName",key:"companyName",width:200},{title:"耗用日期",dataIndex:"usageDate",key:"usageDate",width:120},{title:"服務內容",dataIndex:"serviceContent",key:"serviceContent",width:200},{title:"耗用金額",dataIndex:"usageAmount",key:"usageAmount",width:120,align:"right",customHeaderCell:()=>({class:"[&>*]:!justify-center"})},{title:"明細",dataIndex:"action",key:"action",width:"50px"}];async function v(u=1,a=10){const d={current:u,pageSize:a,...e(o)};await w(d)}async function $(u,a,d){console.log("sorter:",d),o.value=Object.assign(o.value,{sortField:d.field,sortOrder:d.order}),await v(y.value.current,y.value.pageSize)}async function I(u,a){await v(u,a)}ue(()=>{v()});function N(){var u;v(1),(u=g.value)==null||u.hide()}const h=L(()=>_.value.map(u=>({label:u.companyAccount,value:u.companyAccount}))),R=L(()=>_.value.map(u=>({label:u.companyName,value:u.companyName}))),O=Object.entries(pe).map(([u,a])=>({label:a,value:u}));return(u,a)=>{const d=B,m=T,P=ne,D=Z,M=ee,V=oe,A=Q,x=ae,E=le,K=se,G=Y,J=X;return C(),F(J,{title:"耗用統計報表"},{extraContent:n(()=>[s("div",$e,[t(m,{status:"small2",onClick:a[0]||(a[0]=l=>f.value=!0)},{icon:n(()=>[t(d,{name:"download",width:"16px"})]),default:n(()=>[r(" 匯出日報表 ")]),_:1}),t(P,{"allow-clear":!1,autofocus:!1,open:e(f),class:"h-0px w-0px bg-transparent border-none p-0",separator:" "},{suffixIcon:n(()=>[Ie]),renderExtraFooter:n(()=>[s("div",Ne,[t(m,{status:"small2",onClick:a[1]||(a[1]=l=>f.value=!1)},{default:n(()=>[r(" 取消 ")]),_:1}),t(m,{status:"small1",onClick:a[2]||(a[2]=l=>f.value=!1)},{default:n(()=>[r(" 確定 ")]),_:1})])]),_:1},8,["open"]),t(m,{status:"small2",onClick:a[3]||(a[3]=l=>c.value=!0)},{icon:n(()=>[t(d,{name:"download",width:"16px"})]),default:n(()=>[r(" 匯出月報表 ")]),_:1}),t(P,{picker:"month","allow-clear":!1,autofocus:!1,open:e(c),class:"h-0px w-0px bg-transparent border-none p-0",separator:" "},{suffixIcon:n(()=>[Pe]),renderExtraFooter:n(()=>[s("div",De,[t(m,{status:"small2",onClick:a[4]||(a[4]=l=>c.value=!1)},{default:n(()=>[r(" 取消 ")]),_:1}),t(m,{status:"small1",onClick:a[5]||(a[5]=l=>c.value=!1)},{default:n(()=>[r(" 確定 ")]),_:1})])]),_:1},8,["open"]),t(m,{status:"small2"},{icon:n(()=>[t(d,{name:"download",width:"16px"})]),default:n(()=>[r(" 匯出耗用會計報表 ")]),_:1})])]),default:n(()=>[s("div",Me,[t(de,{ref_key:"filterKeywordInputRef",ref:g,modelValue:e(o).keyword,"onUpdate:modelValue":a[14]||(a[14]=l=>e(o).keyword=l),class:"w-440px h-40px",placeholder:"搜尋公司帳號、公司名稱",onClearFilter:a[15]||(a[15]=()=>{o.value={...e(o),keyword:"",companyAccount:[],companyName:[],usageDate:void 0,service:[]}})},{filterForm:n(()=>[t(K,{layout:"vertical",model:e(o),autocomplete:"off"},{default:n(()=>[t(E,{gutter:[16,12]},{default:n(()=>[t(x,{span:24},{default:n(()=>[t(A,{label:"公司帳號",valueed:e(q)(e(o).companyAccount)},{default:n(()=>[t(V,{value:e(o).companyAccount,"onUpdate:value":a[7]||(a[7]=l=>e(o).companyAccount=l),options:e(h),"max-tag-count":2,"show-arrow":!0,mode:"multiple",class:"w-full","option-filter-prop":"label","menu-item-selected-icon":" "},{dropdownRender:n(({menuNode:l})=>[t(D,{modelValue:e(o).companyAccount,"onUpdate:modelValue":a[6]||(a[6]=i=>e(o).companyAccount=i),menu:l,options:e(h)},null,8,["modelValue","menu","options"])]),option:n(({value:l,label:i})=>[t(M,{values:e(o).companyAccount,value:l,label:i},null,8,["values","value","label"])]),_:1},8,["value","options"])]),_:1},8,["valueed"])]),_:1}),t(x,{span:24},{default:n(()=>[t(A,{label:"公司名稱",valueed:e(q)(e(o).companyName)},{default:n(()=>[t(V,{value:e(o).companyName,"onUpdate:value":a[9]||(a[9]=l=>e(o).companyName=l),options:e(R),"max-tag-count":2,"show-arrow":!0,mode:"multiple",class:"w-full","option-filter-prop":"label","menu-item-selected-icon":" "},{dropdownRender:n(({menuNode:l})=>[t(D,{modelValue:e(o).companyName,"onUpdate:modelValue":a[8]||(a[8]=i=>e(o).companyName=i),menu:l,options:e(R)},null,8,["modelValue","menu","options"])]),option:n(({value:l,label:i})=>[t(M,{values:e(o).companyName,value:l,label:i},null,8,["values","value","label"])]),_:1},8,["value","options"])]),_:1},8,["valueed"])]),_:1}),t(x,{span:24},{default:n(()=>[t(A,{label:"耗用日期",valueed:e(o).usageDate},{default:n(()=>[t(P,{value:e(o).usageDate,"onUpdate:value":a[10]||(a[10]=l=>e(o).usageDate=l),class:"w-full",placement:"topLeft",format:"YYYY-MM-DD","value-format":"YYYY/MM/DD"},null,8,["value"])]),_:1},8,["valueed"])]),_:1}),t(x,{span:24},{default:n(()=>[t(A,{label:"服務內容",valueed:e(q)(e(o).service)},{default:n(()=>[t(V,{value:e(o).service,"onUpdate:value":a[12]||(a[12]=l=>e(o).service=l),options:e(O),"max-tag-count":2,"show-arrow":!0,mode:"multiple",class:"w-full","option-filter-prop":"label","menu-item-selected-icon":" "},{dropdownRender:n(({menuNode:l})=>[t(D,{modelValue:e(o).service,"onUpdate:modelValue":a[11]||(a[11]=i=>e(o).service=i),menu:l,options:e(O)},null,8,["modelValue","menu","options"])]),option:n(({value:l,label:i})=>[t(M,{values:e(o).service,value:l,label:i},null,8,["values","value","label"])]),_:1},8,["value","options"])]),_:1},8,["valueed"])]),_:1}),t(x,{span:24,class:"text-center"},{default:n(()=>[t(m,{status:"small2",class:"me-5",onClick:a[13]||(a[13]=l=>{var i;return(i=e(g))==null?void 0:i.hide()})},{default:n(()=>[r(" 取消 ")]),_:1}),t(m,{status:"small1",onClick:N},{default:n(()=>[r(" 確定 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])]),t(G,{"data-source":e(_),columns:S,scroll:{x:"max-content"},size:"small","show-sorter-tooltip":!1,pagination:{...e(y)},onChange:$,onChangePagination:I},{bodyCell:n(({column:l,text:i,record:W})=>[l.dataIndex==="usageAmount"?(C(),ce(re,{key:0},[r(" NT$"+k(i==null?void 0:i.toLocaleString(void 0,{minimumFractionDigits:2})),1)],64)):U("",!0),l.key==="action"?(C(),F(m,{key:1,status:"small3",onClick:Ve=>{var j;return(j=e(b))==null?void 0:j.show(W)}},{icon:n(()=>[t(d,{name:"preview-blue",width:"16px"})]),_:2},1032,["onClick"])):U("",!0)]),_:1},8,["data-source","pagination"]),t(Ce,{ref_key:"consuptionRecordRef",ref:b},null,512)]),_:1})}}});export{We as default};
