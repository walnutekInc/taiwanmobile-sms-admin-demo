import{G as N,_ as z,a as G}from"./GenderEnum-9570089c.js";import{_ as U}from"./index.vuevuetypescriptsetuptruelang-df83ccd5.js";import{_ as $}from"./index-acc9caf3.js";import{y as j,z as P,p as q,q as Q,F as W,Q as X}from"./antd-b38f92bc.js";import{d as Z,f as x,D as A,o as H,r as J,u as t,V as i,W as m,Z as T,k as n,_ as s,G as d,E as ee,a3 as p,X as b,F as _,a2 as u}from"./vue-7f4bbefd.js";const te={class:"flex justify-between px-2 items-center mb-2"},de=Z({__name:"sms-category",setup(ae){const g=x(!1);A(async()=>{w()}),H(()=>{g.value=!0});const R=[{title:"手機門號",dataIndex:"phone",key:"phone",sorter:!0,fixed:"left",width:"130px"},{title:"姓名",dataIndex:"name",key:"name",sorter:!0,fixed:"left",width:"80px"},{title:"群組標籤",dataIndex:"group",key:"group",fixed:"left",width:"250px"},{title:"性別",dataIndex:"gender",key:"gender",sorter:!0,width:"70px"},{title:"黑名單",dataIndex:"isBlackList",key:"isBlackList",sorter:!0,width:"100px"},{title:"聯絡電話",dataIndex:"contact",key:"contact",sorter:!0,width:"110px"},{title:"公司名稱",dataIndex:"company",key:"company",sorter:!0,ellipsis:!0,width:"121px"},{title:"Email",dataIndex:"email",key:"email",sorter:!0,ellipsis:!0,width:"184px"},{title:"生日",dataIndex:"birth",key:"birth",sorter:!0,width:"95px"},{title:"通訊地址",dataIndex:"address",key:"address",sorter:!0,ellipsis:!0,width:"108px"},{title:"備註",dataIndex:"note",key:"note",sorter:!0,width:"108px"},{title:"建立時間",dataIndex:"createTime",key:"createTime",defaultSortOrder:"descend",sorter:!0,width:"140px"},{title:"修改時間",dataIndex:"updateTime",key:"updateTime",sorter:!0,width:"140px"}],f=J({selectedRowKeys:[],selectedRows:[],loading:!1}),F=(a,o)=>{console.log("selectedRowKeys changed: ",a,o),f.selectedRowKeys=a,f.selectedRows=o},l=x({sortField:"createTime",sortOrder:"descend",phone:"",name:"",group:[],company:"",createTime:[void 0,void 0],updateTime:[void 0,void 0],keyword:""}),v=x(),w=async(a=1,o=10)=>{var r,c;({...t(l),group:(c=(r=l.value)==null?void 0:r.group)==null||c.map(h=>h.id)})},B=async(a,o,r)=>{console.log("pagination:",a,"sorter:",r),l.value=Object.assign({sortField:r.field,sortOrder:r.order}),await w(a.current,a.pageSize)},I=x(!1),D=()=>{I.value=!0},M=()=>{I.value=!1,w(1)},V=x(null),Y=()=>{var a;(a=V.value)==null||a.show(f.selectedRowKeys)};return(a,o)=>{const r=$,c=U,h=P,C=q,S=Q,K=W,L=z,E=G,O=X;return i(),m(_,null,[t(g)?(i(),T(ee,{key:0,to:"#extraContent"},[n(c,{status:"small1",onClick:()=>{}},{icon:s(()=>[n(r,{name:"plus",width:"16px"})]),default:s(()=>[d("新增類別訊息 ")]),_:1})])):p("",!0),b("div",te,[b("div",null,[n(c,{status:"small2",class:"me-2",onClick:Y,disabled:t(f).selectedRowKeys.length===0},{icon:s(()=>[n(r,{name:"delete",width:"16px"})]),default:s(()=>[d("刪除 ")]),_:1},8,["disabled"])]),n(L,{class:"w-440px h-40px",modelValue:t(l).keyword,"onUpdate:modelValue":o[2]||(o[2]=e=>t(l).keyword=e),onClick:D,placeholder:"搜尋訊息類別",onClearFilter:o[3]||(o[3]=()=>{var e;t(l).keyword="",(e=t(v))==null||e.resetFields()})},{filterForm:s(()=>[n(K,{ref_key:"formRef",ref:v,layout:"vertical",model:t(l),wrapperCol:{span:24},autocomplete:"off"},{default:s(()=>[n(C,{name:"createTime",label:"建立時間",class:"mb-2"},{default:s(()=>[n(h,{class:"w-full",placeholder:["建立時間","建立時間"],value:t(l).createTime,"onUpdate:value":o[0]||(o[0]=e=>t(l).createTime=e),placement:"topLeft",format:"YYYY-MM-DD"},null,8,["value"])]),_:1}),n(C,{name:"updateTime",label:"修改時間",class:"mb-2"},{default:s(()=>[n(h,{class:"w-full",placeholder:["修改時間","修改時間"],value:t(l).updateTime,"onUpdate:value":o[1]||(o[1]=e=>t(l).updateTime=e),placement:"topLeft",format:"YYYY-MM-DD"},null,8,["value"])]),_:1}),n(S,{class:"text-center"},{default:s(()=>[n(c,{status:"small2",class:"me-5"},{default:s(()=>[d("取消")]),_:1}),n(c,{status:"small1",onClick:M},{default:s(()=>[d("確定")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])]),n(O,{dataSource:a.contactPerson,columns:R,scroll:{x:1500},size:"small",showSorterTooltip:!1,"row-selection":{selectedRowKeys:t(f).selectedRowKeys,onChange:F},onChange:B,pagination:{...a.pagination,showTotal:e=>`${e} 筆`}},{bodyCell:s(({column:e,record:y,text:k})=>[e.dataIndex==="group"?(i(),T(E,{key:0,chips:y.group,"max-count":3},null,8,["chips"])):p("",!0),e.dataIndex==="phone"?(i(),m(_,{key:1},[d(u(y.countryCode)+u(y.phone),1)],64)):p("",!0),e.dataIndex==="contact"?(i(),m(_,{key:2},[d(u(y.areaCode)+u(y.contact),1)],64)):p("",!0),e.dataIndex==="gender"?(i(),m(_,{key:3},[d(u(t(N)[k]),1)],64)):p("",!0),e.dataIndex==="isBlackList"?(i(),m(_,{key:4},[d(u(k?"黑名單":""),1)],64)):p("",!0),e.dataIndex==="note"?(i(),m(_,{key:5},[d(u(t(j)(k)?"-":k),1)],64)):p("",!0)]),_:1},8,["dataSource","row-selection","pagination"])],64)}}});export{de as default};
