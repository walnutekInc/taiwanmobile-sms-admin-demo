import{_ as fe}from"./index.vuevuetypescriptsetuptruelang-DtktabFF.js";import{_ as ge}from"./index.vuevuetypestyleindex0lang-CcFzt3O-.js";import{_ as _e}from"./index-CywyWwOa.js";import{_ as be,a as ve}from"./index.vuevuetypescriptsetuptruelang-DlliyulR.js";import{_ as J}from"./index.vuevuetypescriptsetuptruelang-DAISk7I9.js";import{k as oe,_ as ye}from"./index-Bg0jDDn5.js";import{n as j,p as we,u as ue,I as re,s as ie,t as Q,v as he,x as H,V as xe,r as ce,y as X,F as Z,G as de,o as ne,O as ke,a0 as Me}from"./antd-CeareF1k.js";import{b as Ce}from"./index.esm-CLFC3Zjv.js";import{u as Re}from"./request-BtQEZJ0m.js";import{f as S,d as ee,r as D,W as Y,_ as z,$ as a,k as t,ab as k,u as e,Y as i,a6 as B,G as g,y as W,o as Ge,X as Te,F as Ne,a4 as le}from"./vue-BtcszhJV.js";import{F as Se}from"./index-CRvhwzXX.js";import{b as Ue,a as Ae}from"./tools-DInPKiE1.js";import"./context-DmYmhnYM.js";import"./index.vuevuetypestyleindex0lang-l354ccN2.js";import"./index.vuevuetypescriptsetuptruelang-BxQ8nJie.js";const F=[{key:"1",createTime:"2012/02/10 09:20",updateTime:"2016/07/26 19:32",subName:"KiKi",unit:"會計處",name:"王曉民",areaCode:"02",contact:"1234567",email:"eeu3@gmail.com",phone:"1",note:"備註說明文字備註說明文字備註說明文字備註說明文字備註說明文字備註說明文字備註說明文字備註說明文字",status:!1,balance:4128,transfer:"COVER",transferPrice:"",followupManagement:!0,paramterMessage:!0,chatMessage:!0,autoReply:!0,aiCopywritingGen:!0,aiMaterialGen:!0},{key:"2",createTime:"2012/02/10 09:20",updateTime:"2016/07/26 19:32",subName:"Wu",unit:"財務處",name:"王麗美",areaCode:"02",contact:"1234567",email:"eeu3@gmail.com",phone:"1",note:"備註說明文字備註說明文字備註說明文字備註說明文字備註說明文字備註說明文字備註說明文字備註說明文字",status:!0,balance:50,transfer:"COVER",transferPrice:"",followupManagement:!0,paramterMessage:!0,chatMessage:!0,autoReply:!0,aiCopywritingGen:!0,aiMaterialGen:!0},{key:"3",createTime:"2012/02/10 09:20",updateTime:"2016/07/26 19:32",subName:"Chen",unit:"業務處",name:"鄒美麗",areaCode:"02",contact:"1234567",email:"eeu3@gmail.com",phone:"1",note:"備註說明文字備註說明文字備註說明文字備註說明文字備註說明文字備註說明文字備註說明文字備註說明文字",status:!1,balance:500,transfer:"COVER",transferPrice:"",followupManagement:!0,paramterMessage:!0,chatMessage:!0,autoReply:!0,aiCopywritingGen:!0,aiMaterialGen:!0},{key:"4",createTime:"2012/02/10 09:20",updateTime:"2016/07/26 19:32",subName:"Water266",unit:"財務處",name:"林美滿",areaCode:"02",contact:"1234567",email:"eeu3@gmail.com",phone:"1",note:"備註說明文字備註說明文字備註說明文字備註說明文字備註說明文字備註說明文字備註說明文字備註說明文字",status:!0,balance:0,transfer:"COVER",transferPrice:"",followupManagement:!0,paramterMessage:!0,chatMessage:!0,autoReply:!0,aiCopywritingGen:!0,aiMaterialGen:!0},{key:"5",createTime:"2012/02/10 09:20",updateTime:"2016/07/26 19:32",subName:"Irene12334",unit:"財務處",name:"魏萱儒",areaCode:"02",contact:"1234567",email:"eeu3@gmail.com",phone:"1",note:"備註說明文字備註說明文字備註說明文字備註說明文字備註說明文字備註說明文字備註說明文字備註說明文字",status:!0,balance:3e3,transfer:"COVER",transferPrice:"",followupManagement:!0,paramterMessage:!0,chatMessage:!0,autoReply:!0,aiCopywritingGen:!0,aiMaterialGen:!0},{key:"6",createTime:"2012/02/10 09:20",updateTime:"2016/07/26 19:32",subName:"3Q2Q",unit:"會計處",name:"陳亭羽",areaCode:"02",contact:"1234567",email:"eeu3@gmail.com",phone:"1",note:"備註說明文字備註說明文字備註說明文字備註說明文字備註說明文字備註說明文字備註說明文字備註說明文字",status:!0,balance:5e3,transfer:"COVER",transferPrice:"",followupManagement:!0,paramterMessage:!0,chatMessage:!0,autoReply:!0,aiCopywritingGen:!0,aiMaterialGen:!0},{key:"7",createTime:"2012/02/10 09:20",updateTime:"2016/07/26 19:32",subName:"Linda",unit:"業務處",name:"繼光軒",areaCode:"02",contact:"1234567",email:"eeu3@gmail.com",phone:"1",note:"備註說明文字備註說明文字備註說明文字備註說明文字備註說明文字備註說明文字備註說明文字備註說明文字",status:!0,balance:800,transfer:"COVER",transferPrice:"",followupManagement:!0,paramterMessage:!0,chatMessage:!0,autoReply:!0,aiCopywritingGen:!0,aiMaterialGen:!0},{key:"8",createTime:"2012/02/10 09:20",updateTime:"2016/07/26 19:32",subName:"Jay",unit:"業務處",name:"黃如英",areaCode:"02",contact:"1234567",email:"eeu3@gmail.com",phone:"1",note:"備註說明文字備註說明文字備註說明文字備註說明文字備註說明文字備註說明文字備註說明文字備註說明文字",status:!0,balance:750,transfer:"COVER",transferPrice:"",followupManagement:!0,paramterMessage:!0,chatMessage:!0,autoReply:!0,aiCopywritingGen:!0,aiMaterialGen:!0},{key:"9",createTime:"2012/02/10 09:20",updateTime:"2016/07/26 19:32",subName:"Ray",unit:"財務處",name:"曾創盛",areaCode:"02",contact:"1234567",email:"eeu3@gmail.com",phone:"1",note:"備註說明文字備註說明文字備註說明文字備註說明文字備註說明文字備註說明文字備註說明文字備註說明文字",status:!0,balance:390,transfer:"COVER",transferPrice:"",followupManagement:!0,paramterMessage:!0,chatMessage:!0,autoReply:!0,aiCopywritingGen:!0,aiMaterialGen:!0},{key:"10",createTime:"2012/02/10 09:20",updateTime:"2016/07/26 19:32",subName:"Mike",unit:"會計處",name:"廖竹資",areaCode:"02",contact:"1234567",email:"eeu3@gmail.com",phone:"1",note:"備註說明文字備註說明文字備註說明文字備註說明文字備註說明文字備註說明文字備註說明文字備註說明文字",status:!0,balance:52900,transfer:"COVER",transferPrice:"",followupManagement:!0,paramterMessage:!0,chatMessage:!0,autoReply:!0,aiCopywritingGen:!0,aiMaterialGen:!0},{key:"11",createTime:"2012/02/10 09:20",updateTime:"2016/07/26 19:32",subName:"Jojo",unit:"會計處",name:"王麗美",areaCode:"02",contact:"1234567",email:"eeu3@gmail.com",phone:"1",note:"備註說明文字備註說明文字備註說明文字備註說明文字備註說明文字備註說明文字備註說明文字備註說明文字",status:!0,balance:3470,transfer:"COVER",transferPrice:"",followupManagement:!0,paramterMessage:!0,chatMessage:!0,autoReply:!0,aiCopywritingGen:!0,aiMaterialGen:!0}];function te(){const{list:x,pagination:M,setResponseList:G}=Re(),U=async l=>{const y=(l.current-1)*l.pageSize,N=Math.ceil(F.length/l.pageSize);G({total:F.length,pages:N,current:l.current,pageSize:l.pageSize,records:F.slice(y,l.current*l.pageSize)})},T=async l=>({data:{status:"success",id:"123"}}),w=async(l,y)=>({data:{status:"success",id:"123"}}),u=async l=>({data:{status:"success"}}),C=S(),s=async l=>{const y=F.find(N=>N.key===l);return C.value=y,{data:{...y}}},A=S([]);return{getSubAccounts:U,subAccountList:x,pagination:M,getSubAccount:s,subAccount:C,updateSubAccount:w,createSubAccount:T,deleteSubAccount:u,subAccountOption:A,getSubAccountOption:async()=>{A.value=F.map(l=>({value:l.key,label:l.subName,...l}))},batchUpdateSubAccount:async l=>({data:{status:"success",id:"123"}})}}var ae=(x=>(x.COVER="重設",x.INCREASE="增加",x.REDUCE="減少",x))(ae||{});const Oe=i("span",{class:"text-sms-grayscale-100"},"金額設定",-1),Ve={class:"bg-sms-bg-light-mode-gray rounded-md p-4 flex flex flex-col gap-y-4"},Ie={class:"text-base text-sms-grayscale-100 flex flex-col gap-y-1"},Pe=i("span",null,"目前餘額",-1),$e={class:"flex gap-x-2"},Ee={class:"w-1/3"},Fe={class:"w-full"},Ye={class:"flex justify-between items-center"},De=i("span",{class:"text-sms-grayscale-100"},"權限設定",-1),Ke={class:"bg-sms-bg-light-mode-gray rounded-md p-4 flex flex flex-col gap-y-4"},je=i("div",null,"一般功能",-1),ze={class:"grid grid-cols-3 gap-x-4 gap-y-2"},Le=i("div",null,"加值功能",-1),qe={class:"grid grid-cols-3 gap-x-4 gap-y-2"},Be=ee({name:"SubAccountForm",__name:"sub-account-form",props:{saveCallbck:{type:Function,required:!0}},setup(x,{expose:M}){const G=x,U=oe(),{createSubAccount:T,updateSubAccount:w}=te(),u=S(!0),C={subName:"",unit:"",name:"",areaCode:"02",contact:"",email:"",phone:void 0,note:"",balance:0,transfer:"COVER",transferPrice:"",followupManagement:!0,paramterMessage:!0,chatMessage:!0,autoReply:!0,aiCopywritingGen:!0,aiMaterialGen:!0},s=D(j(C)),A=D({subName:[{required:!0,message:"請輸入子帳號名稱",trigger:"blur"}],phone:[{required:!0,message:"請選擇發送門號",trigger:"blur"}],email:[{async validator(b,n){const c=Ce().email("格式錯誤");return we(n)||await c.validate(n),!0},trigger:"blur"}]}),{validateInfos:_,resetFields:R,validate:l}=ue(s,A),y=S(!1);async function N(b){console.log(b),b?(u.value=!1,R(b)):(u.value=!0,R(j(C))),y.value=!0}function v(){l().then(async()=>{var b,n;u.value?((b=(await T(s)).data)==null?void 0:b.status)==="success"&&U.success({message:"子帳號新增成功",placement:"top"}):s.key&&((n=(await w(s,s.key)).data)==null?void 0:n.status)==="success"&&U.success({message:"子帳號編輯成功",placement:"top"}),G.saveCallbck(),y.value=!1}).catch(b=>{console.debug(b)})}async function d(b){const c=b.target.value;await W(),s.contact=c.replace(/^\D/g,"")}async function O(b){const o=b.target.value.replace(/^\D/g,"").slice(0,6);await W(),s.transferPrice=Number.parseInt(o)}return M({show:N}),(b,n)=>{const c=re,o=ie,f=Q,V=he,$=H,E=xe,p=J,h=ce,P=X,K=Z,L=de;return Y(),z(L,{open:y.value,"onUpdate:open":n[18]||(n[18]=r=>y.value=r),"ok-text":"確定","cancel-text":"取消",centered:"",title:u.value?"新增子帳號":"編輯子帳號",width:"600px","destroy-on-close":!0,onOk:v},{default:a(()=>[t(K,{class:"px-32px",layout:"vertical",autocomplete:"off",onSubmit:v},{default:a(()=>[t(P,{gutter:[16,4]},{default:a(()=>[t(f,{span:12},{default:a(()=>[t(o,k({label:"子帳號名稱"},e(_).subName,{required:""}),{default:a(()=>[t(c,{value:e(s).subName,"onUpdate:value":n[0]||(n[0]=r=>e(s).subName=r),placeholder:"請輸入子帳號名稱",disabled:!u.value},null,8,["value","disabled"])]),_:1},16)]),_:1}),t(f,{span:12},{default:a(()=>[t(o,k({label:"子帳號名稱"},e(_).unit,{extra:"10 字以內"}),{default:a(()=>[t(c,{value:e(s).unit,"onUpdate:value":n[1]||(n[1]=r=>e(s).unit=r),placeholder:"請輸入子帳號使用單位",maxlength:10},null,8,["value"])]),_:1},16)]),_:1}),t(f,{span:12},{default:a(()=>[t(o,k({label:"姓名"},e(_).name,{extra:"10 字以內"}),{default:a(()=>[t(c,{value:e(s).name,"onUpdate:value":n[2]||(n[2]=r=>e(s).name=r),placeholder:"請輸入姓名",maxlength:10},null,8,["value"])]),_:1},16)]),_:1}),t(f,{span:12},{default:a(()=>[t(o,k({label:"聯絡電話"},e(_).contact,{extra:"請輸入數字，15 碼數字以內"}),{default:a(()=>[t(V,{compact:""},{default:a(()=>[t(c,{value:e(s).areaCode,"onUpdate:value":n[3]||(n[3]=r=>e(s).areaCode=r),style:{width:"30%"},placeholder:"請輸入區碼"},null,8,["value"]),t(c,{value:e(s).contact,"onUpdate:value":n[4]||(n[4]=r=>e(s).contact=r),style:{width:"70%"},placeholder:"請輸入聯絡電話",maxlength:15,onChange:d},null,8,["value"])]),_:1})]),_:1},16)]),_:1}),t(f,{span:24},{default:a(()=>[t(o,k({label:"Email"},e(_).email,{extra:"50 字以內"}),{default:a(()=>[t(c,{value:e(s).email,"onUpdate:value":n[5]||(n[5]=r=>e(s).email=r),placeholder:"請輸入Email",maxlength:50},null,8,["value"])]),_:1},16)]),_:1}),t(f,{span:24},{default:a(()=>[t(o,k(e(_).phone,{label:"發送門號",required:""}),{default:a(()=>[t($,{value:e(s).phone,"onUpdate:value":n[6]||(n[6]=r=>e(s).phone=r),options:[{label:"0935-111-111",value:"1"},{label:"0947-127-998",value:"2"},{label:"0958-892-006",value:"3"}],"allow-clear":"",placeholder:"請選擇發送門號"},null,8,["value"])]),_:1},16)]),_:1}),t(f,{span:24},{default:a(()=>[t(o,k({label:"備註"},e(_).note,{extra:"150 字以內"}),{default:a(()=>[t(E,{value:e(s).note,"onUpdate:value":n[7]||(n[7]=r=>e(s).note=r),placeholder:"請輸入備註",maxlength:150,rows:4},null,8,["value"])]),_:1},16)]),_:1}),t(f,{span:24},{default:a(()=>[Oe,i("div",Ve,[i("div",Ie,[Pe,i("span",null,"NT$"+B(e(s).balance.toFixed(2)),1)]),i("div",$e,[i("div",Ee,[t(o,k(e(_).transfer,{label:"金額異動"}),{default:a(()=>[t($,{value:e(s).transfer,"onUpdate:value":n[8]||(n[8]=r=>e(s).transfer=r),options:Object.entries(e(ae)).map(([r,q])=>({value:r,label:q}))},null,8,["value","options"])]),_:1},16)]),i("div",Fe,[t(o,k(e(_).transferPrice,{label:" ",extra:"6 位數以內"}),{default:a(()=>[t(c,{value:e(s).transferPrice,"onUpdate:value":n[9]||(n[9]=r=>e(s).transferPrice=r),placeholder:"請輸入金額",type:"number",onInput:O},null,8,["value"])]),_:1},16)])])])]),_:1}),t(f,{span:24,class:"mt-4"},{default:a(()=>[i("div",Ye,[De,i("div",null,[t(p,{status:"small3",class:"!px-1 !text-sms-primary-blue-80",onClick:n[10]||(n[10]=()=>{e(s).followupManagement=!0,e(s).paramterMessage=!0,e(s).chatMessage=!0,e(s).autoReply=!0,e(s).aiCopywritingGen=!0,e(s).aiMaterialGen=!0})},{default:a(()=>[g(" 全選 ")]),_:1}),t(p,{status:"small4",class:"!px-1",onClick:n[11]||(n[11]=()=>{e(s).followupManagement=!1,e(s).paramterMessage=!1,e(s).chatMessage=!1,e(s).autoReply=!1,e(s).aiCopywritingGen=!1,e(s).aiMaterialGen=!1})},{default:a(()=>[g(" 清除 ")]),_:1})])]),i("div",Ke,[i("div",null,[je,i("div",ze,[t(h,{checked:e(s).followupManagement,"onUpdate:checked":n[12]||(n[12]=r=>e(s).followupManagement=r),class:"!text-base"},{default:a(()=>[g(" 追蹤活動管理 ")]),_:1},8,["checked"]),t(h,{checked:e(s).paramterMessage,"onUpdate:checked":n[13]||(n[13]=r=>e(s).paramterMessage=r),class:"!text-base"},{default:a(()=>[g(" 參數訊息 ")]),_:1},8,["checked"]),t(h,{checked:e(s).chatMessage,"onUpdate:checked":n[14]||(n[14]=r=>e(s).chatMessage=r),class:"!text-base"},{default:a(()=>[g(" 雙向訊息 ")]),_:1},8,["checked"]),t(h,{checked:e(s).autoReply,"onUpdate:checked":n[15]||(n[15]=r=>e(s).autoReply=r),class:"!text-base"},{default:a(()=>[g(" 自動回覆 ")]),_:1},8,["checked"])])]),i("div",null,[Le,i("div",qe,[t(h,{checked:e(s).aiCopywritingGen,"onUpdate:checked":n[16]||(n[16]=r=>e(s).aiCopywritingGen=r),class:"!text-base"},{default:a(()=>[g(" AI 文案生成 ")]),_:1},8,["checked"]),t(h,{checked:e(s).aiMaterialGen,"onUpdate:checked":n[17]||(n[17]=r=>e(s).aiMaterialGen=r),class:"!text-base"},{default:a(()=>[g(" AI 素材生成 ")]),_:1},8,["checked"])])])])]),_:1}),t(p,{"html-type":"submit",class:"hidden"},{default:a(()=>[g(" 確定 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["open","title"])}}}),We=i("span",{class:"text-sms-grayscale-100"},"金額設定",-1),Je={class:"bg-sms-bg-light-mode-gray rounded-md p-4 flex flex flex-col gap-y-4"},Qe={class:"flex gap-x-2"},He={class:"w-1/3"},Xe={class:"w-full"},Ze={class:"flex justify-between items-center"},et=i("span",{class:"text-sms-grayscale-100"},"權限設定",-1),tt={class:"bg-sms-bg-light-mode-gray rounded-md p-4 flex flex flex-col gap-y-4"},at=i("div",null,"一般功能",-1),st={class:"grid grid-cols-3 gap-x-4 gap-y-2"},nt=i("div",null,"加值功能",-1),lt={class:"grid grid-cols-3 gap-x-4 gap-y-2"},ot=ee({name:"BatchSubAccountEdit",__name:"batch-account-edit",props:{saveCallbck:{type:Function,required:!0}},setup(x,{expose:M}){const G=x,U=oe(),{batchUpdateSubAccount:T}=te(),w={ids:[],transfer:"COVER",transferPrice:"",followupManagement:!0,paramterMessage:!0,chatMessage:!0,autoReply:!0,aiCopywritingGen:!0,aiMaterialGen:!0},u=D(j(w)),C=D({}),{validateInfos:s,resetFields:A,validate:_}=ue(u,C),R=S(!1);async function l(v){A({...j(w),ids:v}),R.value=!0}function y(){_().then(async()=>{var d;((d=(await T(u)).data)==null?void 0:d.status)==="success"&&(U.success({message:"子帳號編輯成功",placement:"top"}),G.saveCallbck(),R.value=!1)}).catch(v=>{console.debug(v)})}async function N(v){const b=v.target.value.replace(/^\D/g,"").slice(0,6);await W(),u.transferPrice=Number.parseInt(b)}return M({show:l}),(v,d)=>{const O=H,b=ie,n=re,c=Q,o=J,f=ce,V=X,$=Z,E=de;return Y(),z(E,{open:R.value,"onUpdate:open":d[10]||(d[10]=p=>R.value=p),"ok-text":"確定","cancel-text":"取消",centered:"",title:"編輯子帳號",width:"600px","destroy-on-close":!0,onOk:y},{default:a(()=>[t($,{class:"px-32px",layout:"vertical",autocomplete:"off",onSubmit:y},{default:a(()=>[t(V,{gutter:[16,4]},{default:a(()=>[t(c,{span:24},{default:a(()=>[We,i("div",Je,[i("div",Qe,[i("div",He,[t(b,k(e(s).transfer,{label:"金額異動"}),{default:a(()=>[t(O,{value:e(u).transfer,"onUpdate:value":d[0]||(d[0]=p=>e(u).transfer=p),options:Object.entries(e(ae)).map(([p,h])=>({value:p,label:h}))},null,8,["value","options"])]),_:1},16)]),i("div",Xe,[t(b,k(e(s).transferPrice,{label:" ",extra:"6 位數以內"}),{default:a(()=>[t(n,{value:e(u).transferPrice,"onUpdate:value":d[1]||(d[1]=p=>e(u).transferPrice=p),placeholder:"請輸入金額",type:"number",onInput:N},null,8,["value"])]),_:1},16)])])])]),_:1}),t(c,{span:24,class:"mt-4"},{default:a(()=>[i("div",Ze,[et,i("div",null,[t(o,{status:"small3",class:"!px-1 !text-sms-primary-blue-80",onClick:d[2]||(d[2]=()=>{e(u).followupManagement=!0,e(u).paramterMessage=!0,e(u).chatMessage=!0,e(u).autoReply=!0,e(u).aiCopywritingGen=!0,e(u).aiMaterialGen=!0})},{default:a(()=>[g(" 全選 ")]),_:1}),t(o,{status:"small4",class:"!px-1",onClick:d[3]||(d[3]=()=>{e(u).followupManagement=!1,e(u).paramterMessage=!1,e(u).chatMessage=!1,e(u).autoReply=!1,e(u).aiCopywritingGen=!1,e(u).aiMaterialGen=!1})},{default:a(()=>[g(" 清除 ")]),_:1})])]),i("div",tt,[i("div",null,[at,i("div",st,[t(f,{checked:e(u).followupManagement,"onUpdate:checked":d[4]||(d[4]=p=>e(u).followupManagement=p),class:"!text-base"},{default:a(()=>[g(" 追蹤活動管理 ")]),_:1},8,["checked"]),t(f,{checked:e(u).paramterMessage,"onUpdate:checked":d[5]||(d[5]=p=>e(u).paramterMessage=p),class:"!text-base"},{default:a(()=>[g(" 參數訊息 ")]),_:1},8,["checked"]),t(f,{checked:e(u).chatMessage,"onUpdate:checked":d[6]||(d[6]=p=>e(u).chatMessage=p),class:"!text-base"},{default:a(()=>[g(" 雙向訊息 ")]),_:1},8,["checked"]),t(f,{checked:e(u).autoReply,"onUpdate:checked":d[7]||(d[7]=p=>e(u).autoReply=p),class:"!text-base"},{default:a(()=>[g(" 自動回覆 ")]),_:1},8,["checked"])])]),i("div",null,[nt,i("div",lt,[t(f,{checked:e(u).aiCopywritingGen,"onUpdate:checked":d[8]||(d[8]=p=>e(u).aiCopywritingGen=p),class:"!text-base"},{default:a(()=>[g(" AI 文案生成 ")]),_:1},8,["checked"]),t(f,{checked:e(u).aiMaterialGen,"onUpdate:checked":d[9]||(d[9]=p=>e(u).aiMaterialGen=p),class:"!text-base"},{default:a(()=>[g(" AI 素材生成 ")]),_:1},8,["checked"])])])])]),_:1}),t(o,{"html-type":"submit",class:"hidden"},{default:a(()=>[g(" 確定 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])}}}),ut={class:"flex justify-between px-2 items-center py-4 bg-sms-grayscale-0 rounded-t-12px"},Mt=ee({__name:"index",setup(x){const M=S(null),G=S(null),{getSubAccounts:U,subAccountList:T,pagination:w,getSubAccountOption:u,subAccountOption:C}=te(),s=[{value:"ACTIVE",label:"開啟"},{value:"UNACTIVE",label:"關閉"}],A=[{title:"子帳號名稱",dataIndex:"subName",key:"subName",sorter:!0,width:"150px"},{title:"建立日期",dataIndex:"createTime",key:"createTime",sorter:!0,width:"150px"},{title:"修改日期",dataIndex:"updateTime",key:"updateTime",sorter:!0,width:"150px"},{title:"單位",dataIndex:"unit",key:"unite",sorter:!0,width:"222.5px"},{title:"姓名",dataIndex:"name",key:"name",sorter:!0,width:"120px"},{title:"剩餘金額",dataIndex:"balance",key:"balance",sorter:!0,width:"222.5px",align:"right",customHeaderCell:()=>({class:"[&>*]:!justify-end"})},{title:"狀態",dataIndex:"status",key:"status",width:"92px",sorter:!0}];Ge(()=>{v(1),u()});const _=D({selectedRowKeys:[],selectedRows:[],loading:!1});function R(c,o){console.log("selectedRowKeys changed: ",c,o),_.selectedRowKeys=c,_.selectedRows=o}const l=S({keyword:"",sortField:"createTime",sortOrder:"descend",subName:[],status:void 0,createTime:void 0,updateTime:void 0});async function y(c,o,f){console.log("sorter:",f),l.value=Object.assign(l.value,{sortField:f.field,sortOrder:f.order}),await v(w.value.current,w.value.pageSize)}async function N(c,o){await v(c,o)}async function v(c=1,o=10){const f={current:c,pageSize:o,...e(l)};await U(f)}async function d(c){T.value=T.value.map(o=>c.key===o.key?{...c,status:!c.status}:o)}const O=S(null);function b(){var c;v(1),(c=O.value)==null||c.hide()}function n(){_.selectedRows.length>1?G.value&&G.value.show(_.selectedRowKeys):M.value&&M.value.show(_.selectedRows[0])}return(c,o)=>{const f=ye,V=J,$=be,E=ve,p=H,h=_e,P=Q,K=ke,L=X,r=Z,q=Me,pe=ge,me=fe;return Y(),z(me,{title:"子帳號管理"},{extraContent:a(()=>[t(V,{status:"small1",onClick:o[0]||(o[0]=()=>{var m;return(m=e(M))==null?void 0:m.show()})},{icon:a(()=>[t(f,{name:"plus",width:"16px"})]),default:a(()=>[g(" 新增子帳號 ")]),_:1})]),default:a(()=>[i("div",ut,[t(V,{status:"small2",class:"me-2",disabled:e(_).selectedRowKeys.length===0,onClick:n},{icon:a(()=>[t(f,{name:"edit",width:"16px"})]),default:a(()=>[g(B(e(_).selectedRowKeys.length>1?"批次編輯":"編輯")+" ",1)]),_:1},8,["disabled"]),t(Se,{ref_key:"filterKeywordInputRef",ref:O,modelValue:e(l).keyword,"onUpdate:modelValue":o[7]||(o[7]=m=>e(l).keyword=m),class:"w-440px h-40px",placeholder:"搜尋子帳號名稱、姓名",onClearFilter:o[8]||(o[8]=()=>{l.value={...e(l),keyword:"",subName:[],status:void 0,createTime:void 0,updateTime:void 0}})},{filterForm:a(()=>[t(r,{layout:"vertical",model:e(l),autocomplete:"off"},{default:a(()=>[t(L,{gutter:[16,12]},{default:a(()=>[t(P,{span:24},{default:a(()=>[t(h,{id:"subName",label:"子帳號名稱",valueed:e(Ue)(e(l).subName)},{default:a(()=>[t(p,{value:e(l).subName,"onUpdate:value":o[2]||(o[2]=m=>e(l).subName=m),options:e(C),"max-tag-count":2,"show-arrow":!0,mode:"multiple",class:"w-full","option-filter-prop":"label","menu-item-selected-icon":" "},{dropdownRender:a(({menuNode:m})=>[t($,{modelValue:e(l).subName,"onUpdate:modelValue":o[1]||(o[1]=I=>e(l).subName=I),menu:m,options:e(C)},null,8,["modelValue","menu","options"])]),option:a(({value:m,label:I})=>[t(E,{values:e(l).subName,value:m,label:I},null,8,["values","value","label"])]),_:1},8,["value","options"])]),_:1},8,["valueed"])]),_:1}),t(P,{span:24},{default:a(()=>[t(h,{label:"帳號狀態",valueed:e(Ae)(e(l).status,s)},{default:a(()=>[t(p,{value:e(l).status,"onUpdate:value":o[3]||(o[3]=m=>e(l).status=m),options:s,"max-tag-count":2,"show-arrow":!0,"show-search":!1,class:"w-full"},null,8,["value"])]),_:1},8,["valueed"])]),_:1}),t(P,{span:24},{default:a(()=>[t(h,{label:"建立時間",valueed:e(l).createTime},{default:a(()=>[t(K,{value:e(l).createTime,"onUpdate:value":o[4]||(o[4]=m=>e(l).createTime=m),class:"w-full",placement:"topLeft",format:"YYYY-MM-DD","value-format":"YYYY/MM/DD","disabled-date":m=>m&&m>e(ne)().endOf("day")},null,8,["value","disabled-date"])]),_:1},8,["valueed"])]),_:1}),t(P,{span:24},{default:a(()=>[t(h,{label:"修改時間",valueed:e(l).updateTime},{default:a(()=>[t(K,{value:e(l).updateTime,"onUpdate:value":o[5]||(o[5]=m=>e(l).updateTime=m),class:"w-full",placement:"topLeft",format:"YYYY-MM-DD","value-format":"YYYY/MM/DD","disabled-date":m=>m&&m>e(ne)().endOf("day")},null,8,["value","disabled-date"])]),_:1},8,["valueed"])]),_:1}),t(P,{span:24,class:"text-center"},{default:a(()=>[t(V,{status:"small2",class:"me-5",onClick:o[6]||(o[6]=m=>{var I;return(I=e(O))==null?void 0:I.hide()})},{default:a(()=>[g(" 取消 ")]),_:1}),t(V,{status:"small1",onClick:b},{default:a(()=>[g(" 確定 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])]),t(pe,{"data-source":e(T),columns:A,size:"small","show-sorter-tooltip":!1,"row-selection":{selectedRowKeys:e(_).selectedRowKeys,onChange:R},pagination:{...e(w)},onChange:y,onChangePagination:N},{bodyCell:a(({column:m,record:I,text:se})=>[m.dataIndex==="balance"?(Y(),Te(Ne,{key:0},[g(" NT$ "+B(se.toLocaleString()),1)],64)):le("",!0),m.dataIndex==="status"?(Y(),z(q,{key:1,checked:se,onClick:rt=>d(I)},null,8,["checked","onClick"])):le("",!0)]),_:1},8,["data-source","row-selection","pagination"]),t(Be,{ref_key:"subAccountFormRef",ref:M,"save-callbck":()=>v(e(w).current,e(w).pageSize)},null,8,["save-callbck"]),t(ot,{ref_key:"batchAccountEditRef",ref:G,"save-callbck":()=>v(e(w).current,e(w).pageSize)},null,8,["save-callbck"])]),_:1})}}});export{Mt as default};
