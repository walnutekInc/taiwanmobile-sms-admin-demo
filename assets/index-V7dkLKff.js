import{_ as K}from"./index.vuevuetypescriptsetuptruelang-D79VmAcO.js";import{_ as G}from"./index.vuevuetypestyleindex0lang-BO6dExgl.js";import{_ as h}from"./index-X9R5oT3v.js";import{_ as X,a as W}from"./index.vuevuetypescriptsetuptruelang-C-Xp12f7.js";import{_ as q}from"./index-CdZ-22Wt.js";import{_ as H}from"./index.vuevuetypescriptsetuptruelang-CL8f4-88.js";import{w as J,I as Q,y as Z,z as ee,x as te,E as ae,F as ne,t as oe}from"./antd-DnZDPeHZ.js";import{F as le}from"./index-CY-31O8s.js";import{u as se}from"./report-vfaGtIhX.js";import{a as ue}from"./SendStatusEnum-0TbEL80Y.js";import{b as de,g as P}from"./tools-DInPKiE1.js";import{d as pe,f as I,D as re,W as m,_ as C,$ as n,k as t,G as f,Y as c,u as e,X as v,F as k,a3 as _,a4 as x}from"./vue-BTNAaAVH.js";import"./context-C21i4FRC.js";import"./index.vuevuetypestyleindex0lang-Cibwl0fk.js";import"./index.vuevuetypescriptsetuptruelang-Kz8z1UAe.js";import"./request-v0z9L-gc.js";const ie={class:"flex justify-end px-2 items-center py-4 bg-sms-grayscale-0 rounded-t-12px"},me={class:"me-1"},ce={href:"javascript:;"},_e=c("span",null,"MMS 呈現訊息主旨，SMS 為訊息內容",-1),fe={key:0},ve={href:"javascript:;",class:"text-black hover:text-black"},Re=pe({__name:"index",setup(ye){const{sendReportList:T,sendReportPagination:y,getSendReportList:j}=se(),w=I(null),a=I({keyword:"",companyAccount:"",companyName:"",sendPhone:"",acceptPhone:"",nmpAccount:"",sendNumber:"",subject:"",sendTime:void 0,messageNumber:"",sendStatus:[]}),S=[{value:"SENDING",label:"發送中"},{value:"SUCCESS",label:"發送成功"},{value:"FAIL",label:"發送失敗"},{value:"EXPIRED",label:"發送過期"}],A=[{title:"NMP 帳號",dataIndex:"nmpAccount",key:"nmpAccount",sorter:!0,width:"100px"},{title:"帳號屬性",dataIndex:"accountType",key:"accountType",sorter:!0,width:"100px"},{title:"發送時間",dataIndex:"sendTime",key:"sendTime",sorter:!0,width:"150px"},{title:"送達時間",dataIndex:"deliverTime",key:"deliverTime",sorter:!0,width:"150px"},{title:"發送編號",dataIndex:"sendNumber",key:"sendNumber",sorter:!0,width:"110px"},{title:"活動名稱",dataIndex:"name",key:"name",sorter:!0,width:"150px"},{title:"訊息主旨或內容",dataIndex:"subject",key:"subject",width:"250px"},{title:"發送門號",dataIndex:"sendPhone",key:"sendPhone",sorter:!0,width:"120px"},{title:"接收門號",dataIndex:"acceptPhone",key:"acceptPhone",sorter:!0,width:"120px"},{title:"訊息編號",dataIndex:"messageNumber",key:"messageNumber",sorter:!0,width:"100px"},{title:"發送狀態",dataIndex:"sendStatus",key:"sendStatus",sorter:!0,width:"100px"}];async function b(r=1,o=10){const i={current:r,pageSize:o,...e(a)};await j(i)}async function U(r,o,i){console.log("sorter:",i),a.value=Object.assign(a.value,{sortField:i.field,sortOrder:i.order}),await b(y.value.current,y.value.pageSize)}async function M(r,o){await b(r,o)}re(()=>{b()});function R(){}function V(r){return r>=J()}return(r,o)=>{const i=h,g=H,p=Q,d=q,u=Z,D=ee,F=X,Y=W,E=te,$=ae,B=ne,L=h,N=oe,O=G,z=K;return m(),C(z,{title:"發送紀錄查詢"},{extraContent:n(()=>[t(g,{type:"small1"},{icon:n(()=>[t(i,{name:"download",width:"16px"})]),default:n(()=>[f(" 匯出CSV ")]),_:1})]),default:n(()=>[c("div",ie,[t(le,{ref_key:"filterKeywordInputRef",ref:w,modelValue:e(a).keyword,"onUpdate:modelValue":o[12]||(o[12]=l=>e(a).keyword=l),class:"w-440px h-40px",placeholder:"搜尋活動名稱",onClearFilter:o[13]||(o[13]=()=>{a.value={...e(a),keyword:"",companyAccount:"",companyName:"",sendPhone:"",acceptPhone:"",nmpAccount:"",sendNumber:"",subject:"",sendTime:void 0,messageNumber:"",sendStatus:[]}})},{filterForm:n(()=>[t(B,{layout:"vertical",model:e(a),autocomplete:"off"},{default:n(()=>[t($,{gutter:[16,12]},{default:n(()=>[t(u,{span:24},{default:n(()=>[t(d,{label:"公司帳號",valueed:e(a).companyAccount},{default:n(()=>[t(p,{value:e(a).companyAccount,"onUpdate:value":o[0]||(o[0]=l=>e(a).companyAccount=l)},null,8,["value"])]),_:1},8,["valueed"])]),_:1}),t(u,{span:24},{default:n(()=>[t(d,{label:"公司名稱",valueed:e(a).companyName},{default:n(()=>[t(p,{value:e(a).companyName,"onUpdate:value":o[1]||(o[1]=l=>e(a).companyName=l)},null,8,["value"])]),_:1},8,["valueed"])]),_:1}),t(u,{span:24},{default:n(()=>[t(d,{label:"發送門號",valueed:e(a).sendPhone},{default:n(()=>[t(p,{value:e(a).sendPhone,"onUpdate:value":o[2]||(o[2]=l=>e(a).sendPhone=l)},null,8,["value"])]),_:1},8,["valueed"])]),_:1}),t(u,{span:24},{default:n(()=>[t(d,{label:"接收門號",valueed:e(a).acceptPhone},{default:n(()=>[t(p,{value:e(a).acceptPhone,"onUpdate:value":o[3]||(o[3]=l=>e(a).acceptPhone=l)},null,8,["value"])]),_:1},8,["valueed"])]),_:1}),t(u,{span:24},{default:n(()=>[t(d,{label:"NMP 帳號",valueed:e(a).nmpAccount},{default:n(()=>[t(p,{value:e(a).nmpAccount,"onUpdate:value":o[4]||(o[4]=l=>e(a).nmpAccount=l)},null,8,["value"])]),_:1},8,["valueed"])]),_:1}),t(u,{span:24},{default:n(()=>[t(d,{label:"發送編號",valueed:e(a).sendNumber},{default:n(()=>[t(p,{value:e(a).sendNumber,"onUpdate:value":o[5]||(o[5]=l=>e(a).sendNumber=l)},null,8,["value"])]),_:1},8,["valueed"])]),_:1}),t(u,{span:24},{default:n(()=>[t(d,{label:"訊息主旨或內容",valueed:e(a).subject},{default:n(()=>[t(p,{value:e(a).subject,"onUpdate:value":o[6]||(o[6]=l=>e(a).subject=l)},null,8,["value"])]),_:1},8,["valueed"])]),_:1}),t(u,{span:24},{default:n(()=>[t(d,{label:"發送時間",valueed:e(a).sendTime},{default:n(()=>[t(D,{value:e(a).sendTime,"onUpdate:value":o[7]||(o[7]=l=>e(a).sendTime=l),class:"w-full",placement:"topLeft",format:"YYYY-MM-DD","value-format":"YYYY/MM/DD","disabled-date":V},null,8,["value"])]),_:1},8,["valueed"])]),_:1}),t(u,{span:24},{default:n(()=>[t(d,{label:"訊息編號",valueed:e(a).messageNumber},{default:n(()=>[t(p,{value:e(a).messageNumber,"onUpdate:value":o[8]||(o[8]=l=>e(a).messageNumber=l)},null,8,["value"])]),_:1},8,["valueed"])]),_:1}),t(u,{span:24},{default:n(()=>[t(d,{id:"sendStatus",label:"發送狀態",valueed:e(de)(e(a).sendStatus)},{default:n(()=>[t(E,{value:e(a).sendStatus,"onUpdate:value":o[10]||(o[10]=l=>e(a).sendStatus=l),options:S,"max-tag-count":2,"show-arrow":!0,mode:"multiple",class:"w-full","option-filter-prop":"label","menu-item-selected-icon":" "},{dropdownRender:n(({menuNode:l})=>[t(F,{modelValue:e(a).sendStatus,"onUpdate:modelValue":o[9]||(o[9]=s=>e(a).sendStatus=s),menu:l,options:S},null,8,["modelValue","menu"])]),option:n(({value:l,label:s})=>[t(Y,{values:e(a).sendStatus,value:l,label:s},null,8,["values","value","label"])]),_:1},8,["value"])]),_:1},8,["valueed"])]),_:1}),t(u,{span:24,class:"text-center"},{default:n(()=>[t(g,{status:"small2",class:"me-5",onClick:o[11]||(o[11]=l=>{var s;return(s=e(w))==null?void 0:s.hide()})},{default:n(()=>[f(" 取消 ")]),_:1}),t(g,{status:"small1",onClick:R},{default:n(()=>[f(" 確定 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])]),t(O,{"data-source":e(T),columns:A,scroll:{x:"max-content"},size:"small","show-sorter-tooltip":!1,pagination:{...e(y)},onChange:U,onChangePagination:M},{headerCell:n(({column:l})=>[l.key==="subject"?(m(),v(k,{key:0},[c("span",me,_(l.title),1),t(N,{placement:"top","get-popup-container":e(P)},{title:n(()=>[_e]),default:n(()=>[c("a",ce,[t(L,{name:"union",width:"16px",class:"text-sms-grayscale-60"})])]),_:1},8,["get-popup-container"])],64)):x("",!0)]),bodyCell:n(({column:l,text:s})=>[l.key==="sendStatus"?(m(),v(k,{key:0},[f(_(e(ue)[s]),1)],64)):x("",!0),l.key==="subject"?(m(),v(k,{key:1},[s.length<=70?(m(),v("span",fe,_(s),1)):(m(),C(N,{key:1,placement:"top","get-popup-container":e(P)},{title:n(()=>[c("span",null,_(s),1)]),default:n(()=>[c("a",ve,_(s==null?void 0:s.slice(0,70))+"...",1)]),_:2},1032,["get-popup-container"]))],64)):x("",!0)]),_:1},8,["data-source","pagination"])]),_:1})}}});export{Re as default};
