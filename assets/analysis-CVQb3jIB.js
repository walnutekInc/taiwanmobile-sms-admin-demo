import{_ as F,b as fe}from"./index-Bb-HzrIL.js";import{_ as ye}from"./index.vuevuetypescriptsetuptruelang-BdlENQ8t.js";import{_ as xe}from"./index.vuevuetypestyleindex0lang-braRYrGJ.js";import{_ as ge}from"./index.vuevuetypescriptsetuptruelang-DAISk7I9.js";import{d as O,f as _,W as r,_ as R,$ as n,Y as e,k as s,u as t,H as $,y as ve,aj as Ce,D as he,a0 as be,X as x,G as d,a9 as U,F as w,a7 as ke,a6 as c,a4 as p,m as Ie,A as Te,ac as Se,ad as Ae}from"./vue-BtcszhJV.js";import{p as Ee,I as we,s as Y,F as G,G as J,r as De,b as Ne,M as Le,D as Re,H as Pe,J as Me,S as je,K as Ue,N as $e,z as Ve}from"./antd-CeareF1k.js";import{S as Be}from"./SendStatusEnum-0TbEL80Y.js";import{g as He}from"./tools-DInPKiE1.js";import"./context-CFbOfPTF.js";const Fe={class:"px-30px py-20px w-376px text-base mx-auto"},Oe=O({name:"TopUpModal",__name:"top-up-modal",setup(v,{expose:S}){const f=_(!1),i=_("");async function y(b){const C=b.target.value.replace(/^\D/g,"").slice(0,6);await ve(),i.value=C}function A(){i.value="",f.value=!0}return S({show:A}),(b,o)=>{const k=we,C=Y,E=G,D=J;return r(),R(D,{open:t(f),"onUpdate:open":o[1]||(o[1]=I=>$(f)?f.value=I:null),title:"儲值金額",centered:"","cancel-text":"取消","ok-text":"確定",width:"440px","ok-button-props":{disabled:t(Ee)(t(i))||parseInt(t(i))<1e3},onOk:o[2]||(o[2]=I=>f.value=!1)},{default:n(()=>[e("div",Fe,[s(E,{layout:"vertical",autocomplete:"off"},{default:n(()=>[s(C,{"html-for":"",extra:"單次最低儲值 NT$1,000"},{default:n(()=>[s(k,{value:t(i),"onUpdate:value":o[0]||(o[0]=I=>$(i)?i.value=I:null),"addon-before":"NT$",type:"number",placeholder:"請輸入金額",onInput:y},null,8,["value"])]),_:1})]),_:1})])]),_:1},8,["open","ok-button-props"])}}});function Ye(){const v=_([{key:"1",content:"1.公告系統優化功能版本 5.6 版本，更新刷卡流程",createTime:"2024/07/12"},{key:"2",content:`1.公告系統優化功能版本 5.5 版本，更新聯絡人資訊
2.週六系統更新，請勿登入使用`,createTime:"2024/07/12"},{key:"3",content:`1.公告系統優化功能版本 5.5 版本，更新聯絡人資訊
2.週六系統更新，請勿登入使用`,createTime:"2024/07/12"}]),S=async()=>{},f=_({remainingDepositAmount:5e3,yearsDepoitAmount:8e3}),i=async()=>{},y=_({totalDepositAmountYear:4e4,list:[{key:"1",sendNumber:"AJ593749G2",name:"秋季週年慶",sendTime:"2024/11/20",depositAmount:3210},{key:"2",sendNumber:"AJ593749H1",name:"聖誕特賣",sendTime:"2024/12/24",depositAmount:18e3},{key:"3",sendNumber:"AJ593749K0",name:"新年快樂！",sendTime:"2025/02/01",depositAmount:20490},{key:"4",sendNumber:"AJ593749K1",name:"新年快樂！",sendTime:"2025/02/01",depositAmount:20490}]}),A=async()=>{},b=_([{phone:"0995827791",replyContent:"還可以參加活動嗎？",sendTime:"2024/07/10"},{phone:"0983771527",replyContent:"是",sendTime:"2024/07/08"},{phone:"0974823793",replyContent:"已回覆訊息，請問何時抽獎呢？",sendTime:"2024/07/05"}]),o=async()=>{},k=_({successCount:2871,sendingCount:75,failCount:122,totalCount:3068,successPercent:93.6,sendingPercent:3}),C=async()=>{},E=_([{key:"1",sendNumber:"AJ593749G2",name:"夏季特賣會",status:"EXECUTING",sendTime:"2024/07/21 12:30",totalCount:2e3,sendingCount:100,successCount:1900,failCount:0,successPercent:95,messageId:"1"},{key:"2",sendNumber:"AJ521668R8",name:"抽獎結果出爐啦！",status:"EXECUTING",sendTime:"2024/07/21 12:30",totalCount:3591,sendingCount:1042,successCount:1900,failCount:649,successPercent:51.5,messageId:"1"},{key:"3",sendNumber:"AJ493992O5",name:"暑假兩個月行程怎麼排？",status:"EXECUTING",sendTime:"2024/07/21 12:30",totalCount:1427,sendingCount:126,successCount:1209,failCount:92,successPercent:84.7,messageId:"1"},{key:"4",sendNumber:"AJ910093Q4",name:"歡慶畢業季",status:"IS_SENT",sendTime:"2024/07/21 12:30",totalCount:901,sendingCount:0,successCount:877,failCount:24,successPercent:97.3,messageId:"1"},{key:"5",sendNumber:"AJ900338T8",name:"六月新娘看這裡",status:"IS_SENT",sendTime:"2024/07/21 12:30",totalCount:452,sendingCount:0,successCount:442,failCount:10,successPercent:97.8,messageId:"1"},{key:"6",sendNumber:"AJ858377H9",name:"端午節慶佳節",status:"RESERVATION_FAILED",sendTime:"2024/07/21 12:30",totalCount:1990,sendingCount:0,successCount:0,failCount:0,successPercent:0,messageId:"1"},{key:"7",sendNumber:"AJ858377H9",name:"端午節慶佳節",status:"RESERVATION_FAILED",sendTime:"2024/07/21 12:30",totalCount:1990,sendingCount:0,successCount:0,failCount:0,successPercent:0,messageId:"1"}]);return{getSysAnnouncement:S,sysAnnouncement:v,getProfitability:i,profitability:f,getDepositActivities:A,depositActivities:y,getUnReadChatMessage:o,unReadChatMessage:b,getDeliveryStatisitcs:C,deliveryStatisitcs:k,getDeliveryResultDetails:async()=>{},deliveryResultDetails:E}}const m=v=>(Se("data-v-0f76a62b"),v=v(),Ae(),v),Ge={class:"flex gap-x-4 items-center"},Je={id:"layout",class:"relative"},Xe={class:"w-[248px]"},Ke={class:"ms-2"},ze={class:"grid grid-cols-3 gap-4 mb-2xl"},Qe={class:"flex flex-col col-span-2 gap-2"},We=m(()=>e("div",{class:"text-base font-500 flex justify-between items-center"}," 系統公告 ",-1)),qe={class:"min-h-178px"},Ze=["innerHTML"],et={class:"flex flex-col gap-2"},tt={class:"text-base font-500 flex justify-between items-center"},st=m(()=>e("span",null,"儲值狀況",-1)),nt={class:"bg-sms-grayscale-0 rounded-3 p-4 min-h-178px"},at={class:"flex flex-col justify-between h-full"},ot={class:"flex justify-between mb-4"},lt=m(()=>e("span",{class:"text-sm text-sms-grayscale-60"},"預估剩餘金額",-1)),it={class:"text-sm text-sms-grayscale-100"},ct={class:"flex justify-between"},ut=m(()=>e("span",{class:"text-sm text-sms-grayscale-60"},"近一年預約活動預估發送金額",-1)),dt={class:"flex justify-end gap-2 items-center"},rt={class:"text-sm text-sms-status-alert-red"},mt={class:"grid grid-cols-2 gap-x-4 gap-y-2xl mb-2xl"},pt={class:"flex flex-col gap-2"},_t={class:"text-base font-500 flex justify-between items-center"},ft=m(()=>e("div",null,[d("預約活動 "),e("span",{class:"text-sm text-sms-grayscale-60 font-400 ms-2"},"未來一年內活動")],-1)),yt={class:"bg-sms-primary-blue-30 text-sms-primary-blue-80 text-sm rounded-2 font-400 py-5px px-6"},xt={class:"w-full min-h-211px"},gt={key:0,class:"flex flex-col gap-2"},vt=m(()=>e("div",{class:"text-base font-500"},[d(" 雙向訊息"),e("span",{class:"text-sm text-sms-grayscale-60 font-400 ms-2"},"顯示最新未讀訊息")],-1)),Ct={class:"w-full min-h-211px"},ht={key:1,class:"flex flex-col gap-2"},bt=m(()=>e("div",{class:"text-base font-500"}," 30天內發送結果統計 ",-1)),kt={class:"w-full min-h-211px bg-sms-grayscale-0 rounded-3 p-6 flex items-center gap-10"},It={class:"flex flex-col justify-center items-center"},Tt=m(()=>e("span",{class:"text-sm text-sms-grayscale-60 font-400"},"發送總數",-1)),St={class:"text-base text-sms-grayscale-100 font-500"},At={class:"flex justify-between"},Et={class:"flex justify-between"},wt={class:"flex justify-between"},Dt={class:"flex justify-between"},Nt=m(()=>e("span",{class:"text-sms-grayscale-60"},"成功率",-1)),Lt={key:0,class:"grid grid-cols-1"},Rt={class:"flex flex-col gap-2"},Pt=m(()=>e("div",{class:"text-base font-500"}," 30天內發送結果明細 ",-1)),Mt={class:"w-full min-h-211px"},jt={class:"px-30px py-20px w-328px text-base mx-auto"},Ut=m(()=>e("span",{class:"me-2"},"訊息類型",-1)),$t={href:"javascript:;"},Vt=m(()=>e("br",null,null,-1)),Bt=O({__name:"analysis",setup(v){const S={RESERVATION:"text-sms-yellow-60 bg-#F7F2E8",EXECUTING:"text-sms-primary-blue-80 bg-sms-primary-blue-30",IS_SENT:"text-sms-green-80 bg-sms-green-30",RESERVATION_FAILED:"text-sms-status-alert-red bg-sms-light-red-40"},f=_(null),i=_({open:!1,isParameter:!1}),y=_(!1);function A(){return document.getElementById("layout")}const b=[{value:"SYS_ANNOUNCEMENT",label:"系統公告",disabled:!0},{value:"PROFITABILITY",label:"儲值狀況",disabled:!0},{value:"DEPOSIT_ACTIVITIES",label:"預約活動",disabled:!0},{value:"CHAT_MESSAGE",label:"雙向訊息",disabled:!1},{value:"30_DELIVERY_STATISITCS",label:"30天內發送結果統計",disabled:!1},{value:"30_DELIVERY_RESULT_DETAILS",label:"30天內發送結果明細",disabled:!1}],o=Ce("showLayoutList",["SYS_ANNOUNCEMENT","PROFITABILITY","DEPOSIT_ACTIVITIES","CHAT_MESSAGE","30_DELIVERY_STATISITCS","30_DELIVERY_RESULT_DETAILS"]);function k(h){h.disabled||(o.value.includes(h.value)?o.value=o.value.filter(l=>h.value!==l):o.value.push(h.value))}const C=[{title:"公告內容",dataIndex:"content",key:"content"},{title:"公告時間",width:"155px",dataIndex:"createTime",key:"createTime"}],E=[{title:"發送編號",dataIndex:"sendNumber",key:"sendNumber",width:"108px"},{title:"活動名稱",width:"172px",dataIndex:"name",key:"name"},{title:"發送時間",width:"100px",dataIndex:"sendTime",key:"sendTime"},{title:"預估金額",width:"106px",dataIndex:"depositAmount",key:"depositAmount"}],D=[{title:"回傳門號",dataIndex:"phone",key:"phone",width:"108px"},{title:"回傳訊息內容",width:"270px",dataIndex:"replyContent",key:"replyContent"},{title:"發送時間",width:"100px",dataIndex:"sendTime",key:"sendTime"}],I=[{title:"發送編號",dataIndex:"sendNumber",key:"sendNumber",width:"120px"},{title:"活動名稱",width:"200px",dataIndex:"name",key:"name"},{title:"活動狀態",width:"95px",dataIndex:"status",key:"status"},{title:"發送時間",width:"134px",dataIndex:"sendTime",key:"sendTime"},{title:"發送總數",width:"85px",dataIndex:"totalCount",key:"totalCount",align:"right",customHeaderCell:()=>({class:"[&>*]:!justify-end"})},{title:"發送中",width:"85px",dataIndex:"sendingCount",key:"sendingCount",align:"right",customHeaderCell:()=>({class:"[&>*]:!justify-end"})},{title:"發送成功",width:"85px",dataIndex:"successCount",key:"successCount",align:"right",customHeaderCell:()=>({class:"[&>*]:!justify-end"})},{title:"發送失敗",width:"85px",dataIndex:"failCount",key:"failCount",align:"right",customHeaderCell:()=>({class:"[&>*]:!justify-end"})},{title:"成功率",width:"85px",dataIndex:"successPercent",key:"successPercent",align:"right",customHeaderCell:()=>({class:"[&>*]:!justify-end"})}],{getDeliveryStatisitcs:X,deliveryStatisitcs:g,getDepositActivities:K,depositActivities:V,getProfitability:z,profitability:T,getSysAnnouncement:Q,sysAnnouncement:W,getUnReadChatMessage:q,unReadChatMessage:Z,getDeliveryResultDetails:ee,deliveryResultDetails:te}=Ye();return he(()=>{X(),K(),z(),Q(),q(),ee()}),(h,l)=>{const P=F,N=ge,se=De,ne=Ne,ae=Le,oe=Re,L=xe,M=be("router-link"),le=Pe,j=Me,ie=je,ce=ye,ue=F,de=Ue,B=$e,re=Ve,me=Y,pe=G,_e=J;return r(),x(w,null,[s(ce,{title:"總覽"},{extraContent:n(()=>[e("div",Ge,[s(N,{onClick:l[0]||(l[0]=()=>{i.value={open:!0,isParameter:!1}})},{icon:n(()=>[s(P,{name:"plus"}),d(" 新增訊息行銷活動 ")]),_:1}),e("div",Je,[e("div",{class:U(["layout-dropdown-mask",{block:t(y),hidden:!t(y)}]),onClick:l[1]||(l[1]=a=>y.value=!1)},null,2),s(oe,{open:t(y),"onUpdate:open":l[2]||(l[2]=a=>$(y)?y.value=a:null),trigger:"click",placement:"bottomLeft","get-popup-container":A},{overlay:n(()=>[e("div",Xe,[s(ae,null,{default:n(()=>[(r(),x(w,null,ke(b,a=>s(ne,{key:a.value,onClick:u=>k(a)},{default:n(()=>[s(se,{checked:t(o).includes(a.value),disabled:a.disabled,value:a.value},null,8,["checked","disabled","value"]),e("span",Ke,c(a.label),1)]),_:2},1032,["onClick"])),64))]),_:1})])]),default:n(()=>[s(N,{status:"small4",class:"!px-0"},{icon:n(()=>[s(P,{name:"layout"})]),_:1})]),_:1},8,["open"])])])]),default:n(()=>[e("div",ze,[e("div",Qe,[We,e("div",qe,[s(L,{class:"!mt-0",columns:C,"data-source":t(W),scroll:{y:"135px"}},{bodyCell:n(({record:a,column:u})=>[u.key==="content"?(r(),x("div",{key:0,class:"whitespace-pre-wrap",innerHTML:a.content},null,8,Ze)):p("",!0)]),_:1},8,["data-source"])])]),e("div",et,[e("div",tt,[st,s(N,{status:"small4",class:"!p-0 !text-sms-primary-blue-80 !min-h-auto !h-auto",onClick:l[3]||(l[3]=()=>h.$router.push({name:"Accounting"}))},{default:n(()=>[d(" 儲值管理 "),s(P,{class:"!text-sms-primary-blue-80",name:"arrow-right"})]),_:1})]),e("div",nt,[e("div",at,[e("div",null,[e("div",ot,[lt,e("span",it,"NT$ "+c(t(T).remainingDepositAmount.toLocaleString()),1)]),e("div",ct,[ut,e("span",{class:U(["text-sm text-sms-grayscale-100",{"text-sms-status-alert-red":Math.sign(t(T).remainingDepositAmount-t(T).yearsDepoitAmount)!==1}])},"NT$ "+c(t(T).yearsDepoitAmount.toLocaleString()),3)])]),e("div",dt,[Ie(e("span",rt,"餘額不足，需儲值",512),[[Te,Math.sign(t(T).remainingDepositAmount-t(T).yearsDepoitAmount)!==1]]),s(N,{onClick:l[4]||(l[4]=a=>{var u;return(u=t(f))==null?void 0:u.show()})},{default:n(()=>[d(" 儲值 ")]),_:1})])])])])]),e("div",mt,[e("div",pt,[e("div",_t,[ft,e("div",yt," 一年內預估總金額：$"+c(t(V).totalDepositAmountYear.toLocaleString()),1)]),e("div",xt,[s(L,{class:"!mt-0",columns:E,"data-source":t(V).list,scroll:{y:"150px"}},{bodyCell:n(({record:a,column:u})=>[u.key==="depositAmount"?(r(),x(w,{key:0},[d(" NT$"+c(a.depositAmount.toLocaleString()),1)],64)):p("",!0),u.key==="name"?(r(),R(M,{key:1,to:{name:"Appointment"},target:"_blank",class:"underline underline-offset-2 text-sms-primary-blue-80"},{default:n(()=>[d(c(a.name),1)]),_:2},1024)):p("",!0)]),_:1},8,["data-source"])])]),t(o).includes("CHAT_MESSAGE")?(r(),x("div",gt,[vt,e("div",Ct,[s(L,{class:"!mt-0",columns:D,"data-source":t(Z),scroll:{y:"150px"}},{bodyCell:n(({record:a,column:u})=>[u.key==="replyContent"?(r(),R(M,{key:0,to:{name:"ChatMessage"},target:"_blank",class:"underline underline-offset-2 text-sms-primary-blue-80"},{default:n(()=>[d(c(a.replyContent),1)]),_:2},1024)):p("",!0)]),_:1},8,["data-source"])])])):p("",!0),t(o).includes("30_DELIVERY_STATISITCS")?(r(),x("div",ht,[bt,e("div",kt,[s(le,{percent:t(g).successPercent+t(g).sendingPercent,success:{percent:t(g).successPercent,strokeColor:"#285BDE"},"stroke-color":"#BAD2F4",type:"circle"},{format:n(()=>[e("div",It,[Tt,e("span",St,c(t(g).totalCount.toLocaleString()),1)])]),_:1},8,["percent","success"]),s(ie,{direction:"vertical",class:"w-159px"},{default:n(()=>[e("div",At,[s(j,{color:"#285BDE",text:"發送成功"}),e("span",null,c(t(g).successCount.toLocaleString()),1)]),e("div",Et,[s(j,{color:"#BAD2F4",text:"發送中"}),e("span",null,c(t(g).sendingCount.toLocaleString()),1)]),e("div",wt,[s(j,{color:"#A7ADB7",text:"發送失敗",class:"text-sms-grayscale-60"}),e("span",null,c(t(g).failCount.toLocaleString()),1)]),e("div",Dt,[Nt,e("span",null,c(t(g).successPercent)+"%",1)])]),_:1})])])):p("",!0)]),t(o).includes("30_DELIVERY_RESULT_DETAILS")?(r(),x("div",Lt,[e("div",Rt,[Pt,e("div",Mt,[s(L,{class:"!mt-0",columns:I,"data-source":t(te),scroll:{y:"330px"}},{bodyCell:n(({record:a,column:u,text:H})=>[u.key==="name"?(r(),R(M,{key:0,to:{name:"MessageSending"},target:"_blank",class:"underline underline-offset-2 text-sms-primary-blue-80"},{default:n(()=>[d(c(a.name),1)]),_:2},1024)):p("",!0),u.key==="status"?(r(),x("span",{key:1,class:U(["rounded-2 text-center py-1 px-2 text-xs font-500",{[S[a.status]]:!0}])},c(t(Be)[a.status]),3)):p("",!0),["totalCount","sendingCount","successCount","failCount"].includes(u.key)?(r(),x(w,{key:2},[d(c(H.toLocaleString()),1)],64)):p("",!0),["successPercent"].includes(u.key)?(r(),x(w,{key:3},[d(c(H)+"% ",1)],64)):p("",!0)]),_:1},8,["data-source"])])])])):p("",!0)]),_:1}),s(_e,{open:t(i).open,"onUpdate:open":l[6]||(l[6]=a=>t(i).open=a),title:"選擇訊息類型",centered:"","cancel-text":"取消","ok-text":"確定",width:"440px",onOk:l[7]||(l[7]=()=>{h.$router.push({name:t(i).isParameter?"MessageSendingParameterCreate":"MessageSendingGeneralCreate"})})},{default:n(()=>[e("div",jt,[s(pe,{layout:"vertical",autocomplete:"off"},{default:n(()=>[s(me,{"html-for":""},{label:n(()=>[Ut,s(de,{placement:"top","get-popup-container":t(He)},{title:n(()=>[d(" 一般訊息支援 SMS 和 MMS，"),Vt,d(" 若想批次使用參數發送訊息，請選擇參數訊息 ")]),default:n(()=>[e("a",$t,[s(ue,{name:"union",width:"16px",class:"text-sms-grayscale-60"})])]),_:1},8,["get-popup-container"])]),default:n(()=>[s(re,{value:t(i).isParameter,"onUpdate:value":l[5]||(l[5]=a=>t(i).isParameter=a)},{default:n(()=>[s(B,{value:!1},{default:n(()=>[d(" 一般訊息 ")]),_:1}),s(B,{value:!0},{default:n(()=>[d(" 參數訊息 ")]),_:1})]),_:1},8,["value"])]),_:1})]),_:1})])]),_:1},8,["open"]),s(Oe,{ref_key:"topUpModalRef",ref:f},null,512)],64)}}}),Qt=fe(Bt,[["__scopeId","data-v-0f76a62b"]]);export{Qt as default};
