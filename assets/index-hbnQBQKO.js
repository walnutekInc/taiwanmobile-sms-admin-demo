import{_ as X}from"./index.vuevuetypescriptsetuptruelang-BMFucJOA.js";import{_ as W}from"./index.vuevuetypestyleindex0lang-CcFzt3O-.js";import{_ as q}from"./index-DLsqJIlO.js";import{_ as H,a as Q}from"./index.vuevuetypescriptsetuptruelang-DlliyulR.js";import{_ as Z}from"./index.vuevuetypescriptsetuptruelang-DAISk7I9.js";import{_ as ee}from"./index-8mjf59gM.js";import{u as ne}from"./request-Pk-1cfXb.js";import{F as oe}from"./index-Csb8cSqh.js";import{b as f,g as ae}from"./tools-DInPKiE1.js";import{x as te,t as le,O as se,I as ue,y as de,F as me,K as ie}from"./antd-CeareF1k.js";import{d as re,o as ce,f as M,u as e,c as b,W as w,_ as D,$ as t,k as o,G as V,Y as C,X as Y,F as pe,a6 as k,a4 as ve}from"./vue-BtcszhJV.js";import"./context-CcXFEK-B.js";import"./index.vuevuetypestyleindex0lang-l354ccN2.js";import"./index.vuevuetypescriptsetuptruelang-BxQ8nJie.js";const A=[{companyAccount:"VCSJ000100",companyName:"新光三越百貨公司",senderAccount:"Nelson",sendTime:"2024/11/12 19:30:00",receiveTime:"2024/11/12 19:30:10",messageNumber:"4487569850",messageContent:"今日店點銷售重點為口紅，每銷售10支，業績獎金多300元。下週優惠更多，搶先看週年慶目錄拿好禮！現在回覆你的會員編號，以及你的出生年月日，透過系統配對，找到專屬於",senderPhone:"0951229385",receiverPhone:"0985718276",messageId:"3548874120",sendStatus:"發送成功"},{companyAccount:"VCSJ000100",companyName:"新光三越百貨公司",senderAccount:"Nelson",sendTime:"2024/11/12 19:30:00",receiveTime:"2024/11/12 19:30:10",messageNumber:"4487569850",messageContent:"今日店點銷售重點為口紅，每銷售10支，業績獎金多300元。下...",senderPhone:"0951229385",receiverPhone:"0983616386",messageId:"3548874120",sendStatus:"發送成功"},{companyAccount:"VCSJ000100",companyName:"新光三越百貨公司",senderAccount:"Nelson",sendTime:"2024/11/12 19:30:00",receiveTime:"2024/11/12 19:30:10",messageNumber:"4487569850",messageContent:"今日店點銷售重點為口紅，每銷售10支，業績獎金多300元。下週優惠更多，請先看週年慶目錄享好禮！現在回覆你的會員編號，以及你的出生年月日，透...",senderPhone:"0951229385",receiverPhone:"0910284778",messageId:"3548874120",sendStatus:"發送失敗"},{companyAccount:"VCSJ000200",companyName:"饗食天堂",senderAccount:"Lulu",sendTime:"2024/11/10 19:30:00",receiveTime:"2024/11/10 19:30:40",messageNumber:"4718984717",messageContent:"週年慶活動",senderPhone:"0938771827",receiverPhone:"0958881872",messageId:"4723916268",sendStatus:"發送成功"},{companyAccount:"VCSJ000200",companyName:"饗食天堂",senderAccount:"Lulu",sendTime:"2024/11/10 19:30:00",receiveTime:"2024/11/10 19:30:35",messageNumber:"4718984717",messageContent:"週年慶活動",senderPhone:"0938771827",receiverPhone:"0947172666",messageId:"4723916268",sendStatus:"發送成功"},{companyAccount:"VCSJ000200",companyName:"饗食天堂",senderAccount:"Lulu",sendTime:"2024/11/10 19:30:00",receiveTime:"2024/11/10 19:30:33",messageNumber:"4718984717",messageContent:"週年慶活動",senderPhone:"0938771827",receiverPhone:"0911727491",messageId:"4723916268",sendStatus:"發送成功"},{companyAccount:"VCSJ000400",companyName:"全聯福利中心",senderAccount:"Ken",sendTime:"2024/11/05 08:00:00",receiveTime:"2024/11/05 08:10:23",messageNumber:"4727349525",messageContent:"謝謝您的參與！您的抽獎編號為1923784",senderPhone:"0978356948",receiverPhone:"0917223514",messageId:"6357693461",sendStatus:"發送成功"}];function _e(){const{list:x,pagination:h,setResponseList:i}=ne();async function y(d){const n=(d.current-1)*d.pageSize,S=Math.ceil(A.length/d.pageSize),P=A.slice(n,d.current*d.pageSize).map(p=>({...p}));i({total:A.length,pages:S,current:d.current,pageSize:d.pageSize,records:P})}return{getMessageSendRecordList:y,messageSendList:x,pagination:h}}const ge={class:"flex justify-end px-2 items-center py-4 bg-sms-grayscale-0 rounded-t-12px"},fe={key:0},ye={href:"javascript:;",class:"text-black hover:text-black"},Ue=re({__name:"index",setup(x){const{getMessageSendRecordList:h,messageSendList:i,pagination:y}=_e(),d=[{title:"公司帳號",dataIndex:"companyAccount",key:"companyAccount",width:120},{title:"公司名稱",dataIndex:"companyName",key:"companyName",width:200},{title:"發送帳號",dataIndex:"senderAccount",key:"senderAccount",width:105},{title:"發送時間",dataIndex:"sendTime",key:"sendTime",width:160},{title:"送達時間",dataIndex:"receiveTime",key:"receiveTime",width:160},{title:"發送編號",dataIndex:"messageNumber",key:"messageNumber",width:120},{title:"訊息主旨或內容",dataIndex:"messageContent",key:"messageContent",width:224},{title:"發送門號",dataIndex:"senderPhone",key:"senderPhone",width:120},{title:"接收門號",dataIndex:"receiverPhone",key:"receiverPhone",width:120},{title:"訊息編號",dataIndex:"messageId",key:"messageId",width:120},{title:"發送狀態",dataIndex:"sendStatus",key:"sendStatus",width:100}];ce(()=>{p(1)});const n=M({keyword:"",sortField:"createTime",sortOrder:"descend",companyAccount:[],companyName:[],sendTime:void 0,subject:"",messageId:[],sendStatus:[],senderPhone:[],receiverPhone:[]});async function S(u,l,c){console.log("sorter:",c),n.value=Object.assign(n.value,{sortField:c.field,sortOrder:c.order}),await p(y.value.current,y.value.pageSize)}async function P(u,l){await p(u,l)}async function p(u=1,l=10){const c={current:u,pageSize:l,...e(n)};await h(c)}const N=M(null);function j(){var u;p(1),(u=N.value)==null||u.hide()}const T=b(()=>i.value.map(u=>({label:u.companyAccount,value:u.companyAccount}))),R=b(()=>i.value.map(u=>({label:u.companyName,value:u.companyName}))),U=b(()=>i.value.map(u=>({label:u.senderPhone,value:u.senderPhone}))),L=b(()=>i.value.map(u=>({label:u.receiverPhone,value:u.receiverPhone}))),F=b(()=>i.value.map(u=>({label:u.messageId,value:u.messageId}))),O=[{value:"SENDING",label:"發送中"},{value:"SUCCESS",label:"發送成功"},{value:"FAIL",label:"發送失敗"},{value:"EXPIRED",label:"發送過期"}];return(u,l)=>{const c=ee,I=Z,v=H,_=Q,g=te,r=q,m=le,z=se,J=ue,$=de,B=me,E=ie,K=W,G=X;return w(),D(G,{title:"訊息發送紀錄查詢"},{extraContent:t(()=>[o(I,null,{icon:t(()=>[o(c,{name:"download",width:"16px"})]),default:t(()=>[V(" 匯出CSV ")]),_:1})]),default:t(()=>[C("div",ge,[o(oe,{ref_key:"filterKeywordInputRef",ref:N,modelValue:e(n).keyword,"onUpdate:modelValue":l[15]||(l[15]=a=>e(n).keyword=a),class:"w-554px h-40px",placeholder:"搜尋公司帳號、公司名稱、訊息主旨或內容關鍵字、接收門號",onClearFilter:l[16]||(l[16]=()=>{n.value={...e(n),keyword:"",companyAccount:[],companyName:[],sendTime:void 0,subject:"",messageId:[],sendStatus:[],senderPhone:[],receiverPhone:[]}})},{filterForm:t(()=>[o(B,{layout:"vertical",model:e(n),autocomplete:"off"},{default:t(()=>[o($,{gutter:[16,12]},{default:t(()=>[o(m,{span:24},{default:t(()=>[o(r,{label:"公司帳號",valueed:e(f)(e(n).companyAccount)},{default:t(()=>[o(g,{value:e(n).companyAccount,"onUpdate:value":l[1]||(l[1]=a=>e(n).companyAccount=a),options:e(T),"max-tag-count":2,"show-arrow":!0,mode:"multiple",class:"w-full","option-filter-prop":"label","menu-item-selected-icon":" "},{dropdownRender:t(({menuNode:a})=>[o(v,{modelValue:e(n).companyAccount,"onUpdate:modelValue":l[0]||(l[0]=s=>e(n).companyAccount=s),menu:a,options:e(T)},null,8,["modelValue","menu","options"])]),option:t(({value:a,label:s})=>[o(_,{values:e(n).companyAccount,value:a,label:s},null,8,["values","value","label"])]),_:1},8,["value","options"])]),_:1},8,["valueed"])]),_:1}),o(m,{span:24},{default:t(()=>[o(r,{label:"公司姓名",valueed:e(f)(e(n).companyName)},{default:t(()=>[o(g,{value:e(n).companyName,"onUpdate:value":l[3]||(l[3]=a=>e(n).companyName=a),options:e(R),"max-tag-count":2,"show-arrow":!0,mode:"multiple",class:"w-full","option-filter-prop":"label","menu-item-selected-icon":" "},{dropdownRender:t(({menuNode:a})=>[o(v,{modelValue:e(n).companyName,"onUpdate:modelValue":l[2]||(l[2]=s=>e(n).companyName=s),menu:a,options:e(R)},null,8,["modelValue","menu","options"])]),option:t(({value:a,label:s})=>[o(_,{values:e(n).companyName,value:a,label:s},null,8,["values","value","label"])]),_:1},8,["value","options"])]),_:1},8,["valueed"])]),_:1}),o(m,{span:24},{default:t(()=>[o(r,{label:"發送門號",valueed:e(f)(e(n).senderPhone)},{default:t(()=>[o(g,{value:e(n).senderPhone,"onUpdate:value":l[5]||(l[5]=a=>e(n).senderPhone=a),options:e(U),"max-tag-count":2,"show-arrow":!0,mode:"multiple",class:"w-full","option-filter-prop":"label","menu-item-selected-icon":" "},{dropdownRender:t(({menuNode:a})=>[o(v,{modelValue:e(n).senderPhone,"onUpdate:modelValue":l[4]||(l[4]=s=>e(n).senderPhone=s),menu:a,options:e(U)},null,8,["modelValue","menu","options"])]),option:t(({value:a,label:s})=>[o(_,{values:e(n).senderPhone,value:a,label:s},null,8,["values","value","label"])]),_:1},8,["value","options"])]),_:1},8,["valueed"])]),_:1}),o(m,{span:24},{default:t(()=>[o(r,{label:"接收門號",valueed:e(f)(e(n).receiverPhone)},{default:t(()=>[o(g,{value:e(n).receiverPhone,"onUpdate:value":l[7]||(l[7]=a=>e(n).receiverPhone=a),options:e(L),"max-tag-count":2,"show-arrow":!0,mode:"multiple",class:"w-full","option-filter-prop":"label","menu-item-selected-icon":" "},{dropdownRender:t(({menuNode:a})=>[o(v,{modelValue:e(n).receiverPhone,"onUpdate:modelValue":l[6]||(l[6]=s=>e(n).receiverPhone=s),menu:a,options:e(L)},null,8,["modelValue","menu","options"])]),option:t(({value:a,label:s})=>[o(_,{values:e(n).receiverPhone,value:a,label:s},null,8,["values","value","label"])]),_:1},8,["value","options"])]),_:1},8,["valueed"])]),_:1}),o(m,{span:24},{default:t(()=>[o(r,{label:"發送時間",valueed:e(n).sendTime},{default:t(()=>[o(z,{value:e(n).sendTime,"onUpdate:value":l[8]||(l[8]=a=>e(n).sendTime=a),class:"w-full",placement:"topLeft",format:"YYYY-MM-DD","value-format":"YYYY/MM/DD"},null,8,["value"])]),_:1},8,["valueed"])]),_:1}),o(m,{span:24},{default:t(()=>[o(r,{label:"訊息主旨或內容關鍵字",valueed:e(n).subject},{default:t(()=>[o(J,{value:e(n).subject,"onUpdate:value":l[9]||(l[9]=a=>e(n).subject=a)},null,8,["value"])]),_:1},8,["valueed"])]),_:1}),o(m,{span:24},{default:t(()=>[o(r,{label:"訊息編號",valueed:e(f)(e(n).messageId)},{default:t(()=>[o(g,{value:e(n).messageId,"onUpdate:value":l[11]||(l[11]=a=>e(n).messageId=a),options:e(F),"max-tag-count":2,"show-arrow":!0,mode:"multiple",class:"w-full","option-filter-prop":"label","menu-item-selected-icon":" "},{dropdownRender:t(({menuNode:a})=>[o(v,{modelValue:e(n).messageId,"onUpdate:modelValue":l[10]||(l[10]=s=>e(n).messageId=s),menu:a,options:e(F)},null,8,["modelValue","menu","options"])]),option:t(({value:a,label:s})=>[o(_,{values:e(n).messageId,value:a,label:s},null,8,["values","value","label"])]),_:1},8,["value","options"])]),_:1},8,["valueed"])]),_:1}),o(m,{span:24},{default:t(()=>[o(r,{label:"發送狀態",valueed:e(f)(e(n).sendStatus)},{default:t(()=>[o(g,{value:e(n).sendStatus,"onUpdate:value":l[13]||(l[13]=a=>e(n).sendStatus=a),options:O,"max-tag-count":2,"show-arrow":!0,mode:"multiple",class:"w-full","option-filter-prop":"label","menu-item-selected-icon":" "},{dropdownRender:t(({menuNode:a})=>[o(v,{modelValue:e(n).sendStatus,"onUpdate:modelValue":l[12]||(l[12]=s=>e(n).sendStatus=s),menu:a,options:O},null,8,["modelValue","menu"])]),option:t(({value:a,label:s})=>[o(_,{values:e(n).sendStatus,value:a,label:s},null,8,["values","value","label"])]),_:1},8,["value"])]),_:1},8,["valueed"])]),_:1}),o(m,{span:24,class:"text-center"},{default:t(()=>[o(I,{status:"small2",class:"me-5",onClick:l[14]||(l[14]=a=>{var s;return(s=e(N))==null?void 0:s.hide()})},{default:t(()=>[V(" 取消 ")]),_:1}),o(I,{status:"small1",onClick:j},{default:t(()=>[V(" 確定 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])]),o(K,{"data-source":e(i),scroll:{x:"max-content"},columns:d,size:"small","show-sorter-tooltip":!1,pagination:{...e(y)},onChange:S,onChangePagination:P},{bodyCell:t(({column:a,text:s})=>[a.key==="messageContent"?(w(),Y(pe,{key:0},[s.length<=70?(w(),Y("span",fe,k(s),1)):(w(),D(E,{key:1,placement:"top","get-popup-container":e(ae)},{title:t(()=>[C("span",null,k(s),1)]),default:t(()=>[C("a",ye,k(s==null?void 0:s.slice(0,70))+"...",1)]),_:2},1032,["get-popup-container"]))],64)):ve("",!0)]),_:1},8,["data-source","pagination"])]),_:1})}}});export{Ue as default};
