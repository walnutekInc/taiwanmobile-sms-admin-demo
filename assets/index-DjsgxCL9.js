import{_ as me}from"./index.vuevuetypescriptsetuptruelang-D49_PPmq.js";import{_ as fe}from"./index.vuevuetypestyleindex0lang-BGNd5Gbb.js";import{_ as ge}from"./index-CLsy3q8J.js";import{_ as _e,a as be}from"./index.vuevuetypescriptsetuptruelang-3e_L4r1N.js";import{_ as W}from"./index.vuevuetypescriptsetuptruelang-DpQcR6qX.js";import{j as se,_ as ve}from"./index-D6D3dNFb.js";import{K as z,N as ye,P as le,I as oe,o as ue,p as J,a1 as he,q as Q,W as we,u as re,s as X,F as H,z as ie,G as xe,t as ke}from"./antd-CL-o36kY.js";import{b as Me}from"./index.esm-Dx6oysl1.js";import{u as Ce}from"./request-C2-FuxhR.js";import{f as S,d as Z,r as D,W as Y,_ as L,$ as a,k as t,ab as k,u as e,Y as c,a3 as B,G as f,y as ce,o as Re,X as Ge,F as Te,a4 as ne}from"./vue-BMMYOVpY.js";import{F as Ne}from"./index-D85zjsQy.js";import{a as Se,g as Ue}from"./tools-DuR4KSGu.js";import"./context-C8KA9EkZ.js";import"./index.vuevuetypestyleindex0lang-Cj84r4o_.js";import"./index.vuevuetypescriptsetuptruelang-CP3U4HOe.js";const F=[{key:"1",createTime:"2012/02/10 09:20",updateTime:"2016/07/26 19:32",subName:"KiKi",unit:"會計處",name:"王曉民",areaCode:"02",contact:"1234567",email:"eeu3@gmail.com",phone:"1",note:"備註說明文字備註說明文字備註說明文字備註說明文字備註說明文字備註說明文字備註說明文字備註說明文字",status:!1,balance:4128,transfer:"COVER",transferPrice:"",followupManagement:!0,paramterMessage:!0,chatMessage:!0,autoReply:!0,aiCopywritingGen:!0,aiMaterialGen:!0},{key:"2",createTime:"2012/02/10 09:20",updateTime:"2016/07/26 19:32",subName:"Wu",unit:"財務處",name:"王麗美",areaCode:"02",contact:"1234567",email:"eeu3@gmail.com",phone:"1",note:"備註說明文字備註說明文字備註說明文字備註說明文字備註說明文字備註說明文字備註說明文字備註說明文字",status:!0,balance:50,transfer:"COVER",transferPrice:"",followupManagement:!0,paramterMessage:!0,chatMessage:!0,autoReply:!0,aiCopywritingGen:!0,aiMaterialGen:!0},{key:"3",createTime:"2012/02/10 09:20",updateTime:"2016/07/26 19:32",subName:"Chen",unit:"業務處",name:"鄒美麗",areaCode:"02",contact:"1234567",email:"eeu3@gmail.com",phone:"1",note:"備註說明文字備註說明文字備註說明文字備註說明文字備註說明文字備註說明文字備註說明文字備註說明文字",status:!1,balance:500,transfer:"COVER",transferPrice:"",followupManagement:!0,paramterMessage:!0,chatMessage:!0,autoReply:!0,aiCopywritingGen:!0,aiMaterialGen:!0},{key:"4",createTime:"2012/02/10 09:20",updateTime:"2016/07/26 19:32",subName:"Water266",unit:"財務處",name:"林美滿",areaCode:"02",contact:"1234567",email:"eeu3@gmail.com",phone:"1",note:"備註說明文字備註說明文字備註說明文字備註說明文字備註說明文字備註說明文字備註說明文字備註說明文字",status:!0,balance:0,transfer:"COVER",transferPrice:"",followupManagement:!0,paramterMessage:!0,chatMessage:!0,autoReply:!0,aiCopywritingGen:!0,aiMaterialGen:!0},{key:"5",createTime:"2012/02/10 09:20",updateTime:"2016/07/26 19:32",subName:"Irene12334",unit:"財務處",name:"魏萱儒",areaCode:"02",contact:"1234567",email:"eeu3@gmail.com",phone:"1",note:"備註說明文字備註說明文字備註說明文字備註說明文字備註說明文字備註說明文字備註說明文字備註說明文字",status:!0,balance:3e3,transfer:"COVER",transferPrice:"",followupManagement:!0,paramterMessage:!0,chatMessage:!0,autoReply:!0,aiCopywritingGen:!0,aiMaterialGen:!0},{key:"6",createTime:"2012/02/10 09:20",updateTime:"2016/07/26 19:32",subName:"3Q2Q",unit:"會計處",name:"陳亭羽",areaCode:"02",contact:"1234567",email:"eeu3@gmail.com",phone:"1",note:"備註說明文字備註說明文字備註說明文字備註說明文字備註說明文字備註說明文字備註說明文字備註說明文字",status:!0,balance:5e3,transfer:"COVER",transferPrice:"",followupManagement:!0,paramterMessage:!0,chatMessage:!0,autoReply:!0,aiCopywritingGen:!0,aiMaterialGen:!0},{key:"7",createTime:"2012/02/10 09:20",updateTime:"2016/07/26 19:32",subName:"Linda",unit:"業務處",name:"繼光軒",areaCode:"02",contact:"1234567",email:"eeu3@gmail.com",phone:"1",note:"備註說明文字備註說明文字備註說明文字備註說明文字備註說明文字備註說明文字備註說明文字備註說明文字",status:!0,balance:800,transfer:"COVER",transferPrice:"",followupManagement:!0,paramterMessage:!0,chatMessage:!0,autoReply:!0,aiCopywritingGen:!0,aiMaterialGen:!0},{key:"8",createTime:"2012/02/10 09:20",updateTime:"2016/07/26 19:32",subName:"Jay",unit:"業務處",name:"黃如英",areaCode:"02",contact:"1234567",email:"eeu3@gmail.com",phone:"1",note:"備註說明文字備註說明文字備註說明文字備註說明文字備註說明文字備註說明文字備註說明文字備註說明文字",status:!0,balance:750,transfer:"COVER",transferPrice:"",followupManagement:!0,paramterMessage:!0,chatMessage:!0,autoReply:!0,aiCopywritingGen:!0,aiMaterialGen:!0},{key:"9",createTime:"2012/02/10 09:20",updateTime:"2016/07/26 19:32",subName:"Ray",unit:"財務處",name:"曾創盛",areaCode:"02",contact:"1234567",email:"eeu3@gmail.com",phone:"1",note:"備註說明文字備註說明文字備註說明文字備註說明文字備註說明文字備註說明文字備註說明文字備註說明文字",status:!0,balance:390,transfer:"COVER",transferPrice:"",followupManagement:!0,paramterMessage:!0,chatMessage:!0,autoReply:!0,aiCopywritingGen:!0,aiMaterialGen:!0},{key:"10",createTime:"2012/02/10 09:20",updateTime:"2016/07/26 19:32",subName:"Mike",unit:"會計處",name:"廖竹資",areaCode:"02",contact:"1234567",email:"eeu3@gmail.com",phone:"1",note:"備註說明文字備註說明文字備註說明文字備註說明文字備註說明文字備註說明文字備註說明文字備註說明文字",status:!0,balance:52900,transfer:"COVER",transferPrice:"",followupManagement:!0,paramterMessage:!0,chatMessage:!0,autoReply:!0,aiCopywritingGen:!0,aiMaterialGen:!0},{key:"11",createTime:"2012/02/10 09:20",updateTime:"2016/07/26 19:32",subName:"Jojo",unit:"會計處",name:"王麗美",areaCode:"02",contact:"1234567",email:"eeu3@gmail.com",phone:"1",note:"備註說明文字備註說明文字備註說明文字備註說明文字備註說明文字備註說明文字備註說明文字備註說明文字",status:!0,balance:3470,transfer:"COVER",transferPrice:"",followupManagement:!0,paramterMessage:!0,chatMessage:!0,autoReply:!0,aiCopywritingGen:!0,aiMaterialGen:!0}];function ee(){const{list:x,pagination:M,setResponseList:G}=Ce(),U=async l=>{const y=(l.current-1)*l.pageSize,N=Math.ceil(F.length/l.pageSize);G({total:F.length,pages:N,current:l.current,pageSize:l.pageSize,records:F.slice(y,l.current*l.pageSize)})},T=async l=>({data:{status:"success",id:"123"}}),h=async(l,y)=>({data:{status:"success",id:"123"}}),u=async l=>({data:{status:"success"}}),C=S(),n=async l=>{const y=F.find(N=>N.key===l);return C.value=y,{data:{...y}}},A=S([]);return{getSubAccounts:U,subAccountList:x,pagination:M,getSubAccount:n,subAccount:C,updateSubAccount:h,createSubAccount:T,deleteSubAccount:u,subAccountOption:A,getSubAccountOption:async()=>{A.value=F.map(l=>({value:l.key,label:l.subName,...l}))},batchUpdateSubAccount:async l=>({data:{status:"success",id:"123"}})}}var te=(x=>(x.COVER="覆蓋",x.INCREASE="增加",x.REDUCE="減少",x))(te||{});const Ae=c("span",{class:"text-sms-grayscale-100"},"金額設定",-1),Pe={class:"bg-sms-bg-light-mode-gray rounded-md p-4 flex flex flex-col gap-y-4"},Ie={class:"text-base text-sms-grayscale-100 flex flex-col gap-y-1"},Oe=c("span",null,"目前餘額",-1),Ve={class:"flex gap-x-2"},$e={class:"w-1/3"},Ee={class:"w-full"},Fe={class:"flex justify-between items-center"},Ye=c("span",{class:"text-sms-grayscale-100"},"權限設定",-1),De={class:"bg-sms-bg-light-mode-gray rounded-md p-4 flex flex flex-col gap-y-4"},Ke=c("div",null,"一般功能",-1),ze={class:"grid grid-cols-3 gap-x-4 gap-y-2"},Le=c("div",null,"加值功能",-1),je={class:"grid grid-cols-3 gap-x-4 gap-y-2"},qe=Z({name:"SubAccountForm",__name:"sub-account-form",props:{saveCallbck:{type:Function,required:!0}},setup(x,{expose:M}){const G=x,U=se(),{createSubAccount:T,updateSubAccount:h}=ee(),u=S(!0),C={subName:"",unit:"",name:"",areaCode:"02",contact:"",email:"",phone:void 0,note:"",balance:0,transfer:"COVER",transferPrice:"",followupManagement:!0,paramterMessage:!0,chatMessage:!0,autoReply:!0,aiCopywritingGen:!0,aiMaterialGen:!0},n=D(z(C)),A=D({subName:[{required:!0,message:"請輸入子帳號名稱",trigger:"blur"}],phone:[{required:!0,message:"請選擇發送門號",trigger:"blur"}],email:[{async validator(_,s){const i=Me().email("格式錯誤");return ye(s)||await i.validate(s),!0},trigger:"blur"}]}),{validateInfos:g,resetFields:R,validate:l}=le(n,A),y=S(!1);async function N(_){console.log(_),_?(u.value=!1,R(_)):(u.value=!0,R(z(C))),y.value=!0}function v(){l().then(async()=>{var _,s;u.value?((_=(await T(n)).data)==null?void 0:_.status)==="success"&&U.success({message:"子帳號新增成功",placement:"top"}):n.key&&((s=(await h(n,n.key)).data)==null?void 0:s.status)==="success"&&U.success({message:"子帳號編輯成功",placement:"top"}),G.saveCallbck(),y.value=!1}).catch(_=>{console.debug(_)})}function d(_){const i=_.target.value;/09\d{2}/.test(i)&&(n.phone=i.replace("0",""))}async function P(_){const o=_.target.value.replace(/^\D/g,"").slice(0,6);await ce(),n.transferPrice=Number.parseInt(o)}return M({show:N}),(_,s)=>{const i=oe,o=ue,m=J,I=he,$=Q,E=we,p=W,w=re,V=X,K=H,j=ie;return Y(),L(j,{open:y.value,"onUpdate:open":s[18]||(s[18]=r=>y.value=r),"ok-text":"確定","cancel-text":"取消",centered:"",title:u.value?"新增子帳號":"編輯子帳號",width:"600px","destroy-on-close":!0,onOk:v},{default:a(()=>[t(K,{class:"px-32px",layout:"vertical",autocomplete:"off",onSubmit:v},{default:a(()=>[t(V,{gutter:[16,4]},{default:a(()=>[t(m,{span:12},{default:a(()=>[t(o,k({label:"子帳號名稱"},e(g).subName,{required:""}),{default:a(()=>[t(i,{value:e(n).subName,"onUpdate:value":s[0]||(s[0]=r=>e(n).subName=r),placeholder:"請輸入子帳號名稱",disabled:!u.value},null,8,["value","disabled"])]),_:1},16)]),_:1}),t(m,{span:12},{default:a(()=>[t(o,k({label:"子帳號名稱"},e(g).unit,{extra:"10 字以內"}),{default:a(()=>[t(i,{value:e(n).unit,"onUpdate:value":s[1]||(s[1]=r=>e(n).unit=r),placeholder:"請輸入子帳號使用單位",maxlength:10},null,8,["value"])]),_:1},16)]),_:1}),t(m,{span:12},{default:a(()=>[t(o,k({label:"姓名"},e(g).name,{extra:"10 字以內"}),{default:a(()=>[t(i,{value:e(n).name,"onUpdate:value":s[2]||(s[2]=r=>e(n).name=r),placeholder:"請輸入姓名",maxlength:10},null,8,["value"])]),_:1},16)]),_:1}),t(m,{span:12},{default:a(()=>[t(o,k({label:"聯絡電話"},e(g).contact,{extra:"請輸入數字，15 碼數字以內"}),{default:a(()=>[t(I,{compact:""},{default:a(()=>[t(i,{value:e(n).areaCode,"onUpdate:value":s[3]||(s[3]=r=>e(n).areaCode=r),style:{width:"30%"},placeholder:"請輸入區碼"},null,8,["value"]),t(i,{value:e(n).contact,"onUpdate:value":s[4]||(s[4]=r=>e(n).contact=r),style:{width:"70%"},placeholder:"請輸入聯絡電話",maxlength:15,onChange:d},null,8,["value"])]),_:1})]),_:1},16)]),_:1}),t(m,{span:24},{default:a(()=>[t(o,k({label:"Email"},e(g).email,{extra:"50 字以內"}),{default:a(()=>[t(i,{value:e(n).email,"onUpdate:value":s[5]||(s[5]=r=>e(n).email=r),placeholder:"請輸入Email",maxlength:50},null,8,["value"])]),_:1},16)]),_:1}),t(m,{span:24},{default:a(()=>[t(o,k(e(g).phone,{label:"發送門號",required:""}),{default:a(()=>[t($,{value:e(n).phone,"onUpdate:value":s[6]||(s[6]=r=>e(n).phone=r),options:[{label:"0935-111-111",value:"1"},{label:"0947-127-998",value:"2"},{label:"0958-892-006",value:"3"}],"allow-clear":"",placeholder:"請選擇發送門號"},null,8,["value"])]),_:1},16)]),_:1}),t(m,{span:24},{default:a(()=>[t(o,k({label:"備註"},e(g).note,{extra:"150 字以內"}),{default:a(()=>[t(E,{value:e(n).note,"onUpdate:value":s[7]||(s[7]=r=>e(n).note=r),placeholder:"請輸入備註",maxlength:150,rows:4},null,8,["value"])]),_:1},16)]),_:1}),t(m,{span:24},{default:a(()=>[Ae,c("div",Pe,[c("div",Ie,[Oe,c("span",null,"NT$"+B(e(n).balance.toFixed(2)),1)]),c("div",Ve,[c("div",$e,[t(o,k(e(g).transfer,{label:"金額異動"}),{default:a(()=>[t($,{value:e(n).transfer,"onUpdate:value":s[8]||(s[8]=r=>e(n).transfer=r),options:Object.entries(e(te)).map(([r,q])=>({value:r,label:q}))},null,8,["value","options"])]),_:1},16)]),c("div",Ee,[t(o,k(e(g).transferPrice,{label:" ",extra:"6 位數以內"}),{default:a(()=>[t(i,{value:e(n).transferPrice,"onUpdate:value":s[9]||(s[9]=r=>e(n).transferPrice=r),placeholder:"請輸入金額",type:"number",onInput:P},null,8,["value"])]),_:1},16)])])])]),_:1}),t(m,{span:24,class:"mt-4"},{default:a(()=>[c("div",Fe,[Ye,c("div",null,[t(p,{status:"small3",class:"!px-1 !text-sms-primary-blue-80",onClick:s[10]||(s[10]=()=>{e(n).followupManagement=!0,e(n).paramterMessage=!0,e(n).chatMessage=!0,e(n).autoReply=!0,e(n).aiCopywritingGen=!0,e(n).aiMaterialGen=!0})},{default:a(()=>[f("全選")]),_:1}),t(p,{status:"small4",class:"!px-1",onClick:s[11]||(s[11]=()=>{e(n).followupManagement=!1,e(n).paramterMessage=!1,e(n).chatMessage=!1,e(n).autoReply=!1,e(n).aiCopywritingGen=!1,e(n).aiMaterialGen=!1})},{default:a(()=>[f("清除")]),_:1})])]),c("div",De,[c("div",null,[Ke,c("div",ze,[t(w,{checked:e(n).followupManagement,"onUpdate:checked":s[12]||(s[12]=r=>e(n).followupManagement=r),class:"!text-base"},{default:a(()=>[f(" 追蹤活動管理 ")]),_:1},8,["checked"]),t(w,{checked:e(n).paramterMessage,"onUpdate:checked":s[13]||(s[13]=r=>e(n).paramterMessage=r),class:"!text-base"},{default:a(()=>[f(" 參數訊息 ")]),_:1},8,["checked"]),t(w,{checked:e(n).chatMessage,"onUpdate:checked":s[14]||(s[14]=r=>e(n).chatMessage=r),class:"!text-base"},{default:a(()=>[f(" 雙向訊息 ")]),_:1},8,["checked"]),t(w,{checked:e(n).autoReply,"onUpdate:checked":s[15]||(s[15]=r=>e(n).autoReply=r),class:"!text-base"},{default:a(()=>[f(" 自動回覆 ")]),_:1},8,["checked"])])]),c("div",null,[Le,c("div",je,[t(w,{checked:e(n).aiCopywritingGen,"onUpdate:checked":s[16]||(s[16]=r=>e(n).aiCopywritingGen=r),class:"!text-base"},{default:a(()=>[f(" AI 文案生成 ")]),_:1},8,["checked"]),t(w,{checked:e(n).aiMaterialGen,"onUpdate:checked":s[17]||(s[17]=r=>e(n).aiMaterialGen=r),class:"!text-base"},{default:a(()=>[f(" AI 素材生成 ")]),_:1},8,["checked"])])])])]),_:1}),t(p,{"html-type":"submit",class:"hidden"},{default:a(()=>[f(" 確定 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["open","title"])}}}),Be=c("span",{class:"text-sms-grayscale-100"},"金額設定",-1),We={class:"bg-sms-bg-light-mode-gray rounded-md p-4 flex flex flex-col gap-y-4"},Je={class:"flex gap-x-2"},Qe={class:"w-1/3"},Xe={class:"w-full"},He={class:"flex justify-between items-center"},Ze=c("span",{class:"text-sms-grayscale-100"},"權限設定",-1),et={class:"bg-sms-bg-light-mode-gray rounded-md p-4 flex flex flex-col gap-y-4"},tt=c("div",null,"一般功能",-1),at={class:"grid grid-cols-3 gap-x-4 gap-y-2"},nt=c("div",null,"加值功能",-1),st={class:"grid grid-cols-3 gap-x-4 gap-y-2"},lt=Z({name:"BatchSubAccountEdit",__name:"batch-account-edit",props:{saveCallbck:{type:Function,required:!0}},setup(x,{expose:M}){const G=x,U=se(),{batchUpdateSubAccount:T}=ee(),h={ids:[],transfer:"COVER",transferPrice:"",followupManagement:!0,paramterMessage:!0,chatMessage:!0,autoReply:!0,aiCopywritingGen:!0,aiMaterialGen:!0},u=D(z(h)),C=D({}),{validateInfos:n,resetFields:A,validate:g}=le(u,C),R=S(!1);async function l(v){A({...z(h),ids:v}),R.value=!0}function y(){g().then(async()=>{var d;((d=(await T(u)).data)==null?void 0:d.status)==="success"&&(U.success({message:"子帳號編輯成功",placement:"top"}),G.saveCallbck(),R.value=!1)}).catch(v=>{console.debug(v)})}async function N(v){const _=v.target.value.replace(/^\D/g,"").slice(0,6);await ce(),u.transferPrice=Number.parseInt(_)}return M({show:l}),(v,d)=>{const P=Q,_=ue,s=oe,i=J,o=W,m=re,I=X,$=H,E=ie;return Y(),L(E,{open:R.value,"onUpdate:open":d[10]||(d[10]=p=>R.value=p),"ok-text":"確定","cancel-text":"取消",centered:"",title:"編輯子帳號",width:"600px","destroy-on-close":!0,onOk:y},{default:a(()=>[t($,{class:"px-32px",layout:"vertical",autocomplete:"off",onSubmit:y},{default:a(()=>[t(I,{gutter:[16,4]},{default:a(()=>[t(i,{span:24},{default:a(()=>[Be,c("div",We,[c("div",Je,[c("div",Qe,[t(_,k(e(n).transfer,{label:"金額異動"}),{default:a(()=>[t(P,{value:e(u).transfer,"onUpdate:value":d[0]||(d[0]=p=>e(u).transfer=p),options:Object.entries(e(te)).map(([p,w])=>({value:p,label:w}))},null,8,["value","options"])]),_:1},16)]),c("div",Xe,[t(_,k(e(n).transferPrice,{label:" ",extra:"6 位數以內"}),{default:a(()=>[t(s,{value:e(u).transferPrice,"onUpdate:value":d[1]||(d[1]=p=>e(u).transferPrice=p),placeholder:"請輸入金額",type:"number",onInput:N},null,8,["value"])]),_:1},16)])])])]),_:1}),t(i,{span:24,class:"mt-4"},{default:a(()=>[c("div",He,[Ze,c("div",null,[t(o,{status:"small3",class:"!px-1 !text-sms-primary-blue-80",onClick:d[2]||(d[2]=()=>{e(u).followupManagement=!0,e(u).paramterMessage=!0,e(u).chatMessage=!0,e(u).autoReply=!0,e(u).aiCopywritingGen=!0,e(u).aiMaterialGen=!0})},{default:a(()=>[f(" 全選 ")]),_:1}),t(o,{status:"small4",class:"!px-1",onClick:d[3]||(d[3]=()=>{e(u).followupManagement=!1,e(u).paramterMessage=!1,e(u).chatMessage=!1,e(u).autoReply=!1,e(u).aiCopywritingGen=!1,e(u).aiMaterialGen=!1})},{default:a(()=>[f(" 清除 ")]),_:1})])]),c("div",et,[c("div",null,[tt,c("div",at,[t(m,{checked:e(u).followupManagement,"onUpdate:checked":d[4]||(d[4]=p=>e(u).followupManagement=p),class:"!text-base"},{default:a(()=>[f(" 追蹤活動管理 ")]),_:1},8,["checked"]),t(m,{checked:e(u).paramterMessage,"onUpdate:checked":d[5]||(d[5]=p=>e(u).paramterMessage=p),class:"!text-base"},{default:a(()=>[f(" 參數訊息 ")]),_:1},8,["checked"]),t(m,{checked:e(u).chatMessage,"onUpdate:checked":d[6]||(d[6]=p=>e(u).chatMessage=p),class:"!text-base"},{default:a(()=>[f(" 雙向訊息 ")]),_:1},8,["checked"]),t(m,{checked:e(u).autoReply,"onUpdate:checked":d[7]||(d[7]=p=>e(u).autoReply=p),class:"!text-base"},{default:a(()=>[f(" 自動回覆 ")]),_:1},8,["checked"])])]),c("div",null,[nt,c("div",st,[t(m,{checked:e(u).aiCopywritingGen,"onUpdate:checked":d[8]||(d[8]=p=>e(u).aiCopywritingGen=p),class:"!text-base"},{default:a(()=>[f(" AI 文案生成 ")]),_:1},8,["checked"]),t(m,{checked:e(u).aiMaterialGen,"onUpdate:checked":d[9]||(d[9]=p=>e(u).aiMaterialGen=p),class:"!text-base"},{default:a(()=>[f(" AI 素材生成 ")]),_:1},8,["checked"])])])])]),_:1}),t(o,{"html-type":"submit",class:"hidden"},{default:a(()=>[f(" 確定 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])}}}),ot={class:"flex justify-between px-2 items-center py-4 bg-sms-grayscale-0 rounded-t-12px"},kt=Z({__name:"index",setup(x){const M=S(null),G=S(null),{getSubAccounts:U,subAccountList:T,pagination:h,getSubAccountOption:u,subAccountOption:C}=ee(),n=[{value:"ACTIVE",label:"開啟"},{value:"UNACTIVE",label:"關閉"}],A=[{title:"子帳號名稱",dataIndex:"subName",key:"subName",sorter:!0,width:"150px"},{title:"建立日期",dataIndex:"createTime",key:"createTime",sorter:!0,width:"150px"},{title:"修改日期",dataIndex:"updateTime",key:"updateTime",sorter:!0,width:"150px"},{title:"單位",dataIndex:"unit",key:"unite",sorter:!0,width:"222.5px"},{title:"姓名",dataIndex:"name",key:"name",sorter:!0,width:"120px"},{title:"剩餘金額",dataIndex:"balance",key:"balance",sorter:!0,width:"222.5px",align:"right"},{title:"狀態",dataIndex:"status",key:"status",width:"92px",sorter:!0}];Re(()=>{v(1),u()});const g=D({selectedRowKeys:[],selectedRows:[],loading:!1});function R(i,o){console.log("selectedRowKeys changed: ",i,o),g.selectedRowKeys=i,g.selectedRows=o}const l=S({keyword:"",sortField:"createTime",sortOrder:"descend",subName:[],status:void 0,createTime:void 0,updateTime:void 0});async function y(i,o,m){console.log("sorter:",m),l.value=Object.assign(l.value,{sortField:m.field,sortOrder:m.order}),await v(h.value.current,h.value.pageSize)}async function N(i,o){await v(i,o)}async function v(i=1,o=10){const m={current:i,pageSize:o,...e(l)};await U(m)}async function d(i){T.value=T.value.map(o=>i.key===o.key?{...i,status:!i.status}:o)}const P=S(null);function _(){var i;v(1),(i=P.value)==null||i.hide()}function s(){g.selectedRows.length>1?G.value&&G.value.show(g.selectedRowKeys):M.value&&M.value.show(g.selectedRows[0])}return(i,o)=>{const m=ve,I=W,$=_e,E=be,p=Q,w=ge,V=J,K=xe,j=X,r=H,q=ke,de=fe,pe=me;return Y(),L(pe,{title:"子帳號管理"},{extraContent:a(()=>[t(I,{status:"small1",onClick:o[0]||(o[0]=()=>{var b;return(b=e(M))==null?void 0:b.show()})},{icon:a(()=>[t(m,{name:"plus",width:"16px"})]),default:a(()=>[f(" 新增子帳號 ")]),_:1})]),default:a(()=>[c("div",ot,[t(I,{status:"small2",class:"me-2",disabled:e(g).selectedRowKeys.length===0,onClick:s},{icon:a(()=>[t(m,{name:"edit",width:"16px"})]),default:a(()=>[f(B(e(g).selectedRowKeys.length>1?"批次編輯":"編輯")+" ",1)]),_:1},8,["disabled"]),t(Ne,{ref_key:"filterKeywordInputRef",ref:P,modelValue:e(l).keyword,"onUpdate:modelValue":o[7]||(o[7]=b=>e(l).keyword=b),class:"w-440px h-40px",placeholder:"搜尋子帳號名稱、姓名",onClearFilter:o[8]||(o[8]=()=>{l.value={...e(l),keyword:"",subName:[],status:void 0,createTime:void 0,updateTime:void 0}})},{filterForm:a(()=>[t(r,{layout:"vertical",model:e(l),autocomplete:"off"},{default:a(()=>[t(j,{gutter:[16,12]},{default:a(()=>[t(V,{span:24},{default:a(()=>[t(w,{id:"subName",label:"子帳號名稱",valueed:e(Se)(e(l).subName)},{default:a(()=>[t(p,{value:e(l).subName,"onUpdate:value":o[2]||(o[2]=b=>e(l).subName=b),options:e(C),"max-tag-count":2,"show-arrow":!0,mode:"multiple",class:"w-full","option-filter-prop":"label","menu-item-selected-icon":" "},{dropdownRender:a(({menuNode:b})=>[t($,{modelValue:e(l).subName,"onUpdate:modelValue":o[1]||(o[1]=O=>e(l).subName=O),menu:b,options:e(C)},null,8,["modelValue","menu","options"])]),option:a(({value:b,label:O})=>[t(E,{values:e(l).subName,value:b,label:O},null,8,["values","value","label"])]),_:1},8,["value","options"])]),_:1},8,["valueed"])]),_:1}),t(V,{span:24},{default:a(()=>[t(w,{label:"帳號狀態",valueed:e(Ue)(e(l).status,n)},{default:a(()=>[t(p,{value:e(l).status,"onUpdate:value":o[3]||(o[3]=b=>e(l).status=b),options:n,"max-tag-count":2,"show-arrow":!0,"show-search":!1,class:"w-full"},null,8,["value"])]),_:1},8,["valueed"])]),_:1}),t(V,{span:24},{default:a(()=>[t(w,{label:"建立時間",valueed:e(l).createTime},{default:a(()=>[t(K,{value:e(l).createTime,"onUpdate:value":o[4]||(o[4]=b=>e(l).createTime=b),class:"w-full",placement:"topLeft",format:"YYYY-MM-DD","value-format":"YYYY/MM/DD"},null,8,["value"])]),_:1},8,["valueed"])]),_:1}),t(V,{span:24},{default:a(()=>[t(w,{label:"修改時間",valueed:e(l).updateTime},{default:a(()=>[t(K,{value:e(l).updateTime,"onUpdate:value":o[5]||(o[5]=b=>e(l).updateTime=b),class:"w-full",placement:"topLeft",format:"YYYY-MM-DD","value-format":"YYYY/MM/DD"},null,8,["value"])]),_:1},8,["valueed"])]),_:1}),t(V,{span:24,class:"text-center"},{default:a(()=>[t(I,{status:"small2",class:"me-5",onClick:o[6]||(o[6]=b=>{var O;return(O=e(P))==null?void 0:O.hide()})},{default:a(()=>[f(" 取消 ")]),_:1}),t(I,{status:"small1",onClick:_},{default:a(()=>[f(" 確定 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])]),t(de,{"data-source":e(T),columns:A,size:"small","show-sorter-tooltip":!1,"row-selection":{selectedRowKeys:e(g).selectedRowKeys,onChange:R},pagination:{...e(h)},onChange:y,onChangePagination:N},{bodyCell:a(({column:b,record:O,text:ae})=>[b.dataIndex==="balance"?(Y(),Ge(Te,{key:0},[f(" NT$ "+B(ae.toLocaleString()),1)],64)):ne("",!0),b.dataIndex==="status"?(Y(),L(q,{key:1,checked:ae,onClick:ut=>d(O)},null,8,["checked","onClick"])):ne("",!0)]),_:1},8,["data-source","row-selection","pagination"]),t(qe,{ref_key:"subAccountFormRef",ref:M,"save-callbck":()=>v(e(h).current,e(h).pageSize)},null,8,["save-callbck"]),t(lt,{ref_key:"batchAccountEditRef",ref:G,"save-callbck":()=>v(e(h).current,e(h).pageSize)},null,8,["save-callbck"])]),_:1})}}});export{kt as default};
