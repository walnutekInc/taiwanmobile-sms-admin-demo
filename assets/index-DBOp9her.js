import{_ as te}from"./index.vuevuetypescriptsetuptruelang-Byx7QoIE.js";import{_ as oe}from"./index.vuevuetypestyleindex0lang-DHcaqYWq.js";import{_ as ae}from"./index.vuevuetypescriptsetuptruelang-BmwEAEMb.js";import{_ as se}from"./index-C91rZXpu.js";import{_ as ne,a as le}from"./index.vuevuetypescriptsetuptruelang-CgLhmNiY.js";import{_ as ie}from"./index.vuevuetypescriptsetuptruelang-CxDHX7AS.js";import{j as ue,_ as re}from"./index-R-qz9I0f.js";import{_ as pe}from"./request-DSiPDDeB.js";import{u as de}from"./group-label-C62Dj_iW.js";import{a as ce,b as M}from"./tools-DuR4KSGu.js";import{u as me}from"./auto-reply-CbvW4f58.js";import{d as _e,ad as fe,D as ge,r as ye,f as v,u as e,W as p,_ as K,$ as a,k as t,G as g,Y as d,X as c,F as x,a3 as D,a4 as k,H as we}from"./vue-BMMYOVpY.js";import{N as ve,q as xe,p as ke,G as he,s as Re,F as be,H as De,z as Ye}from"./antd-DcYYAuBl.js";import"./context-Wcqp34b-.js";import"./index.vuevuetypescriptsetuptruelang-CP3U4HOe.js";const Ce={class:"flex justify-between px-2 items-center py-4 bg-sms-grayscale-0 rounded-t-12px"},Te={class:"me-1"},Me={href:"javascript:;"},Ke=d("span",null,"訊息主旨僅支援 MMS",-1),Ie={class:"me-1"},Oe={href:"javascript:;"},Ve=d("span",null,"將回傳特定內容(接收關鍵字)的複數門號打包至群組標籤，後續可再進行行銷",-1),je={key:1},$e={key:0},Ee={key:1},Fe=d("div",{class:"text-center px-30px py-20px w-328px text-base mx-auto"}," 您選擇的自動回覆將直接永久刪除。 ",-1),et=_e({__name:"index",setup(Ne){const{getGroupLabelOption:I,groupOptions:Y}=de(),{getAutoReplys:O,autoReplys:V,pagination:h,deleteAutoReply:j}=me(),$=fe();ge(async()=>{I(),y()});const E=ue(),F=[{title:"接收關鍵字",dataIndex:"acceptKeyword",key:"acceptKeyword",sorter:!0,fixed:"left",width:"160px"},{title:"訊息主旨",dataIndex:"subject",key:"subject",sorter:!0,fixed:"left",width:"111px"},{title:"自動回覆內容",dataIndex:"content",key:"content",sorter:!0,width:"278px"},{title:"群組標籤設定",dataIndex:"group",key:"group",sorter:!0,width:"154px"},{title:"開始日期",dataIndex:"startDate",key:"startDate",sorter:!0,width:"140px"},{title:"結束日期",dataIndex:"endDate",key:"endDate",sorter:!0,width:"140px"},{title:"建立時間",dataIndex:"createTime",key:"createTime",sorter:!0,width:"140px"},{title:"修改時間",dataIndex:"updateTime",key:"updateTime",defaultSortOrder:"descend",sorter:!0,width:"140px"}],i=ye({selectedRowKeys:[],selectedRows:[],loading:!1});function N(l,o){console.log("selectedRowKeys changed: ",l,o),i.selectedRowKeys=l,i.selectedRows=o}const n=v({sortField:"createTime",sortOrder:"descend",takeEffectDates:void 0,group:[],createTime:void 0,updateTime:void 0,keyword:""}),S=v();async function y(l=1,o=10){const u={current:l,pageSize:o,...e(n)};await O(u)}async function U(l,o,u){console.log("sorter:",u),n.value=Object.assign(n.value,{sortField:u.field,sortOrder:u.order}),await y(h.value.current,h.value.pageSize)}async function B(l,o){await y(l,o)}const R=v(null);function L(){var l;y(1),(l=R.value)==null||l.hide()}function A(){i.selectedRows.length===1&&$.push({name:"AutoReplyEdit",params:{id:i.selectedRowKeys[0]}})}const m=v(!1);function G(){m.value=!0}async function z(){var o;((o=(await j(i.selectedRowKeys)).data)==null?void 0:o.status)==="success"&&(E.success({message:"自動回覆刪除成功",placement:"top"}),m.value=!1,i.selectedRowKeys=[],i.selectedRows=[])}return(l,o)=>{const u=re,_=ie,P=ne,H=le,q=xe,w=se,f=ke,b=he,W=Re,X=be,C=De,J=ae,Q=oe,Z=Ye,ee=te;return p(),K(ee,{title:"自動回覆"},{extraContent:a(()=>[t(_,{status:"small1",onClick:o[0]||(o[0]=()=>l.$router.push({name:"AutoReplyCreate"}))},{icon:a(()=>[t(u,{name:"plus",width:"16px"})]),default:a(()=>[g(" 新增自動回覆 ")]),_:1})]),default:a(()=>[d("div",Ce,[d("div",null,[t(_,{status:"small2",class:"me-2",disabled:e(i).selectedRowKeys.length===0||e(i).selectedRowKeys.length>1,onClick:A},{icon:a(()=>[t(u,{name:"edit",width:"16px"})]),default:a(()=>[g(" 編輯 ")]),_:1},8,["disabled"]),t(_,{status:"small2",class:"me-2",disabled:e(i).selectedRowKeys.length===0,onClick:G},{icon:a(()=>[t(u,{name:"delete",width:"16px"})]),default:a(()=>[g(" 刪除 ")]),_:1},8,["disabled"])]),t(pe,{ref_key:"filterKeywordInputRef",ref:R,modelValue:e(n).keyword,"onUpdate:modelValue":o[7]||(o[7]=s=>e(n).keyword=s),class:"w-440px h-40px",placeholder:"搜尋接收關鍵字、自動回覆內容",onClearFilter:o[8]||(o[8]=()=>{n.value={...e(n),keyword:"",group:[],takeEffectDates:void 0,createTime:void 0,updateTime:void 0}})},{filterForm:a(()=>[t(X,{ref_key:"formRef",ref:S,layout:"vertical",model:e(n),autocomplete:"off"},{default:a(()=>[t(W,{gutter:[16,12]},{default:a(()=>[t(f,{span:24},{default:a(()=>[t(w,{id:"group",label:"群組標籤設定",valueed:e(ce)(e(n).group)},{default:a(()=>[t(q,{value:e(n).group,"onUpdate:value":o[2]||(o[2]=s=>e(n).group=s),options:e(Y),"max-tag-count":2,"show-arrow":!0,mode:"multiple",class:"w-full","option-filter-prop":"label","menu-item-selected-icon":" "},{dropdownRender:a(({menuNode:s})=>[t(P,{modelValue:e(n).group,"onUpdate:modelValue":o[1]||(o[1]=r=>e(n).group=r),menu:s,options:e(Y)},null,8,["modelValue","menu","options"])]),option:a(({value:s,label:r})=>[t(H,{values:e(n).group,value:s,label:r},null,8,["values","value","label"])]),_:1},8,["value","options"])]),_:1},8,["valueed"])]),_:1}),t(f,{span:24},{default:a(()=>[t(w,{label:"生效開始與結束日期",valueed:e(n).takeEffectDates},{default:a(()=>[t(b,{value:e(n).takeEffectDates,"onUpdate:value":o[3]||(o[3]=s=>e(n).takeEffectDates=s),class:"w-full",placement:"topLeft",format:"YYYY-MM-DD","value-format":"YYYY/MM/DD"},null,8,["value"])]),_:1},8,["valueed"])]),_:1}),t(f,{span:24},{default:a(()=>[t(w,{label:"建立時間",valueed:e(n).createTime},{default:a(()=>[t(b,{value:e(n).createTime,"onUpdate:value":o[4]||(o[4]=s=>e(n).createTime=s),class:"w-full",placement:"topLeft",format:"YYYY-MM-DD","value-format":"YYYY/MM/DD"},null,8,["value"])]),_:1},8,["valueed"])]),_:1}),t(f,{span:24},{default:a(()=>[t(w,{label:"修改時間",valueed:e(n).updateTime},{default:a(()=>[t(b,{value:e(n).updateTime,"onUpdate:value":o[5]||(o[5]=s=>e(n).updateTime=s),class:"w-full",placement:"topLeft",format:"YYYY-MM-DD","value-format":"YYYY/MM/DD"},null,8,["value"])]),_:1},8,["valueed"])]),_:1}),t(f,{span:24,class:"text-center"},{default:a(()=>[t(_,{status:"small2",class:"me-5",onClick:o[6]||(o[6]=s=>{var r;return(r=e(R))==null?void 0:r.hide()})},{default:a(()=>[g(" 取消 ")]),_:1}),t(_,{status:"small1",onClick:L},{default:a(()=>[g(" 確定 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])]),t(Q,{"data-source":e(V),columns:F,size:"small",scroll:{x:1500},"show-sorter-tooltip":!1,"row-selection":{selectedRowKeys:e(i).selectedRowKeys,onChange:N},pagination:{...e(h)},onChange:U,onChangePagination:B},{headerCell:a(({column:s})=>[s.key==="subject"?(p(),c(x,{key:0},[d("span",Te,D(s.title),1),t(C,{placement:"top","get-popup-container":e(M)},{title:a(()=>[Ke]),default:a(()=>[d("a",Me,[t(u,{name:"union",width:"16px",class:"text-sms-grayscale-60"})])]),_:1},8,["get-popup-container"])],64)):k("",!0),s.key==="group"?(p(),c(x,{key:1},[d("span",Ie,D(s.title),1),t(C,{placement:"top","get-popup-container":e(M)},{title:a(()=>[Ve]),default:a(()=>[d("a",Oe,[t(u,{name:"union",width:"16px",class:"text-sms-grayscale-60"})])]),_:1},8,["get-popup-container"])],64)):k("",!0)]),bodyCell:a(({column:s,record:r,text:T})=>[s.dataIndex==="group"?(p(),c(x,{key:0},[r.group?(p(),K(J,{key:0,chips:[r.group],"max-count":3},null,8,["chips"])):(p(),c("span",je,"-"))],64)):k("",!0),s.dataIndex==="subject"?(p(),c(x,{key:1},[e(ve)(T)?(p(),c("span",Ee,"-")):(p(),c("span",$e,D(T),1))],64)):k("",!0)]),_:1},8,["data-source","row-selection","pagination"]),t(Z,{open:e(m),"onUpdate:open":o[9]||(o[9]=s=>we(m)?m.value=s:null),title:"是否刪除選取的自動回覆？",centered:"","cancel-text":"取消","ok-text":"確定",width:"440px",onOk:z},{default:a(()=>[Fe]),_:1},8,["open"])]),_:1})}}});export{et as default};
